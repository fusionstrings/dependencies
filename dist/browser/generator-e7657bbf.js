var e$4={};const t$4=/^([~\^])?(0|[1-9]\d*)(?:\.(0|[1-9]\d*))?$/;const r$4=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-([\da-z-]+(?:\.[\da-z-]+)*))?(\+[\da-z-]+)?$/i;e$4.semverRegEx=r$4;e$4.shortSemverRegEx=t$4;const s$3=Symbol("major");const i$4=Symbol("minor");const n$4=Symbol("patch");const h$4=Symbol("pre");const a$4=Symbol("build");const o$5=Symbol("tag");let m$3=/^\d+$/;class Semver{constructor(e){let t=e.match(r$4);if(t){this[s$3]=parseInt(t[1],10);this[i$4]=parseInt(t[2],10);this[n$4]=parseInt(t[3],10);this[h$4]=t[4]&&t[4].split(".");this[a$4]=t[5];}else this[o$5]=e;}get major(){return this[s$3]}get minor(){return this[i$4]}get patch(){return this[n$4]}get pre(){return this[h$4]}get build(){return this[a$4]}get tag(){return this[o$5]}gt(e){return 1===Semver.compare(this,e)}lt(e){return -1===Semver.compare(this,e)}eq(e){e instanceof Semver||(e=new Semver(e));if(this[o$5]&&e[o$5])return this[o$5]===e[o$5];if(this[o$5]||e[o$5])return false;if(this[s$3]!==e[s$3])return false;if(this[i$4]!==e[i$4])return false;if(this[n$4]!==e[n$4])return false;if(void 0===this[h$4]&&void 0===e[h$4])return true;if(void 0===this[h$4]||void 0===e[h$4])return false;if(this[h$4].length!==e[h$4].length)return false;for(let t=0;t<this[h$4].length;t++)if(this[h$4][t]!==e[h$4][t])return false;return this[a$4]===e[a$4]}matches(e,t=false){e instanceof SemverRange||(e=new SemverRange(e));return e.has(this,t)}toString(){return this[o$5]?this[o$5]:this[s$3]+"."+this[i$4]+"."+this[n$4]+(this[h$4]?"-"+this[h$4].join("."):"")+(this[a$4]?this[a$4]:"")}static isValid(e){let t=e.match(r$4);return t&&void 0!==t[2]&&void 0!==t[3]}static compare(e,t){e instanceof Semver||(e=new Semver(e));t instanceof Semver||(t=new Semver(t));return e[o$5]&&t[o$5]?0:e[o$5]?-1:t[o$5]?1:e[s$3]!==t[s$3]?e[s$3]>t[s$3]?1:-1:e[i$4]!==t[i$4]?e[i$4]>t[i$4]?1:-1:e[n$4]!==t[n$4]?e[n$4]>t[n$4]?1:-1:e[h$4]||t[h$4]?e[h$4]?t[h$4]?prereleaseCompare(e[h$4],t[h$4]):-1:1:0}}e$4.Semver=Semver;function prereleaseCompare(e,t){for(let r=0,s=Math.min(e.length,t.length);r<s;r++)if(e[r]!==t[r]){let s=e[r].match(m$3);let i=t[r].match(m$3);return s&&!i?-1:i&&!s?1:s&&i?parseInt(e[r],10)>parseInt(t[r],10)?1:-1:e[r]>t[r]?1:-1}return e.length===t.length?0:e.length>t.length?1:-1}const c$4=0;const u$4=1;const v$3=2;const l$3=3;const S$3=Symbol("type");const g$3=Symbol("version");class SemverRange{constructor(e){if("*"===e||""===e){this[S$3]=c$4;return}let r=e.match(t$4);if(r){r[1]&&(e=e.substr(1));if(void 0===r[3]){this[g$3]=new Semver(e+".0.0");this[S$3]=u$4;}else {this[g$3]=new Semver(e+".0");"^"===r[1]&&"0"!==r[2]?this[S$3]=u$4:this[S$3]=v$3;}this[g$3][h$4]=this[g$3][h$4]||[];}else if(e.startsWith("^^")){this[g$3]=new Semver(e.substr(2));this[S$3]=u$4;}else if("^"===e[0]){this[g$3]=new Semver(e.substr(1));0===this[g$3][s$3]?0===this[g$3][i$4]?this[S$3]=l$3:this[S$3]=v$3:this[S$3]=u$4;}else if("~"===e[0]){this[g$3]=new Semver(e.substr(1));this[S$3]=v$3;}else {this[g$3]=new Semver(e);this[S$3]=l$3;}this[g$3][o$5]&&this[S$3]!==l$3&&(this[S$3]=l$3);}get isExact(){return this[S$3]===l$3}get isExactSemver(){return this[S$3]===l$3&&void 0===this.version[o$5]}get isExactTag(){return this[S$3]===l$3&&void 0!==this.version[o$5]}get isStable(){return this[S$3]===v$3}get isMajor(){return this[S$3]===u$4}get isWildcard(){return this[S$3]===c$4}get type(){switch(this[S$3]){case c$4:return "wildcard";case u$4:return "major";case v$3:return "stable";case l$3:return "exact"}}get version(){return this[g$3]}gt(e){return 1===SemverRange.compare(this,e)}lt(e){return -1===SemverRange.compare(this,e)}eq(e){return 0===SemverRange.compare(this,e)}has(e,t=false){e instanceof Semver||(e=new Semver(e));return this[S$3]===c$4?t||!e[h$4]&&!e[o$5]:this[S$3]===l$3?this[g$3].eq(e):!e[o$5]&&(this[g$3][s$3]===e[s$3]&&(!(this[S$3]===u$4?this[g$3][i$4]>e[i$4]:this[g$3][i$4]!==e[i$4])&&((this[S$3]===u$4&&this[g$3][i$4]!==e[i$4]||!(this[g$3][n$4]>e[n$4]))&&(void 0===e[h$4]||0===e[h$4].length||(void 0===this[g$3][h$4]||0===this[g$3][h$4].length?t:(false!==t||this[g$3][i$4]===e[i$4]&&this[g$3][n$4]===e[n$4])&&1!==prereleaseCompare(this[g$3][h$4],e[h$4]))))))}contains(e){e instanceof SemverRange||(e=new SemverRange(e));return this[S$3]===c$4||e[S$3]!==c$4&&(e[S$3]>=this[S$3]&&this.has(e[g$3],true))}intersect(e){e instanceof SemverRange||(e=new SemverRange(e));if(this[S$3]===c$4&&e[S$3]===c$4)return this;if(this[S$3]===c$4)return e;if(e[S$3]===c$4)return this;if(this[S$3]===l$3)return e.has(this[g$3],true)?this:void 0;if(e[S$3]===l$3)return this.has(e[g$3],true)?e:void 0;let t,r,s;if(e[g$3].gt(this[g$3])){t=e;r=this;s=true;}else {t=this;r=e;s=false;}if(!r.has(t[g$3],true))return;if(r[S$3]===u$4)return s?e:this;let i=new SemverRange(t[g$3].toString());i[S$3]=v$3;return i}bestMatch(e,t=false){let r;e.forEach((e=>{e instanceof Semver||(e=new Semver(e));this.has(e,t)&&(r?1===Semver.compare(e,r)&&(r=e):r=e);}));return r}toString(){let e=this[g$3];switch(this[S$3]){case c$4:return "*";case u$4:return 0===e[s$3]&&0===e[i$4]&&0===e[n$4]?"0":e[h$4]&&0===e[h$4].length&&0===e[n$4]?"^"+e[s$3]+"."+e[i$4]:"^"+e.toString();case v$3:return e[h$4]&&0===e[h$4].length&&0===e[n$4]||0===e[s$3]&&0===e[i$4]?e[s$3]+"."+e[i$4]:"~"+e.toString();case l$3:return e.toString()}}static match(e,t,r=false){t instanceof Semver||(t=new Semver(t));return t.matches(e,r)}static isValid(e){let t=new SemverRange(e);return t[S$3]!==l$3||void 0===t[g$3][o$5]}static compare(e,t){e instanceof SemverRange||(e=new SemverRange(e));t instanceof SemverRange||(t=new SemverRange(t));if(e[S$3]===c$4&&t[S$3]===c$4)return 0;if(e[S$3]===c$4)return 1;if(t[S$3]===c$4)return -1;let r=Semver.compare(e[g$3],t[g$3]);return 0!==r?r:e[S$3]===t[S$3]?0:e[S$3]>t[S$3]?1:-1}}e$4.SemverRange=SemverRange;const R$3=e$4.SemverRange;

function unimplemented(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}var e$3=[];var n$3=false;var r$3;var t$3=-1;function cleanUpNextTick(){if(n$3&&r$3){n$3=false;r$3.length?e$3=r$3.concat(e$3):t$3=-1;e$3.length&&drainQueue();}}function drainQueue(){if(!n$3){var a=setTimeout(cleanUpNextTick,0);n$3=true;var o=e$3.length;while(o){r$3=e$3;e$3=[];while(++t$3<o)r$3&&r$3[t$3].run();t$3=-1;o=e$3.length;}r$3=null;n$3=false;clearTimeout(a);}}function nextTick(r){var t=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];e$3.push(new Item(r,t));1!==e$3.length||n$3||setTimeout(drainQueue,0);}function Item(e,n){this.fun=e;this.array=n;}Item.prototype.run=function(){this.fun.apply(null,this.array);};var a$3="browser";var o$4="x64";var i$3="browser";var s$2={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"};var v$2=["/usr/bin/node"];var l$2=[];var u$3="v16.8.0";var c$3={};var emitWarning=function(e,n){console.warn((n?n+": ":"")+e);};var binding=function(e){unimplemented("binding");};var umask=function(e){return 0};var cwd=function(){return "/"};var chdir=function(e){};var d$2={name:"node",sourceUrl:"",headersUrl:"",libUrl:""};function noop(){}var p$2=noop;var f$4=[];function _linkedBinding(e){unimplemented("_linkedBinding");}var g$2={};var m$2=false;var h$3={};function dlopen(e){unimplemented("dlopen");}function _getActiveRequests(){return []}function _getActiveHandles(){return []}var _$2=noop;var b$3=noop;var cpuUsage=function(){return {}};var w$2=cpuUsage;var k$3=cpuUsage;var x$2=noop;var U$2=noop;var A$2=noop;var E$2={};function assert(e,n){if(!e)throw new Error(n||"assertion error")}var C$2={inspector:false,debug:false,uv:false,ipv6:false,tls_alpn:false,tls_sni:false,tls_ocsp:false,tls:false,cached_builtins:true};var T$2=noop;var y$2=noop;function hasUncaughtExceptionCaptureCallback(){return false}var L$2=noop;var P$2=noop;var B$2=noop;var I$2=noop;var N$2=noop;var M$2=void 0;var H$2=void 0;var D$2=void 0;var S$2=noop;var q$2=2;var R$2=1;var Q$2="/bin/usr/node";var j$2=9229;var F$2="node";var O$2=[];var W$2=noop;var G$2={now:"undefined"!==typeof performance?performance.now.bind(performance):void 0,timing:"undefined"!==typeof performance?performance.timing:void 0};if(void 0===G$2.now){var J$2=Date.now();G$2.timing&&G$2.timing.navigationStart&&(J$2=G$2.timing.navigationStart);G$2.now=()=>Date.now()-J$2;}function uptime(){return G$2.now()/1e3}var z$2=1e9;function hrtime(e){var n=Math.floor(.001*(Date.now()-G$2.now()));var r=.001*G$2.now();var t=Math.floor(r)+n;var a=Math.floor(r%1*1e9);if(e){t-=e[0];a-=e[1];if(a<0){t--;a+=z$2;}}return [t,a]}hrtime.bigint=function(e){var n=hrtime(e);return "undefined"===typeof BigInt?n[0]*z$2+n[1]:BigInt(n[0]*z$2)+BigInt(n[1])};var K$2=10;var V$2={};var X$2=0;function on(){return oe$1}var Y$2=on;var Z$2=on;var $$2=on;var ee$1=on;var ne$1=on;var re$1=noop;var te$1=on;var ae$1=on;function listeners(e){return []}var oe$1={version:u$3,versions:c$3,arch:o$4,platform:i$3,release:d$2,_rawDebug:p$2,moduleLoadList:f$4,binding:binding,_linkedBinding:_linkedBinding,_events:V$2,_eventsCount:X$2,_maxListeners:K$2,on:on,addListener:Y$2,once:Z$2,off:$$2,removeListener:ee$1,removeAllListeners:ne$1,emit:re$1,prependListener:te$1,prependOnceListener:ae$1,listeners:listeners,domain:g$2,_exiting:m$2,config:h$3,dlopen:dlopen,uptime:uptime,_getActiveRequests:_getActiveRequests,_getActiveHandles:_getActiveHandles,reallyExit:_$2,_kill:b$3,cpuUsage:cpuUsage,resourceUsage:w$2,memoryUsage:k$3,kill:x$2,exit:U$2,openStdin:A$2,allowedNodeEnvironmentFlags:E$2,assert:assert,features:C$2,_fatalExceptions:T$2,setUncaughtExceptionCaptureCallback:y$2,hasUncaughtExceptionCaptureCallback:hasUncaughtExceptionCaptureCallback,emitWarning:emitWarning,nextTick:nextTick,_tickCallback:L$2,_debugProcess:P$2,_debugEnd:B$2,_startProfilerIdleNotifier:I$2,_stopProfilerIdleNotifier:N$2,stdout:M$2,stdin:D$2,stderr:H$2,abort:S$2,umask:umask,chdir:chdir,cwd:cwd,env:s$2,title:a$3,argv:v$2,execArgv:l$2,pid:q$2,ppid:R$2,execPath:Q$2,debugPort:j$2,hrtime:hrtime,argv0:F$2,_preload_modules:O$2,setSourceMapsEnabled:W$2};

var r$2="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var t$2={};var n$2=oe$1;t$2=t$2=SemVer;var o$3;o$3="object"===typeof n$2&&n$2.env&&n$2.env.NODE_DEBUG&&/\bsemver\b/i.test(n$2.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER");console.log.apply(console,e);}:function(){};t$2.SEMVER_SPEC_VERSION="2.0.0";var a$2=256;var i$2=Number.MAX_SAFE_INTEGER||9007199254740991;var s$1=16;var p$1=t$2.re=[];var c$2=t$2.src=[];var l$1=t$2.tokens={};var E$1=0;function tok(e){l$1[e]=E$1++;}tok("NUMERICIDENTIFIER");c$2[l$1.NUMERICIDENTIFIER]="0|[1-9]\\d*";tok("NUMERICIDENTIFIERLOOSE");c$2[l$1.NUMERICIDENTIFIERLOOSE]="[0-9]+";tok("NONNUMERICIDENTIFIER");c$2[l$1.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";tok("MAINVERSION");c$2[l$1.MAINVERSION]="("+c$2[l$1.NUMERICIDENTIFIER]+")\\."+"("+c$2[l$1.NUMERICIDENTIFIER]+")\\."+"("+c$2[l$1.NUMERICIDENTIFIER]+")";tok("MAINVERSIONLOOSE");c$2[l$1.MAINVERSIONLOOSE]="("+c$2[l$1.NUMERICIDENTIFIERLOOSE]+")\\."+"("+c$2[l$1.NUMERICIDENTIFIERLOOSE]+")\\."+"("+c$2[l$1.NUMERICIDENTIFIERLOOSE]+")";tok("PRERELEASEIDENTIFIER");c$2[l$1.PRERELEASEIDENTIFIER]="(?:"+c$2[l$1.NUMERICIDENTIFIER]+"|"+c$2[l$1.NONNUMERICIDENTIFIER]+")";tok("PRERELEASEIDENTIFIERLOOSE");c$2[l$1.PRERELEASEIDENTIFIERLOOSE]="(?:"+c$2[l$1.NUMERICIDENTIFIERLOOSE]+"|"+c$2[l$1.NONNUMERICIDENTIFIER]+")";tok("PRERELEASE");c$2[l$1.PRERELEASE]="(?:-("+c$2[l$1.PRERELEASEIDENTIFIER]+"(?:\\."+c$2[l$1.PRERELEASEIDENTIFIER]+")*))";tok("PRERELEASELOOSE");c$2[l$1.PRERELEASELOOSE]="(?:-?("+c$2[l$1.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+c$2[l$1.PRERELEASEIDENTIFIERLOOSE]+")*))";tok("BUILDIDENTIFIER");c$2[l$1.BUILDIDENTIFIER]="[0-9A-Za-z-]+";tok("BUILD");c$2[l$1.BUILD]="(?:\\+("+c$2[l$1.BUILDIDENTIFIER]+"(?:\\."+c$2[l$1.BUILDIDENTIFIER]+")*))";tok("FULL");tok("FULLPLAIN");c$2[l$1.FULLPLAIN]="v?"+c$2[l$1.MAINVERSION]+c$2[l$1.PRERELEASE]+"?"+c$2[l$1.BUILD]+"?";c$2[l$1.FULL]="^"+c$2[l$1.FULLPLAIN]+"$";tok("LOOSEPLAIN");c$2[l$1.LOOSEPLAIN]="[v=\\s]*"+c$2[l$1.MAINVERSIONLOOSE]+c$2[l$1.PRERELEASELOOSE]+"?"+c$2[l$1.BUILD]+"?";tok("LOOSE");c$2[l$1.LOOSE]="^"+c$2[l$1.LOOSEPLAIN]+"$";tok("GTLT");c$2[l$1.GTLT]="((?:<|>)?=?)";tok("XRANGEIDENTIFIERLOOSE");c$2[l$1.XRANGEIDENTIFIERLOOSE]=c$2[l$1.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*";tok("XRANGEIDENTIFIER");c$2[l$1.XRANGEIDENTIFIER]=c$2[l$1.NUMERICIDENTIFIER]+"|x|X|\\*";tok("XRANGEPLAIN");c$2[l$1.XRANGEPLAIN]="[v=\\s]*("+c$2[l$1.XRANGEIDENTIFIER]+")"+"(?:\\.("+c$2[l$1.XRANGEIDENTIFIER]+")"+"(?:\\.("+c$2[l$1.XRANGEIDENTIFIER]+")"+"(?:"+c$2[l$1.PRERELEASE]+")?"+c$2[l$1.BUILD]+"?"+")?)?";tok("XRANGEPLAINLOOSE");c$2[l$1.XRANGEPLAINLOOSE]="[v=\\s]*("+c$2[l$1.XRANGEIDENTIFIERLOOSE]+")"+"(?:\\.("+c$2[l$1.XRANGEIDENTIFIERLOOSE]+")"+"(?:\\.("+c$2[l$1.XRANGEIDENTIFIERLOOSE]+")"+"(?:"+c$2[l$1.PRERELEASELOOSE]+")?"+c$2[l$1.BUILD]+"?"+")?)?";tok("XRANGE");c$2[l$1.XRANGE]="^"+c$2[l$1.GTLT]+"\\s*"+c$2[l$1.XRANGEPLAIN]+"$";tok("XRANGELOOSE");c$2[l$1.XRANGELOOSE]="^"+c$2[l$1.GTLT]+"\\s*"+c$2[l$1.XRANGEPLAINLOOSE]+"$";tok("COERCE");c$2[l$1.COERCE]="(^|[^\\d])"+"(\\d{1,"+s$1+"})"+"(?:\\.(\\d{1,"+s$1+"}))?"+"(?:\\.(\\d{1,"+s$1+"}))?"+"(?:$|[^\\d])";tok("COERCERTL");p$1[l$1.COERCERTL]=new RegExp(c$2[l$1.COERCE],"g");tok("LONETILDE");c$2[l$1.LONETILDE]="(?:~>?)";tok("TILDETRIM");c$2[l$1.TILDETRIM]="(\\s*)"+c$2[l$1.LONETILDE]+"\\s+";p$1[l$1.TILDETRIM]=new RegExp(c$2[l$1.TILDETRIM],"g");var u$2="$1~";tok("TILDE");c$2[l$1.TILDE]="^"+c$2[l$1.LONETILDE]+c$2[l$1.XRANGEPLAIN]+"$";tok("TILDELOOSE");c$2[l$1.TILDELOOSE]="^"+c$2[l$1.LONETILDE]+c$2[l$1.XRANGEPLAINLOOSE]+"$";tok("LONECARET");c$2[l$1.LONECARET]="(?:\\^)";tok("CARETTRIM");c$2[l$1.CARETTRIM]="(\\s*)"+c$2[l$1.LONECARET]+"\\s+";p$1[l$1.CARETTRIM]=new RegExp(c$2[l$1.CARETTRIM],"g");var f$3="$1^";tok("CARET");c$2[l$1.CARET]="^"+c$2[l$1.LONECARET]+c$2[l$1.XRANGEPLAIN]+"$";tok("CARETLOOSE");c$2[l$1.CARETLOOSE]="^"+c$2[l$1.LONECARET]+c$2[l$1.XRANGEPLAINLOOSE]+"$";tok("COMPARATORLOOSE");c$2[l$1.COMPARATORLOOSE]="^"+c$2[l$1.GTLT]+"\\s*("+c$2[l$1.LOOSEPLAIN]+")$|^$";tok("COMPARATOR");c$2[l$1.COMPARATOR]="^"+c$2[l$1.GTLT]+"\\s*("+c$2[l$1.FULLPLAIN]+")$|^$";tok("COMPARATORTRIM");c$2[l$1.COMPARATORTRIM]="(\\s*)"+c$2[l$1.GTLT]+"\\s*("+c$2[l$1.LOOSEPLAIN]+"|"+c$2[l$1.XRANGEPLAIN]+")";p$1[l$1.COMPARATORTRIM]=new RegExp(c$2[l$1.COMPARATORTRIM],"g");var h$2="$1$2$3";tok("HYPHENRANGE");c$2[l$1.HYPHENRANGE]="^\\s*("+c$2[l$1.XRANGEPLAIN]+")"+"\\s+-\\s+"+"("+c$2[l$1.XRANGEPLAIN]+")"+"\\s*$";tok("HYPHENRANGELOOSE");c$2[l$1.HYPHENRANGELOOSE]="^\\s*("+c$2[l$1.XRANGEPLAINLOOSE]+")"+"\\s+-\\s+"+"("+c$2[l$1.XRANGEPLAINLOOSE]+")"+"\\s*$";tok("STAR");c$2[l$1.STAR]="(<|>)?=?\\s*\\*";for(var m$1=0;m$1<E$1;m$1++){o$3(m$1,c$2[m$1]);p$1[m$1]||(p$1[m$1]=new RegExp(c$2[m$1]));}t$2.parse=parse$1;function parse$1(e,r){r&&"object"===typeof r||(r={loose:!!r,includePrerelease:false});if(e instanceof SemVer)return e;if("string"!==typeof e)return null;if(e.length>a$2)return null;var t=r.loose?p$1[l$1.LOOSE]:p$1[l$1.FULL];if(!t.test(e))return null;try{return new SemVer(e,r)}catch(e){return null}}t$2.valid=valid;function valid(e,r){var t=parse$1(e,r);return t?t.version:null}t$2.clean=clean;function clean(e,r){var t=parse$1(e.trim().replace(/^[=v]+/,""),r);return t?t.version:null}t$2.SemVer=SemVer;function SemVer(e,t){t&&"object"===typeof t||(t={loose:!!t,includePrerelease:false});if(e instanceof SemVer){if(e.loose===t.loose)return e;e=e.version;}else if("string"!==typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>a$2)throw new TypeError("version is longer than "+a$2+" characters");if(!((this||r$2)instanceof SemVer))return new SemVer(e,t);o$3("SemVer",e,t);(this||r$2).options=t;(this||r$2).loose=!!t.loose;var n=e.trim().match(t.loose?p$1[l$1.LOOSE]:p$1[l$1.FULL]);if(!n)throw new TypeError("Invalid Version: "+e);(this||r$2).raw=e;(this||r$2).major=+n[1];(this||r$2).minor=+n[2];(this||r$2).patch=+n[3];if((this||r$2).major>i$2||(this||r$2).major<0)throw new TypeError("Invalid major version");if((this||r$2).minor>i$2||(this||r$2).minor<0)throw new TypeError("Invalid minor version");if((this||r$2).patch>i$2||(this||r$2).patch<0)throw new TypeError("Invalid patch version");n[4]?(this||r$2).prerelease=n[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var r=+e;if(r>=0&&r<i$2)return r}return e})):(this||r$2).prerelease=[];(this||r$2).build=n[5]?n[5].split("."):[];this.format();}SemVer.prototype.format=function(){(this||r$2).version=(this||r$2).major+"."+(this||r$2).minor+"."+(this||r$2).patch;(this||r$2).prerelease.length&&((this||r$2).version+="-"+(this||r$2).prerelease.join("."));return (this||r$2).version};SemVer.prototype.toString=function(){return (this||r$2).version};SemVer.prototype.compare=function(e){o$3("SemVer.compare",(this||r$2).version,(this||r$2).options,e);e instanceof SemVer||(e=new SemVer(e,(this||r$2).options));return this.compareMain(e)||this.comparePre(e)};SemVer.prototype.compareMain=function(e){e instanceof SemVer||(e=new SemVer(e,(this||r$2).options));return compareIdentifiers((this||r$2).major,e.major)||compareIdentifiers((this||r$2).minor,e.minor)||compareIdentifiers((this||r$2).patch,e.patch)};SemVer.prototype.comparePre=function(e){e instanceof SemVer||(e=new SemVer(e,(this||r$2).options));if((this||r$2).prerelease.length&&!e.prerelease.length)return -1;if(!(this||r$2).prerelease.length&&e.prerelease.length)return 1;if(!(this||r$2).prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=(this||r$2).prerelease[t];var a=e.prerelease[t];o$3("prerelease compare",t,n,a);if(void 0===n&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===n)return -1;if(n!==a)return compareIdentifiers(n,a)}while(++t)};SemVer.prototype.compareBuild=function(e){e instanceof SemVer||(e=new SemVer(e,(this||r$2).options));var t=0;do{var n=(this||r$2).build[t];var a=e.build[t];o$3("prerelease compare",t,n,a);if(void 0===n&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===n)return -1;if(n!==a)return compareIdentifiers(n,a)}while(++t)};SemVer.prototype.inc=function(e,t){switch(e){case"premajor":(this||r$2).prerelease.length=0;(this||r$2).patch=0;(this||r$2).minor=0;(this||r$2).major++;this.inc("pre",t);break;case"preminor":(this||r$2).prerelease.length=0;(this||r$2).patch=0;(this||r$2).minor++;this.inc("pre",t);break;case"prepatch":(this||r$2).prerelease.length=0;this.inc("patch",t);this.inc("pre",t);break;case"prerelease":0===(this||r$2).prerelease.length&&this.inc("patch",t);this.inc("pre",t);break;case"major":0===(this||r$2).minor&&0===(this||r$2).patch&&0!==(this||r$2).prerelease.length||(this||r$2).major++;(this||r$2).minor=0;(this||r$2).patch=0;(this||r$2).prerelease=[];break;case"minor":0===(this||r$2).patch&&0!==(this||r$2).prerelease.length||(this||r$2).minor++;(this||r$2).patch=0;(this||r$2).prerelease=[];break;case"patch":0===(this||r$2).prerelease.length&&(this||r$2).patch++;(this||r$2).prerelease=[];break;case"pre":if(0===(this||r$2).prerelease.length)(this||r$2).prerelease=[0];else {var n=(this||r$2).prerelease.length;while(--n>=0)if("number"===typeof(this||r$2).prerelease[n]){(this||r$2).prerelease[n]++;n=-2;}-1===n&&(this||r$2).prerelease.push(0);}t&&((this||r$2).prerelease[0]===t?isNaN((this||r$2).prerelease[1])&&((this||r$2).prerelease=[t,0]):(this||r$2).prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}this.format();(this||r$2).raw=(this||r$2).version;return this||r$2};t$2.inc=inc;function inc(e,r,t,n){if("string"===typeof t){n=t;t=void 0;}try{return new SemVer(e,t).inc(r,n).version}catch(e){return null}}t$2.diff=diff;function diff(e,r){if(eq(e,r))return null;var t=parse$1(e);var n=parse$1(r);var o="";if(t.prerelease.length||n.prerelease.length){o="pre";var a="prerelease";}for(var i in t)if(("major"===i||"minor"===i||"patch"===i)&&t[i]!==n[i])return o+i;return a}t$2.compareIdentifiers=compareIdentifiers;var R$1=/^[0-9]+$/;function compareIdentifiers(e,r){var t=R$1.test(e);var n=R$1.test(r);if(t&&n){e=+e;r=+r;}return e===r?0:t&&!n?-1:n&&!t?1:e<r?-1:1}t$2.rcompareIdentifiers=rcompareIdentifiers;function rcompareIdentifiers(e,r){return compareIdentifiers(r,e)}t$2.major=major;function major(e,r){return new SemVer(e,r).major}t$2.minor=minor;function minor(e,r){return new SemVer(e,r).minor}t$2.patch=patch;function patch(e,r){return new SemVer(e,r).patch}t$2.compare=compare;function compare(e,r,t){return new SemVer(e,t).compare(new SemVer(r,t))}t$2.compareLoose=compareLoose;function compareLoose(e,r){return compare(e,r,true)}t$2.compareBuild=compareBuild;function compareBuild(e,r,t){var n=new SemVer(e,t);var o=new SemVer(r,t);return n.compare(o)||n.compareBuild(o)}t$2.rcompare=rcompare;function rcompare(e,r,t){return compare(r,e,t)}t$2.sort=sort;function sort(e,r){return e.sort((function(e,n){return t$2.compareBuild(e,n,r)}))}t$2.rsort=rsort;function rsort(e,r){return e.sort((function(e,n){return t$2.compareBuild(n,e,r)}))}t$2.gt=gt;function gt(e,r,t){return compare(e,r,t)>0}t$2.lt=lt;function lt(e,r,t){return compare(e,r,t)<0}t$2.eq=eq;function eq(e,r,t){return 0===compare(e,r,t)}t$2.neq=neq;function neq(e,r,t){return 0!==compare(e,r,t)}t$2.gte=gte;function gte(e,r,t){return compare(e,r,t)>=0}t$2.lte=lte;function lte(e,r,t){return compare(e,r,t)<=0}t$2.cmp=cmp;function cmp(e,r,t,n){switch(r){case"===":"object"===typeof e&&(e=e.version);"object"===typeof t&&(t=t.version);return e===t;case"!==":"object"===typeof e&&(e=e.version);"object"===typeof t&&(t=t.version);return e!==t;case"":case"=":case"==":return eq(e,t,n);case"!=":return neq(e,t,n);case">":return gt(e,t,n);case">=":return gte(e,t,n);case"<":return lt(e,t,n);case"<=":return lte(e,t,n);default:throw new TypeError("Invalid operator: "+r)}}t$2.Comparator=Comparator;function Comparator(e,t){t&&"object"===typeof t||(t={loose:!!t,includePrerelease:false});if(e instanceof Comparator){if(e.loose===!!t.loose)return e;e=e.value;}if(!((this||r$2)instanceof Comparator))return new Comparator(e,t);o$3("comparator",e,t);(this||r$2).options=t;(this||r$2).loose=!!t.loose;this.parse(e);(this||r$2).semver===I$1?(this||r$2).value="":(this||r$2).value=(this||r$2).operator+(this||r$2).semver.version;o$3("comp",this||r$2);}var I$1={};Comparator.prototype.parse=function(e){var t=(this||r$2).options.loose?p$1[l$1.COMPARATORLOOSE]:p$1[l$1.COMPARATOR];var n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);(this||r$2).operator=void 0!==n[1]?n[1]:"";"="===(this||r$2).operator&&((this||r$2).operator="");n[2]?(this||r$2).semver=new SemVer(n[2],(this||r$2).options.loose):(this||r$2).semver=I$1;};Comparator.prototype.toString=function(){return (this||r$2).value};Comparator.prototype.test=function(e){o$3("Comparator.test",e,(this||r$2).options.loose);if((this||r$2).semver===I$1||e===I$1)return true;if("string"===typeof e)try{e=new SemVer(e,(this||r$2).options);}catch(e){return false}return cmp(e,(this||r$2).operator,(this||r$2).semver,(this||r$2).options)};Comparator.prototype.intersects=function(e,t){if(!(e instanceof Comparator))throw new TypeError("a Comparator is required");t&&"object"===typeof t||(t={loose:!!t,includePrerelease:false});var n;if(""===(this||r$2).operator){if(""===(this||r$2).value)return true;n=new Range(e.value,t);return satisfies((this||r$2).value,n,t)}if(""===e.operator){if(""===e.value)return true;n=new Range((this||r$2).value,t);return satisfies(e.semver,n,t)}var o=(">="===(this||r$2).operator||">"===(this||r$2).operator)&&(">="===e.operator||">"===e.operator);var a=("<="===(this||r$2).operator||"<"===(this||r$2).operator)&&("<="===e.operator||"<"===e.operator);var i=(this||r$2).semver.version===e.semver.version;var s=(">="===(this||r$2).operator||"<="===(this||r$2).operator)&&(">="===e.operator||"<="===e.operator);var p=cmp((this||r$2).semver,"<",e.semver,t)&&(">="===(this||r$2).operator||">"===(this||r$2).operator)&&("<="===e.operator||"<"===e.operator);var c=cmp((this||r$2).semver,">",e.semver,t)&&("<="===(this||r$2).operator||"<"===(this||r$2).operator)&&(">="===e.operator||">"===e.operator);return o||a||i&&s||p||c};t$2.Range=Range;function Range(e,t){t&&"object"===typeof t||(t={loose:!!t,includePrerelease:false});if(e instanceof Range)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Range(e.raw,t);if(e instanceof Comparator)return new Range(e.value,t);if(!((this||r$2)instanceof Range))return new Range(e,t);(this||r$2).options=t;(this||r$2).loose=!!t.loose;(this||r$2).includePrerelease=!!t.includePrerelease;(this||r$2).raw=e;(this||r$2).set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this||r$2).filter((function(e){return e.length}));if(!(this||r$2).set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format();}Range.prototype.format=function(){(this||r$2).range=(this||r$2).set.map((function(e){return e.join(" ").trim()})).join("||").trim();return (this||r$2).range};Range.prototype.toString=function(){return (this||r$2).range};Range.prototype.parseRange=function(e){var t=(this||r$2).options.loose;e=e.trim();var n=t?p$1[l$1.HYPHENRANGELOOSE]:p$1[l$1.HYPHENRANGE];e=e.replace(n,hyphenReplace);o$3("hyphen replace",e);e=e.replace(p$1[l$1.COMPARATORTRIM],h$2);o$3("comparator trim",e,p$1[l$1.COMPARATORTRIM]);e=e.replace(p$1[l$1.TILDETRIM],u$2);e=e.replace(p$1[l$1.CARETTRIM],f$3);e=e.split(/\s+/).join(" ");var a=t?p$1[l$1.COMPARATORLOOSE]:p$1[l$1.COMPARATOR];var i=e.split(" ").map((function(e){return parseComparator(e,(this||r$2).options)}),this||r$2).join(" ").split(/\s+/);(this||r$2).options.loose&&(i=i.filter((function(e){return !!e.match(a)})));i=i.map((function(e){return new Comparator(e,(this||r$2).options)}),this||r$2);return i};Range.prototype.intersects=function(e,t){if(!(e instanceof Range))throw new TypeError("a Range is required");return (this||r$2).set.some((function(r){return isSatisfiable(r,t)&&e.set.some((function(e){return isSatisfiable(e,t)&&r.every((function(r){return e.every((function(e){return r.intersects(e,t)}))}))}))}))};function isSatisfiable(e,r){var t=true;var n=e.slice();var o=n.pop();while(t&&n.length){t=n.every((function(e){return o.intersects(e,r)}));o=n.pop();}return t}t$2.toComparators=toComparators;function toComparators(e,r){return new Range(e,r).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))}function parseComparator(e,r){o$3("comp",e,r);e=replaceCarets(e,r);o$3("caret",e);e=replaceTildes(e,r);o$3("tildes",e);e=replaceXRanges(e,r);o$3("xrange",e);e=replaceStars(e,r);o$3("stars",e);return e}function isX(e){return !e||"x"===e.toLowerCase()||"*"===e}function replaceTildes(e,r){return e.trim().split(/\s+/).map((function(e){return replaceTilde(e,r)})).join(" ")}function replaceTilde(e,r){var t=r.loose?p$1[l$1.TILDELOOSE]:p$1[l$1.TILDE];return e.replace(t,(function(r,t,n,a,i){o$3("tilde",e,r,t,n,a,i);var s;if(isX(t))s="";else if(isX(n))s=">="+t+".0.0 <"+(+t+1)+".0.0";else if(isX(a))s=">="+t+"."+n+".0 <"+t+"."+(+n+1)+".0";else if(i){o$3("replaceTilde pr",i);s=">="+t+"."+n+"."+a+"-"+i+" <"+t+"."+(+n+1)+".0";}else s=">="+t+"."+n+"."+a+" <"+t+"."+(+n+1)+".0";o$3("tilde return",s);return s}))}function replaceCarets(e,r){return e.trim().split(/\s+/).map((function(e){return replaceCaret(e,r)})).join(" ")}function replaceCaret(e,r){o$3("caret",e,r);var t=r.loose?p$1[l$1.CARETLOOSE]:p$1[l$1.CARET];return e.replace(t,(function(r,t,n,a,i){o$3("caret",e,r,t,n,a,i);var s;if(isX(t))s="";else if(isX(n))s=">="+t+".0.0 <"+(+t+1)+".0.0";else if(isX(a))s="0"===t?">="+t+"."+n+".0 <"+t+"."+(+n+1)+".0":">="+t+"."+n+".0 <"+(+t+1)+".0.0";else if(i){o$3("replaceCaret pr",i);s="0"===t?"0"===n?">="+t+"."+n+"."+a+"-"+i+" <"+t+"."+n+"."+(+a+1):">="+t+"."+n+"."+a+"-"+i+" <"+t+"."+(+n+1)+".0":">="+t+"."+n+"."+a+"-"+i+" <"+(+t+1)+".0.0";}else {o$3("no pr");s="0"===t?"0"===n?">="+t+"."+n+"."+a+" <"+t+"."+n+"."+(+a+1):">="+t+"."+n+"."+a+" <"+t+"."+(+n+1)+".0":">="+t+"."+n+"."+a+" <"+(+t+1)+".0.0";}o$3("caret return",s);return s}))}function replaceXRanges(e,r){o$3("replaceXRanges",e,r);return e.split(/\s+/).map((function(e){return replaceXRange(e,r)})).join(" ")}function replaceXRange(e,r){e=e.trim();var t=r.loose?p$1[l$1.XRANGELOOSE]:p$1[l$1.XRANGE];return e.replace(t,(function(t,n,a,i,s,p){o$3("xRange",e,t,n,a,i,s,p);var c=isX(a);var l=c||isX(i);var E=l||isX(s);var u=E;"="===n&&u&&(n="");p=r.includePrerelease?"-0":"";if(c)t=">"===n||"<"===n?"<0.0.0-0":"*";else if(n&&u){l&&(i=0);s=0;if(">"===n){n=">=";if(l){a=+a+1;i=0;s=0;}else {i=+i+1;s=0;}}else if("<="===n){n="<";l?a=+a+1:i=+i+1;}t=n+a+"."+i+"."+s+p;}else l?t=">="+a+".0.0"+p+" <"+(+a+1)+".0.0"+p:E&&(t=">="+a+"."+i+".0"+p+" <"+a+"."+(+i+1)+".0"+p);o$3("xRange return",t);return t}))}function replaceStars(e,r){o$3("replaceStars",e,r);return e.trim().replace(p$1[l$1.STAR],"")}function hyphenReplace(e,r,t,n,o,a,i,s,p,c,l,E,u){r=isX(t)?"":isX(n)?">="+t+".0.0":isX(o)?">="+t+"."+n+".0":">="+r;s=isX(p)?"":isX(c)?"<"+(+p+1)+".0.0":isX(l)?"<"+p+"."+(+c+1)+".0":E?"<="+p+"."+c+"."+l+"-"+E:"<="+s;return (r+" "+s).trim()}Range.prototype.test=function(e){if(!e)return false;if("string"===typeof e)try{e=new SemVer(e,(this||r$2).options);}catch(e){return false}for(var t=0;t<(this||r$2).set.length;t++)if(testSet((this||r$2).set[t],e,(this||r$2).options))return true;return false};function testSet(e,r,t){for(var n=0;n<e.length;n++)if(!e[n].test(r))return false;if(r.prerelease.length&&!t.includePrerelease){for(n=0;n<e.length;n++){o$3(e[n].semver);if(e[n].semver!==I$1&&e[n].semver.prerelease.length>0){var a=e[n].semver;if(a.major===r.major&&a.minor===r.minor&&a.patch===r.patch)return true}}return false}return true}t$2.satisfies=satisfies;function satisfies(e,r,t){try{r=new Range(r,t);}catch(e){return false}return r.test(e)}t$2.maxSatisfying=maxSatisfying;function maxSatisfying(e,r,t){var n=null;var o=null;try{var a=new Range(r,t);}catch(e){return null}e.forEach((function(e){if(a.test(e)&&(!n||-1===o.compare(e))){n=e;o=new SemVer(n,t);}}));return n}t$2.minSatisfying=minSatisfying;function minSatisfying(e,r,t){var n=null;var o=null;try{var a=new Range(r,t);}catch(e){return null}e.forEach((function(e){if(a.test(e)&&(!n||1===o.compare(e))){n=e;o=new SemVer(n,t);}}));return n}t$2.minVersion=minVersion;function minVersion(e,r){e=new Range(e,r);var t=new SemVer("0.0.0");if(e.test(t))return t;t=new SemVer("0.0.0-0");if(e.test(t))return t;t=null;for(var n=0;n<e.set.length;++n){var o=e.set[n];o.forEach((function(e){var r=new SemVer(e.semver.version);switch(e.operator){case">":0===r.prerelease.length?r.patch++:r.prerelease.push(0);r.raw=r.format();case"":case">=":t&&!gt(t,r)||(t=r);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));}return t&&e.test(t)?t:null}t$2.validRange=validRange;function validRange(e,r){try{return new Range(e,r).range||"*"}catch(e){return null}}t$2.ltr=ltr;function ltr(e,r,t){return outside(e,r,"<",t)}t$2.gtr=gtr;function gtr(e,r,t){return outside(e,r,">",t)}t$2.outside=outside;function outside(e,r,t,n){e=new SemVer(e,n);r=new Range(r,n);var o,a,i,s,p;switch(t){case">":o=gt;a=lte;i=lt;s=">";p=">=";break;case"<":o=lt;a=gte;i=gt;s="<";p="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(e,r,n))return false;for(var c=0;c<r.set.length;++c){var l=r.set[c];var E=null;var u=null;l.forEach((function(e){e.semver===I$1&&(e=new Comparator(">=0.0.0"));E=E||e;u=u||e;o(e.semver,E.semver,n)?E=e:i(e.semver,u.semver,n)&&(u=e);}));if(E.operator===s||E.operator===p)return false;if((!u.operator||u.operator===s)&&a(e,u.semver))return false;if(u.operator===p&&i(e,u.semver))return false}return true}t$2.prerelease=prerelease;function prerelease(e,r){var t=parse$1(e,r);return t&&t.prerelease.length?t.prerelease:null}t$2.intersects=intersects;function intersects(e,r,t){e=new Range(e,t);r=new Range(r,t);return e.intersects(r)}t$2.coerce=coerce;function coerce(e,r){if(e instanceof SemVer)return e;"number"===typeof e&&(e=String(e));if("string"!==typeof e)return null;r=r||{};var t=null;if(r.rtl){var n;while((n=p$1[l$1.COERCERTL].exec(e))&&(!t||t.index+t[0].length!==e.length)){t&&n.index+n[0].length===t.index+t[0].length||(t=n);p$1[l$1.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;}p$1[l$1.COERCERTL].lastIndex=-1;}else t=e.match(p$1[l$1.COERCE]);return null===t?null:parse$1(t[2]+"."+(t[3]||"0")+"."+(t[4]||"0"),r)}var v$1=t$2;const O$1=t$2.SEMVER_SPEC_VERSION,L$1=t$2.tokens;const N$1=t$2.re,S$1=t$2.src,T$1=t$2.parse,g$1=t$2.valid,A$1=t$2.clean,d$1=t$2.SemVer,C$1=t$2.inc,w$1=t$2.diff,y$1=t$2.compareIdentifiers,P$1=t$2.rcompareIdentifiers,D$1=t$2.major,V$1=t$2.minor,M$1=t$2.patch,X$1=t$2.compare,k$2=t$2.compareLoose,F$1=t$2.compareBuild,G$1=t$2.rcompare,j$1=t$2.sort,U$1=t$2.rsort,b$2=t$2.gt,x$1=t$2.lt,$$1=t$2.eq,B$1=t$2.neq,q$1=t$2.gte,H$1=t$2.lte,_$1=t$2.cmp,Y$1=t$2.Comparator,z$1=t$2.Range,Z$1=t$2.toComparators,J$1=t$2.satisfies,K$1=t$2.maxSatisfying,Q$1=t$2.minSatisfying,W$1=t$2.minVersion,ee=t$2.validRange,re=t$2.ltr,te=t$2.gtr,ne=t$2.outside,oe=t$2.prerelease,ae=t$2.intersects,ie=t$2.coerce;

var e$2 = /*#__PURE__*/Object.freeze({
     __proto__: null,
     'default': v$1,
     Comparator: Y$1,
     Range: z$1,
     SEMVER_SPEC_VERSION: O$1,
     SemVer: d$1,
     clean: A$1,
     cmp: _$1,
     coerce: ie,
     compare: X$1,
     compareBuild: F$1,
     compareIdentifiers: y$1,
     compareLoose: k$2,
     diff: w$1,
     eq: $$1,
     gt: b$2,
     gte: q$1,
     gtr: te,
     inc: C$1,
     intersects: ae,
     lt: x$1,
     lte: H$1,
     ltr: re,
     major: D$1,
     maxSatisfying: K$1,
     minSatisfying: Q$1,
     minVersion: W$1,
     minor: V$1,
     neq: B$1,
     outside: ne,
     parse: T$1,
     patch: M$1,
     prerelease: oe,
     rcompare: G$1,
     rcompareIdentifiers: P$1,
     re: N$1,
     rsort: U$1,
     satisfies: J$1,
     sort: j$1,
     src: S$1,
     toComparators: Z$1,
     tokens: L$1,
     valid: g$1,
     validRange: ee
});

var n$1="default"in e$2?v$1:e$2;var r$1={};const i$1=n$1;const{Semver:o$2,SemverRange:a$1}=e$4;r$1=function nodeRangeToSemverRange(e){let t=i$1.validRange(e);if(!t)return new a$1(e);if("*"===t)return new a$1(t);try{let t=new a$1(e);if(!t.version.tag)return t}catch(e){if("ENOTSEMVER"!==e.code)throw e}let n;for(let e of t.split("||")){let t,r,i,f;for(let n of e.split(" ")){let e="<"===n[0];let a=">"===n[0];if(!e&&!a){t=n;i=true;break}let l="="===n[1];if(a){if(!e){let e="="===n[1];let t=new o$2(n.substr(1+e));if(!r||r.lt(t)){r=t;f=e;}}}else {let e=new o$2(n.substr(1+l));if(!t||t.gt(e)){t=e;i=l;}}}if(!t){n=new a$1("*");continue}if(r&&t&&r.gt(t)){let e=new a$1(r.toString());n&&(n.contains(e)||!e.gt(n)&&!e.contains(n))||(n=e);continue}let l;if(t){if(i){let e=new a$1(t.toString());n&&(n.contains(e)||!e.gt(n)&&!e.contains(n))||(n=e);continue}let e=0,o=0,f=0,c="";if(t.pre&&r.major===t.major&&r.minor===t.minor&&r.patch===t.patch){n=new a$1("~"+r.toString());continue}if(0===t.patch)if(0===t.minor){if(t.major>0){e=t.major-1;c="^";}}else {e=t.major;o=t.minor-1;c="~";}else {e=t.major;o=t.minor;f=0;c="~";}l=new a$1(0===e&&"^"===c?"0":c+e+"."+o+"."+f);}if(!r){n=l;continue}let c;c=f?new a$1("^^"+r.toString()):r.pre?new a$1("^^"+r.major+"."+r.minor+"."+r.patch+"-"+[...r.pre,1].join(".")):new a$1("^^"+r.major+"."+r.minor+"."+(r.patch+1));let m=l?c.intersect(l)||l:c;n&&(n.contains(m)||!m.gt(n)&&!m.contains(n))||(n=m);}return n};var f$2=r$1;

let t$1=[];let o$1=0;function pushFetchPool(){if(++o$1>100)return new Promise((o=>t$1.push(o)))}function popFetchPool(){o$1--;t$1.length&&t$1.shift()();}async function fetch$1(t,o){const e=pushFetchPool();e&&await e;try{return await globalThis.fetch(t,o)}finally{popFetchPool();}}

var e$1;if("undefined"!==typeof Deno)new URL("file://"+Deno.cwd()+"/");else if("undefined"!==typeof process&&(null===(e$1=process.versions)||void 0===e$1?void 0:e$1.node))new URL("file://"+process.cwd()+"/");else if("undefined"!==typeof document){const e=document.querySelector("base[href]");e?new URL(e.href+(e.href.endsWith("/")?"":"/")):"undefined"!==typeof location&&new URL("../",new URL(location.href));}function matchesRoot(e,t){return e.protocol===t.protocol&&e.host===t.host&&e.port===t.port&&e.username===t.username&&e.password===t.password}function rebase(e,t=new URL("/",e),s=false){"boolean"===typeof s?s=s?"/":"./":s.endsWith("/")||(s+="/");t.search=t.hash="";t.pathname.endsWith("/")||(t.pathname+="/");const r=e.href;const i=t.href;if(r.startsWith(i))return s+r.slice(i.length);if(!matchesRoot(e,t))return e.href;const o=t.pathname;const n=e.pathname;const l=Math.min(o.length,n.length);let c=-1;for(let e=0;e<l;e++){if(o[e]!==n[e])break;"/"===n[e]&&(c=e);}return "../".repeat(o.slice(c+1).split("/").length-1)+n.slice(c+1)+e.search+e.hash}function isURL$1(e){try{if("#"===e[0])return false;new URL(e);}catch{return false}return true}function isPlain$1(e){return !isRelative$1(e)&&!isURL$1(e)}function isRelative$1(e){return e.startsWith("./")||e.startsWith("../")||e.startsWith("/")}function alphabetize(e){const t={};for(const s of Object.keys(e).sort())t[s]=e[s];return t}function replaceTarget(e,t,s){const r=e[t];if("string"===typeof r||null===r){const i=s(r);void 0!==i&&(e[t]=i);}else for(const e of Object.keys(r))replaceTarget(r,e,s);}function mapTarget(e,t){if("string"===typeof e||null===e)return t(e);const s={};for(const r of Object.keys(e))s[r]=mapTarget(e[r],t);return s}function targetEquals(e,t,s){if(null===e||null===t)return e===t;if("string"===typeof e||"string"===typeof t)return "string"===typeof e&&"string"===typeof t&&new URL(e,s).href===new URL(t,s).href;const r=Object.keys(e);const i=Object.keys(t);if(r.length!==i.length)return false;for(let o=0;o<r.length;o++){const n=r[o];const l=i[o];if(n!==l)return false;if(!targetEquals(e[n],t[l],s))return false}return true}class ImportMap{constructor(e,t){this.imports=Object.create(null);this.scopes=Object.create(null);"string"===typeof e&&(e=new URL(e));this.baseUrl=e;t&&this.extend(t,true);}clone(){return new ImportMap(this.baseUrl,this.toJSON())}extend(e,t=false){Object.assign(this.imports,e.imports);if(t)Object.assign(this.scopes,e.scopes);else if(e.scopes)for(const t of Object.keys(e.scopes))Object.assign(this.scopes[t]=this.scopes[t]||Object.create(null),e.scopes[t]);this.rebase(this.baseUrl.href);return this}sort(){this.imports=alphabetize(this.imports);this.scopes=alphabetize(this.scopes);for(const e of Object.keys(this.scopes))this.scopes[e]=alphabetize(this.scopes[e]);}set(e,t,s){if(s){this.scopes[s]=this.scopes[s]||{};this.scopes[s][e]=t;}else this.imports[e]=t;}replace(e,t){const s=e.endsWith("/");if(!isURL$1(e))throw new Error("URL remapping only supports URLs");const r=rebase(new URL(t),this.baseUrl);for(const t of Object.keys(this.imports))replaceTarget(this.imports,t,(t=>{if(null!==t)return s&&t.startsWith(e)||t===e?r+t.slice(e.length):void 0}));for(const t of Object.keys(this.scopes)){const i=this.scopes[t];const o=new URL(t,this.baseUrl).href;if(s&&o.startsWith(e)||o===e){const s=r+o.slice(e.length);delete this.scopes[t];this.scopes[s]=i;}for(const t of Object.keys(i))replaceTarget(i,t,(t=>{if(null!==t)return s&&t.startsWith(e)||t===e?r+t.slice(e.length):void 0}));}return this}combineSubpaths(){}
/**
     * Groups the import map scopes to shared URLs to reduce duplicate mappings.
     *
     * @param baseScope {String | URL}
     *
     * For two given scopes, "https://site.com/x/" and "https://site.com/y/",
     * a single scope will be constructed for "https://site.com/" including
     * their shared mappings.
     *
     * In the case where the scope is on the same origin as the baseUrl, the grouped
     * root will never backtrack below the baseUrl, unless specifying the baseScope
     * option to permit a custom backtracking base.
     *
     */flatten(e=this.baseUrl){"string"===typeof e&&(e=new URL(e.endsWith("/")?e:e+"/"));if(!e.pathname.endsWith("/")){e=new URL(e.href);e.pathname+="/";}for(const t of Object.keys(this.scopes)){const s=this.scopes[t];const r=new URL(t,this.baseUrl);let i;i=r.protocol===this.baseUrl.protocol&&r.hostname===this.baseUrl.hostname&&r.port===this.baseUrl.port?rebase(r.href.startsWith(e.href)?e:r,this.baseUrl):r.protocol+"//"+r.hostname+(r.port?":"+r.port:"")+"/";let o=this.scopes[i]||{};o===s&&(o=null);let n=true;for(const e of Object.keys(s)){const t=s[e];if(targetEquals(this.imports[e],t,this.baseUrl))delete s[e];else if(!o||o[e]&&!targetEquals(o[e],t,this.baseUrl))n=false;else {o[e]=t;replaceTarget(o,e,(e=>rebase(new URL(e,this.baseUrl),this.baseUrl)));delete s[e];this.scopes[i]=alphabetize(o);}}n&&delete this.scopes[t];}return this}rebase(e=this.baseUrl.href,t=false){const s=this.baseUrl;this.baseUrl=new URL(e,this.baseUrl);this.baseUrl.pathname.endsWith("/")||(this.baseUrl.pathname+="/");let r=false;for(const e of Object.keys(this.imports)){replaceTarget(this.imports,e,(e=>{if(null!==e)return rebase(new URL(e,s),this.baseUrl,t)}));if(!isPlain$1(e)){const i=rebase(new URL(e,s),this.baseUrl,t);if(i!==e){r=true;this.imports[i]=this.imports[e];delete this.imports[e];}}}r&&(this.imports=alphabetize(this.imports));let i=false;for(const e of Object.keys(this.scopes)){const r=this.scopes[e];let o=false;for(let e of Object.keys(r)){replaceTarget(r,e,(e=>{if(null!==e)return rebase(new URL(e,s),this.baseUrl,t)}));if(!isPlain$1(e)){const i=rebase(new URL(e,s),this.baseUrl,t);if(i!==e){o=true;r[i]=r[e];delete r[e];}}}o&&(this.scopes[e]=alphabetize(r));const n=rebase(new URL(e,s),this.baseUrl,t);if(e!==n){i=true;delete this.scopes[e];this.scopes[n]=r;}}i&&(this.scopes=alphabetize(this.scopes));return this}setEnv(e){for(const t of Object.keys(this.imports)){const s=this.imports[t];"string"!==typeof s&&null!==s&&(this.imports[t]=resolveConditional(s,e));}for(const t of Object.keys(this.scopes)){const s=this.scopes[t];for(const t of Object.keys(s)){const r=s[t];"string"!==typeof r&&null!==r&&(s[t]=resolveConditional(r,e));}}return this}resolve(e,t=this.baseUrl,s){"string"===typeof t&&(t=new URL(t));let r;if(!isPlain$1(e)){r=new URL(e,t);e=r.href;}const i=getScopeMatches(t,this.scopes,this.baseUrl);for(const[t]of i){let i=getMapMatch(e,this.scopes[t]);!i&&r&&(i=getMapMatch(e=rebase(r,this.baseUrl,true),this.scopes[t])||getMapMatch(e=rebase(r,this.baseUrl,false),this.scopes[t]));if(i){const r=s?resolveConditional(this.scopes[t][i],s):this.scopes[t][i];return mapTarget(r,(t=>null===t?null:new URL(t+e.slice(i.length),this.baseUrl).href))}}let o=getMapMatch(e,this.imports);!o&&r&&(o=getMapMatch(e=rebase(r,this.baseUrl,true),this.imports)||getMapMatch(e=rebase(r,this.baseUrl,false),this.imports));if(o){const t=s?resolveConditional(this.imports[o],s):this.imports[o];return mapTarget(t,(t=>null===t?null:new URL(t+e.slice(o.length),this.baseUrl).href))}return r?r.href:null}toJSON(){const e={};Object.keys(this.imports).length&&(e.imports=this.imports);Object.keys(this.scopes).length&&(e.scopes=this.scopes);return JSON.parse(JSON.stringify(e))}}function getScopeMatches(e,t,s){const r=e.href;let i=Object.keys(t).map((e=>[e,new URL(e,s).href]));i=i.sort((([,e],[,t])=>e.length<t.length?1:-1));return i.filter((([,e])=>e===r||e.endsWith("/")&&r.startsWith(e)))}function getMapMatch(e,t){if(e in t)return e;let s;for(const r of Object.keys(t)){const t=r.endsWith("*");(r.endsWith("/")||t)&&(e.startsWith(t?r.slice(0,-1):r)&&(!s||r.length>s.length)&&(s=r));}return s}function resolveConditional(e,t={}){if("string"===typeof e||null===e)return e;Array.isArray(t)&&(t={include:t});const{include:s=[],exclude:r=[],covers:i=[]}=t;const{resolved:o}=internalResolveConditional(e,{include:s,exclude:r,covers:i},[],[]);return void 0===o?null:o}function internalResolveConditional(e,t,s,r){if("string"===typeof e)return {exhaustive:true,resolved:e};if(null===e)return {exhaustive:true,resolved:e};let{include:i,exclude:o,covers:n}=t;let l={};let c=0;const a=[];for(const t of Object.keys(e)){if(r.includes(t))continue;if(a.includes(t))continue;const h=[t,...s];const{exhaustive:f,resolved:p}=internalResolveConditional(e[t],{include:i,exclude:o,covers:n},h,[...r,...a]);f&&a.push(t);if(void 0!==p&&!o.includes(t)){l[t]=p;c++;}if("default"===t||i.includes(t)||s.includes(t))return {exhaustive:true,resolved:1===c?l[t]:l};if(n.some((e=>e.every((e=>i.includes(e)||s.includes(e)||r.includes(e)||a.includes(e))))))return {exhaustive:true,resolved:l}}return 0===c?{exhaustive:false,resolved:void 0}:{exhaustive:false,resolved:l}}

let e,r,a,i=4194304;const s=1===new Uint8Array(new Uint16Array([1]).buffer)[0];let t,f$1,c$1;function parse(ke,le="@"){if(t=ke,f$1=le,t.length>i||!e){for(;t.length>i;)i*=2;r=new ArrayBuffer(4*i),e=function(e,r,a){"use asm";var i=new e.Int8Array(a),s=new e.Int16Array(a),t=new e.Int32Array(a),f=new e.Uint8Array(a),c=new e.Uint16Array(a),ke=816;function b(e){e=e|0;var r=0,a=0,f=0,le=0,oe=0;oe=ke;ke=ke+14336|0;le=oe;i[589]=1;s[291]=0;s[292]=0;s[293]=-1;t[15]=t[2];i[590]=0;t[14]=0;i[588]=0;t[16]=oe+10240;t[17]=oe+2048;i[591]=0;e=(t[3]|0)+-2|0;t[18]=e;r=e+(t[12]<<1)|0;t[19]=r;e:while(1){a=e+2|0;t[18]=a;if(e>>>0>=r>>>0){f=18;break}r:do{switch(s[a>>1]|0){case 9:case 10:case 11:case 12:case 13:case 32:break;case 101:{if((((s[292]|0)==0?R(a)|0:0)?B(e+4|0,120,112,111,114,116)|0:0)?(u(),(i[589]|0)==0):0){f=9;break e}else f=17;break}case 105:{if(R(a)|0?B(e+4|0,109,112,111,114,116)|0:0){k();f=17;}else f=17;break}case 59:{f=17;break}case 47:switch(s[e+4>>1]|0){case 47:{G();break r}case 42:{p(1);break r}default:{f=16;break e}}default:{f=16;break e}}}while(0);if((f|0)==17){f=0;t[15]=t[18];}e=t[18]|0;r=t[19]|0;}if((f|0)==9){e=t[18]|0;t[15]=e;f=19;}else if((f|0)==16){i[589]=0;t[18]=e;f=19;}else if((f|0)==18)if(!(i[588]|0)){e=a;f=19;}else e=0;do{if((f|0)==19){e:while(1){r=e+2|0;t[18]=r;a=r;if(e>>>0>=(t[19]|0)>>>0){f=75;break}r:do{switch(s[r>>1]|0){case 9:case 10:case 11:case 12:case 13:case 32:break;case 101:{if(((s[292]|0)==0?R(r)|0:0)?B(e+4|0,120,112,111,114,116)|0:0){u();f=74;}else f=74;break}case 105:{if(R(r)|0?B(e+4|0,109,112,111,114,116)|0:0){k();f=74;}else f=74;break}case 99:{if((R(r)|0?z(e+4|0,108,97,115,115)|0:0)?Z(s[e+12>>1]|0)|0:0){i[591]=1;f=74;}else f=74;break}case 40:{r=t[15]|0;a=t[17]|0;f=s[292]|0;s[292]=f+1<<16>>16;t[a+((f&65535)<<2)>>2]=r;f=74;break}case 41:{e=s[292]|0;if(!(e<<16>>16)){f=36;break e}f=e+-1<<16>>16;s[292]=f;e=t[11]|0;if((e|0)!=0?(t[e+20>>2]|0)==(t[(t[17]|0)+((f&65535)<<2)>>2]|0):0){r=e+4|0;if(!(t[r>>2]|0))t[r>>2]=a;t[e+12>>2]=a;t[11]=0;f=74;}else f=74;break}case 123:{f=t[15]|0;a=t[8]|0;e=f;do{if((s[f>>1]|0)==41&(a|0)!=0?(t[a+4>>2]|0)==(f|0):0){r=t[9]|0;t[8]=r;if(!r){t[4]=0;break}else {t[r+28>>2]=0;break}}}while(0);r=s[292]|0;f=r&65535;i[le+f>>0]=i[591]|0;i[591]=0;a=t[17]|0;s[292]=r+1<<16>>16;t[a+(f<<2)>>2]=e;f=74;break}case 125:{e=s[292]|0;if(!(e<<16>>16)){f=49;break e}a=e+-1<<16>>16;s[292]=a;r=s[293]|0;if(e<<16>>16!=r<<16>>16)if(r<<16>>16!=-1&(a&65535)<(r&65535)){f=53;break e}else {f=74;break r}else {a=t[16]|0;f=(s[291]|0)+-1<<16>>16;s[291]=f;s[293]=s[a+((f&65535)<<1)>>1]|0;h();f=74;break r}}case 39:{d(39);f=74;break}case 34:{d(34);f=74;break}case 47:switch(s[e+4>>1]|0){case 47:{G();break r}case 42:{p(1);break r}default:{r=t[15]|0;a=s[r>>1]|0;a:do{if(!(x(a)|0)){switch(a<<16>>16){case 41:if(L(t[(t[17]|0)+(c[292]<<2)>>2]|0)|0){f=71;break a}else {f=68;break a}case 125:break;default:{f=68;break a}}e=c[292]|0;if(!(y(t[(t[17]|0)+(e<<2)>>2]|0)|0)?(i[le+e>>0]|0)==0:0)f=68;else f=71;}else switch(a<<16>>16){case 46:if(((s[r+-2>>1]|0)+-48&65535)<10){f=68;break a}else {f=71;break a}case 43:if((s[r+-2>>1]|0)==43){f=68;break a}else {f=71;break a}case 45:if((s[r+-2>>1]|0)==45){f=68;break a}else {f=71;break a}default:{f=71;break a}}}while(0);a:do{if((f|0)==68){f=0;if(!(o(r)|0)){switch(a<<16>>16){case 0:{f=71;break a}case 47:break;default:{e=1;break a}}if(!(i[590]|0))e=1;else f=71;}else f=71;}}while(0);if((f|0)==71){I();e=0;}i[590]=e;f=74;break r}}case 96:{h();f=74;break}default:f=74;}}while(0);if((f|0)==74){f=0;t[15]=t[18];}e=t[18]|0;}if((f|0)==36){Y();e=0;break}else if((f|0)==49){Y();e=0;break}else if((f|0)==53){Y();e=0;break}else if((f|0)==75){e=(s[293]|0)==-1&(s[292]|0)==0&(i[588]|0)==0;break}}}while(0);ke=oe;return e|0}function u(){var e=0,r=0,a=0,f=0,c=0,ke=0;c=t[18]|0;ke=c+12|0;t[18]=ke;r=w(1)|0;e=t[18]|0;if(!((e|0)==(ke|0)?!(S(r)|0):0))f=3;e:do{if((f|0)==3){r:do{switch(r<<16>>16){case 100:{J(e,e+14|0);break e}case 97:{t[18]=e+10;w(1)|0;e=t[18]|0;f=6;break}case 102:{f=6;break}case 99:{if(z(e+2|0,108,97,115,115)|0?(a=e+10|0,F(s[a>>1]|0)|0):0){t[18]=a;c=w(1)|0;ke=t[18]|0;H(c)|0;J(ke,t[18]|0);t[18]=(t[18]|0)+-2;break e}e=e+4|0;t[18]=e;f=13;break}case 108:case 118:{f=13;break}case 123:{t[18]=e+2;e=w(1)|0;a=t[18]|0;while(1){if(_(e)|0){d(e);e=(t[18]|0)+2|0;t[18]=e;}else {H(e)|0;e=t[18]|0;}w(1)|0;e=g(a,e)|0;if(e<<16>>16==44){t[18]=(t[18]|0)+2;e=w(1)|0;}r=a;a=t[18]|0;if(e<<16>>16==125){f=32;break}if((a|0)==(r|0)){f=29;break}if(a>>>0>(t[19]|0)>>>0){f=31;break}}if((f|0)==29){Y();break e}else if((f|0)==31){Y();break e}else if((f|0)==32){t[18]=a+2;f=34;break r}break}case 42:{t[18]=e+2;w(1)|0;f=t[18]|0;g(f,f)|0;f=34;break}default:{}}}while(0);if((f|0)==6){t[18]=e+16;e=w(1)|0;if(e<<16>>16==42){t[18]=(t[18]|0)+2;e=w(1)|0;}ke=t[18]|0;H(e)|0;J(ke,t[18]|0);t[18]=(t[18]|0)+-2;break}else if((f|0)==13){e=e+4|0;t[18]=e;i[589]=0;r:while(1){t[18]=e+2;ke=w(1)|0;e=t[18]|0;switch((H(ke)|0)<<16>>16){case 91:case 123:{f=15;break r}default:{}}r=t[18]|0;if((r|0)==(e|0))break e;J(e,r);switch((w(1)|0)<<16>>16){case 61:{f=19;break r}case 44:break;default:{f=20;break r}}e=t[18]|0;}if((f|0)==15){t[18]=(t[18]|0)+-2;break}else if((f|0)==19){t[18]=(t[18]|0)+-2;break}else if((f|0)==20){t[18]=(t[18]|0)+-2;break}}else if((f|0)==34)r=w(1)|0;e=t[18]|0;if(r<<16>>16==102?K(e+2|0,114,111,109)|0:0){t[18]=e+8;l(c,w(1)|0);break}t[18]=e+-2;}}while(0);return}function k(){var e=0,r=0,a=0,f=0,c=0;c=t[18]|0;r=c+12|0;t[18]=r;e:do{switch((w(1)|0)<<16>>16){case 40:{r=t[17]|0;a=s[292]|0;s[292]=a+1<<16>>16;t[r+((a&65535)<<2)>>2]=c;if((s[t[15]>>1]|0)!=46){v(c,(t[18]|0)+2|0,0,c);t[11]=t[8];t[18]=(t[18]|0)+2;switch((w(1)|0)<<16>>16){case 39:{d(39);break}case 34:{d(34);break}default:{t[18]=(t[18]|0)+-2;break e}}t[18]=(t[18]|0)+2;switch((w(1)|0)<<16>>16){case 44:{c=t[18]|0;t[(t[8]|0)+4>>2]=c;t[18]=c+2;w(1)|0;c=t[18]|0;a=t[8]|0;t[a+16>>2]=c;i[a+24>>0]=1;t[18]=c+-2;break e}case 41:{s[292]=(s[292]|0)+-1<<16>>16;a=t[18]|0;c=t[8]|0;t[c+4>>2]=a;t[c+12>>2]=a;i[c+24>>0]=1;break e}default:{t[18]=(t[18]|0)+-2;break e}}}break}case 46:{t[18]=(t[18]|0)+2;if(((w(1)|0)<<16>>16==109?(e=t[18]|0,K(e+2|0,101,116,97)|0):0)?(s[t[15]>>1]|0)!=46:0)v(c,c,e+8|0,2);break}case 42:case 39:case 34:{f=16;break}case 123:{e=t[18]|0;if(s[292]|0){t[18]=e+-2;break e}while(1){if(e>>>0>=(t[19]|0)>>>0)break;e=w(1)|0;if(!(_(e)|0)){if(e<<16>>16==125){f=31;break}}else d(e);e=(t[18]|0)+2|0;t[18]=e;}if((f|0)==31)t[18]=(t[18]|0)+2;w(1)|0;e=t[18]|0;if(!(z(e,102,114,111,109)|0)){Y();break e}t[18]=e+8;e=w(1)|0;if(_(e)|0){l(c,e);break e}else {Y();break e}}default:if((t[18]|0)!=(r|0))f=16;}}while(0);do{if((f|0)==16){if(s[292]|0){t[18]=(t[18]|0)+-2;break}e=t[19]|0;r=t[18]|0;while(1){if(r>>>0>=e>>>0){f=23;break}a=s[r>>1]|0;if(_(a)|0){f=21;break}f=r+2|0;t[18]=f;r=f;}if((f|0)==21){l(c,a);break}else if((f|0)==23){Y();break}}}while(0);return}function l(e,r){e=e|0;r=r|0;var a=0,i=0;a=(t[18]|0)+2|0;switch(r<<16>>16){case 39:{d(39);i=5;break}case 34:{d(34);i=5;break}default:Y();}do{if((i|0)==5){v(e,a,t[18]|0,1);t[18]=(t[18]|0)+2;i=(w(0)|0)<<16>>16==97;r=t[18]|0;if(i?B(r+2|0,115,115,101,114,116)|0:0){t[18]=r+12;if((w(1)|0)<<16>>16!=123){t[18]=r;break}e=t[18]|0;a=e;e:while(1){t[18]=a+2;a=w(1)|0;switch(a<<16>>16){case 39:{d(39);t[18]=(t[18]|0)+2;a=w(1)|0;break}case 34:{d(34);t[18]=(t[18]|0)+2;a=w(1)|0;break}default:a=H(a)|0;}if(a<<16>>16!=58){i=16;break}t[18]=(t[18]|0)+2;switch((w(1)|0)<<16>>16){case 39:{d(39);break}case 34:{d(34);break}default:{i=20;break e}}t[18]=(t[18]|0)+2;switch((w(1)|0)<<16>>16){case 125:{i=25;break e}case 44:break;default:{i=24;break e}}t[18]=(t[18]|0)+2;if((w(1)|0)<<16>>16==125){i=25;break}a=t[18]|0;}if((i|0)==16){t[18]=r;break}else if((i|0)==20){t[18]=r;break}else if((i|0)==24){t[18]=r;break}else if((i|0)==25){i=t[8]|0;t[i+16>>2]=e;t[i+12>>2]=(t[18]|0)+2;break}}t[18]=r+-2;}}while(0);return}function o(e){e=e|0;e:do{switch(s[e>>1]|0){case 100:switch(s[e+-2>>1]|0){case 105:{e=q(e+-4|0,118,111)|0;break e}case 108:{e=P(e+-4|0,121,105,101)|0;break e}default:{e=0;break e}}case 101:{switch(s[e+-2>>1]|0){case 115:break;case 116:{e=E(e+-4|0,100,101,108,101)|0;break e}default:{e=0;break e}}switch(s[e+-4>>1]|0){case 108:{e=D(e+-6|0,101)|0;break e}case 97:{e=D(e+-6|0,99)|0;break e}default:{e=0;break e}}}case 102:{if((s[e+-2>>1]|0)==111?(s[e+-4>>1]|0)==101:0)switch(s[e+-6>>1]|0){case 99:{e=O(e+-8|0,105,110,115,116,97,110)|0;break e}case 112:{e=q(e+-8|0,116,121)|0;break e}default:{e=0;break e}}else e=0;break}case 110:{e=e+-2|0;if(D(e,105)|0)e=1;else e=$(e,114,101,116,117,114)|0;break}case 111:{e=D(e+-2|0,100)|0;break}case 114:{e=m(e+-2|0,100,101,98,117,103,103,101)|0;break}case 116:{e=E(e+-2|0,97,119,97,105)|0;break}case 119:switch(s[e+-2>>1]|0){case 101:{e=D(e+-4|0,110)|0;break e}case 111:{e=P(e+-4|0,116,104,114)|0;break e}default:{e=0;break e}}default:e=0;}}while(0);return e|0}function h(){var e=0,r=0,a=0;r=t[19]|0;a=t[18]|0;e:while(1){e=a+2|0;if(a>>>0>=r>>>0){r=8;break}switch(s[e>>1]|0){case 96:{r=9;break e}case 36:{if((s[a+4>>1]|0)==123){r=6;break e}break}case 92:{e=a+4|0;break}default:{}}a=e;}if((r|0)==6){t[18]=a+4;e=s[293]|0;r=t[16]|0;a=s[291]|0;s[291]=a+1<<16>>16;s[r+((a&65535)<<1)>>1]=e;a=(s[292]|0)+1<<16>>16;s[292]=a;s[293]=a;}else if((r|0)==8){t[18]=e;Y();}else if((r|0)==9)t[18]=e;return}function w(e){e=e|0;var r=0,a=0,i=0;a=t[18]|0;e:do{r=s[a>>1]|0;r:do{if(r<<16>>16!=47)if(e)if(Z(r)|0)break;else break e;else if(Q(r)|0)break;else break e;else switch(s[a+2>>1]|0){case 47:{G();break r}case 42:{p(e);break r}default:{r=47;break e}}}while(0);i=t[18]|0;a=i+2|0;t[18]=a;}while(i>>>0<(t[19]|0)>>>0);return r|0}function d(e){e=e|0;var r=0,a=0,i=0,f=0;f=t[19]|0;r=t[18]|0;while(1){i=r+2|0;if(r>>>0>=f>>>0){r=9;break}a=s[i>>1]|0;if(a<<16>>16==e<<16>>16){r=10;break}if(a<<16>>16==92){a=r+4|0;if((s[a>>1]|0)==13){r=r+6|0;r=(s[r>>1]|0)==10?r:a;}else r=a;}else if(ae(a)|0){r=9;break}else r=i;}if((r|0)==9){t[18]=i;Y();}else if((r|0)==10)t[18]=i;return}function v(e,r,a,s){e=e|0;r=r|0;a=a|0;s=s|0;var f=0,c=0;f=t[13]|0;t[13]=f+32;c=t[8]|0;t[((c|0)==0?16:c+28|0)>>2]=f;t[9]=c;t[8]=f;t[f+8>>2]=e;do{if(2!=(s|0))if(1==(s|0)){t[f+12>>2]=a+2;break}else {t[f+12>>2]=t[3];break}else t[f+12>>2]=a;}while(0);t[f>>2]=r;t[f+4>>2]=a;t[f+16>>2]=0;t[f+20>>2]=s;i[f+24>>0]=1==(s|0)&1;t[f+28>>2]=0;return}function A(){var e=0,r=0,a=0;a=t[19]|0;r=t[18]|0;e:while(1){e=r+2|0;if(r>>>0>=a>>>0){r=6;break}switch(s[e>>1]|0){case 13:case 10:{r=6;break e}case 93:{r=7;break e}case 92:{e=r+4|0;break}default:{}}r=e;}if((r|0)==6){t[18]=e;Y();e=0;}else if((r|0)==7){t[18]=e;e=93;}return e|0}function C(e,r,a,i,t,f,c,ke){e=e|0;r=r|0;a=a|0;i=i|0;t=t|0;f=f|0;c=c|0;ke=ke|0;if((((((s[e+12>>1]|0)==ke<<16>>16?(s[e+10>>1]|0)==c<<16>>16:0)?(s[e+8>>1]|0)==f<<16>>16:0)?(s[e+6>>1]|0)==t<<16>>16:0)?(s[e+4>>1]|0)==i<<16>>16:0)?(s[e+2>>1]|0)==a<<16>>16:0)r=(s[e>>1]|0)==r<<16>>16;else r=0;return r|0}function y(e){e=e|0;switch(s[e>>1]|0){case 62:{e=(s[e+-2>>1]|0)==61;break}case 41:case 59:{e=1;break}case 104:{e=E(e+-2|0,99,97,116,99)|0;break}case 121:{e=O(e+-2|0,102,105,110,97,108,108)|0;break}case 101:{e=P(e+-2|0,101,108,115)|0;break}default:e=0;}return e|0}function g(e,r){e=e|0;r=r|0;var a=0,i=0;a=t[18]|0;i=s[a>>1]|0;if(i<<16>>16==97){t[18]=a+4;a=w(1)|0;e=t[18]|0;if(_(a)|0){d(a);r=(t[18]|0)+2|0;t[18]=r;}else {H(a)|0;r=t[18]|0;}i=w(1)|0;a=t[18]|0;}if((a|0)!=(e|0))J(e,r);return i|0}function I(){var e=0,r=0,a=0;e:while(1){e=t[18]|0;r=e+2|0;t[18]=r;if(e>>>0>=(t[19]|0)>>>0){a=7;break}switch(s[r>>1]|0){case 13:case 10:{a=7;break e}case 47:break e;case 91:{A()|0;break}case 92:{t[18]=e+4;break}default:{}}}if((a|0)==7)Y();return}function p(e){e=e|0;var r=0,a=0,i=0,f=0,c=0;f=(t[18]|0)+2|0;t[18]=f;a=t[19]|0;while(1){r=f+2|0;if(f>>>0>=a>>>0)break;i=s[r>>1]|0;if(!e?ae(i)|0:0)break;if(i<<16>>16==42?(s[f+4>>1]|0)==47:0){c=8;break}f=r;}if((c|0)==8){t[18]=r;r=f+4|0;}t[18]=r;return}function U(e,r,a,i,t,f,c){e=e|0;r=r|0;a=a|0;i=i|0;t=t|0;f=f|0;c=c|0;if(((((s[e+10>>1]|0)==c<<16>>16?(s[e+8>>1]|0)==f<<16>>16:0)?(s[e+6>>1]|0)==t<<16>>16:0)?(s[e+4>>1]|0)==i<<16>>16:0)?(s[e+2>>1]|0)==a<<16>>16:0)r=(s[e>>1]|0)==r<<16>>16;else r=0;return r|0}function m(e,r,a,i,f,c,ke,le){e=e|0;r=r|0;a=a|0;i=i|0;f=f|0;c=c|0;ke=ke|0;le=le|0;var oe=0,we=0;we=e+-12|0;oe=t[3]|0;if(we>>>0>=oe>>>0?C(we,r,a,i,f,c,ke,le)|0:0)if((we|0)==(oe|0))oe=1;else oe=F(s[e+-14>>1]|0)|0;else oe=0;return oe|0}function S(e){e=e|0;e:do{switch(e<<16>>16){case 38:case 37:case 33:{e=1;break}default:if((e&-8)<<16>>16==40|(e+-58&65535)<6)e=1;else {switch(e<<16>>16){case 91:case 93:case 94:{e=1;break e}default:{}}e=(e+-123&65535)<4;}}}while(0);return e|0}function x(e){e=e|0;e:do{switch(e<<16>>16){case 38:case 37:case 33:break;default:if(!((e+-58&65535)<6|(e+-40&65535)<7&e<<16>>16!=41)){switch(e<<16>>16){case 91:case 94:break e;default:{}}return e<<16>>16!=125&(e+-123&65535)<4|0}}}while(0);return 1}function O(e,r,a,i,f,c,ke){e=e|0;r=r|0;a=a|0;i=i|0;f=f|0;c=c|0;ke=ke|0;var le=0,oe=0;oe=e+-10|0;le=t[3]|0;if(oe>>>0>=le>>>0?U(oe,r,a,i,f,c,ke)|0:0)if((oe|0)==(le|0))le=1;else le=F(s[e+-12>>1]|0)|0;else le=0;return le|0}function $(e,r,a,i,f,c){e=e|0;r=r|0;a=a|0;i=i|0;f=f|0;c=c|0;var ke=0,le=0;le=e+-8|0;ke=t[3]|0;if(le>>>0>=ke>>>0?B(le,r,a,i,f,c)|0:0)if((le|0)==(ke|0))ke=1;else ke=F(s[e+-10>>1]|0)|0;else ke=0;return ke|0}function j(e){e=e|0;var r=0,a=0,i=0,f=0;a=ke;ke=ke+16|0;i=a;t[i>>2]=0;t[12]=e;r=t[3]|0;f=r+(e<<1)|0;e=f+2|0;s[f>>1]=0;t[i>>2]=e;t[13]=e;t[4]=0;t[8]=0;t[6]=0;t[5]=0;t[10]=0;t[7]=0;ke=a;return r|0}function B(e,r,a,i,t,f){e=e|0;r=r|0;a=a|0;i=i|0;t=t|0;f=f|0;if((((s[e+8>>1]|0)==f<<16>>16?(s[e+6>>1]|0)==t<<16>>16:0)?(s[e+4>>1]|0)==i<<16>>16:0)?(s[e+2>>1]|0)==a<<16>>16:0)r=(s[e>>1]|0)==r<<16>>16;else r=0;return r|0}function E(e,r,a,i,f){e=e|0;r=r|0;a=a|0;i=i|0;f=f|0;var c=0,ke=0;ke=e+-6|0;c=t[3]|0;if(ke>>>0>=c>>>0?z(ke,r,a,i,f)|0:0)if((ke|0)==(c|0))c=1;else c=F(s[e+-8>>1]|0)|0;else c=0;return c|0}function P(e,r,a,i){e=e|0;r=r|0;a=a|0;i=i|0;var f=0,c=0;c=e+-4|0;f=t[3]|0;if(c>>>0>=f>>>0?K(c,r,a,i)|0:0)if((c|0)==(f|0))f=1;else f=F(s[e+-6>>1]|0)|0;else f=0;return f|0}function q(e,r,a){e=e|0;r=r|0;a=a|0;var i=0,f=0;f=e+-2|0;i=t[3]|0;if(f>>>0>=i>>>0?N(f,r,a)|0:0)if((f|0)==(i|0))i=1;else i=F(s[e+-4>>1]|0)|0;else i=0;return i|0}function z(e,r,a,i,t){e=e|0;r=r|0;a=a|0;i=i|0;t=t|0;if(((s[e+6>>1]|0)==t<<16>>16?(s[e+4>>1]|0)==i<<16>>16:0)?(s[e+2>>1]|0)==a<<16>>16:0)r=(s[e>>1]|0)==r<<16>>16;else r=0;return r|0}function D(e,r){e=e|0;r=r|0;var a=0;a=t[3]|0;if(a>>>0<=e>>>0?(s[e>>1]|0)==r<<16>>16:0)if((a|0)==(e|0))a=1;else a=F(s[e+-2>>1]|0)|0;else a=0;return a|0}function F(e){e=e|0;e:do{if((e+-9&65535)<5)e=1;else {switch(e<<16>>16){case 32:case 160:{e=1;break e}default:{}}e=e<<16>>16!=46&(S(e)|0);}}while(0);return e|0}function G(){var e=0,r=0,a=0;e=t[19]|0;a=t[18]|0;e:while(1){r=a+2|0;if(a>>>0>=e>>>0)break;switch(s[r>>1]|0){case 13:case 10:break e;default:a=r;}}t[18]=r;return}function H(e){e=e|0;while(1){if(Z(e)|0)break;if(S(e)|0)break;e=(t[18]|0)+2|0;t[18]=e;e=s[e>>1]|0;if(!(e<<16>>16)){e=0;break}}return e|0}function J(e,r){e=e|0;r=r|0;var a=0,i=0;a=t[13]|0;t[13]=a+12;i=t[10]|0;t[((i|0)==0?20:i+8|0)>>2]=a;t[10]=a;t[a>>2]=e;t[a+4>>2]=r;t[a+8>>2]=0;return}function K(e,r,a,i){e=e|0;r=r|0;a=a|0;i=i|0;if((s[e+4>>1]|0)==i<<16>>16?(s[e+2>>1]|0)==a<<16>>16:0)r=(s[e>>1]|0)==r<<16>>16;else r=0;return r|0}function L(e){e=e|0;if(!($(e,119,104,105,108,101)|0)?!(P(e,102,111,114)|0):0)e=q(e,105,102)|0;else e=1;return e|0}function M(){var e=0;e=t[(t[6]|0)+20>>2]|0;switch(e|0){case 1:{e=-1;break}case 2:{e=-2;break}default:e=e-(t[3]|0)>>1;}return e|0}function N(e,r,a){e=e|0;r=r|0;a=a|0;if((s[e+2>>1]|0)==a<<16>>16)r=(s[e>>1]|0)==r<<16>>16;else r=0;return r|0}function Q(e){e=e|0;switch(e<<16>>16){case 160:case 32:case 12:case 11:case 9:{e=1;break}default:e=0;}return e|0}function R(e){e=e|0;if((t[3]|0)==(e|0))e=1;else e=F(s[e+-2>>1]|0)|0;return e|0}function T(){var e=0;e=t[(t[6]|0)+16>>2]|0;if(!e)e=-1;else e=e-(t[3]|0)>>1;return e|0}function V(){var e=0;e=t[6]|0;e=t[((e|0)==0?16:e+28|0)>>2]|0;t[6]=e;return (e|0)!=0|0}function W(){var e=0;e=t[7]|0;e=t[((e|0)==0?20:e+8|0)>>2]|0;t[7]=e;return (e|0)!=0|0}function X(e){e=e|0;var r=0;r=ke;ke=ke+e|0;ke=ke+15&-16;return r|0}function Y(){i[588]=1;t[14]=(t[18]|0)-(t[3]|0)>>1;t[18]=(t[19]|0)+2;return}function Z(e){e=e|0;return (e|128)<<16>>16==160|(e+-9&65535)<5|0}function _(e){e=e|0;return e<<16>>16==39|e<<16>>16==34|0}function ee(){return (t[(t[6]|0)+12>>2]|0)-(t[3]|0)>>1|0}function re(){return (t[(t[6]|0)+8>>2]|0)-(t[3]|0)>>1|0}function ae(e){e=e|0;return e<<16>>16==13|e<<16>>16==10|0}function ie(){return (t[(t[6]|0)+4>>2]|0)-(t[3]|0)>>1|0}function se(){return (t[(t[7]|0)+4>>2]|0)-(t[3]|0)>>1|0}function te(){return (t[t[6]>>2]|0)-(t[3]|0)>>1|0}function fe(){return (t[t[7]>>2]|0)-(t[3]|0)>>1|0}function ce(){return f[(t[6]|0)+24>>0]|0|0}function ne(e){e=e|0;t[3]=e;return}function be(){return (i[589]|0)!=0|0}function ue(){return t[14]|0}return {ai:T,e:ue,ee:se,es:fe,f:be,id:M,ie:ie,ip:ce,is:te,p:b,re:W,ri:V,sa:j,se:ee,ses:ne,ss:re,sta:X}}({Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},{},r),a=e.sta(2*i);}const oe=t.length+1;e.ses(a),e.sa(oe-1),(s?b$1:n)(t,new Uint16Array(r,a,oe)),e.p()||(c$1=e.e(),h$1());const we=[],he=[];for(;e.ri();){const r=e.is(),a=e.ie(),i=e.ai(),s=e.id(),f=e.ss(),c=e.se();let ke;e.ip()&&(ke=u$1(-1===s?r:r+1,t.charCodeAt(-1===s?r-1:r))),we.push({n:ke,s:r,e:a,ss:f,se:c,d:s,a:i});}for(;e.re();){const r=e.es(),a=t.charCodeAt(r);he.push(34===a||39===a?u$1(r+1,a):t.slice(e.es(),e.ee()));}return [we,he,!!e.f()]}function n(e,r){const a=e.length;let i=0;for(;i<a;){const a=e.charCodeAt(i);r[i++]=(255&a)<<8|a>>>8;}}function b$1(e,r){const a=e.length;let i=0;for(;i<a;)r[i]=e.charCodeAt(i++);}function u$1(e,r){c$1=e;let a="",i=c$1;for(;;){c$1>=t.length&&h$1();const e=t.charCodeAt(c$1);if(e===r)break;92===e?(a+=t.slice(i,c$1),a+=k$1(),i=c$1):(8232===e||8233===e||o(e)&&h$1(),++c$1);}return a+=t.slice(i,c$1++),a}function k$1(){let e=t.charCodeAt(++c$1);switch(++c$1,e){case 110:return "\n";case 114:return "\r";case 120:return String.fromCharCode(l(2));case 117:return function(){let e;123===t.charCodeAt(c$1)?(++c$1,e=l(t.indexOf("}",c$1)-c$1),++c$1,e>1114111&&h$1()):e=l(4);return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}();case 116:return "\t";case 98:return "\b";case 118:return "\v";case 102:return "\f";case 13:10===t.charCodeAt(c$1)&&++c$1;case 10:return "";case 56:case 57:h$1();default:if(e>=48&&e<=55){let r=t.substr(c$1-1,3).match(/^[0-7]+/)[0],a=parseInt(r,8);return a>255&&(r=r.slice(0,-1),a=parseInt(r,8)),c$1+=r.length-1,e=t.charCodeAt(c$1),"0"===r&&56!==e&&57!==e||h$1(),String.fromCharCode(a)}return o(e)?"":String.fromCharCode(e)}}function l(e){const r=c$1;let a=0,i=0;for(let r=0;r<e;++r,++c$1){let e,s=t.charCodeAt(c$1);if(95!==s){if(s>=97)e=s-97+10;else if(s>=65)e=s-65+10;else {if(!(s>=48&&s<=57))break;e=s-48;}if(e>=16)break;i=s,a=16*a+e;}else 95!==i&&0!==r||h$1(),i=s;}return 95!==i&&c$1-r===e||h$1(),a}function o(e){return 13===e||10===e}function h$1(){throw Object.assign(new Error(`Parse error ${f$1}:${t.slice(0,c$1).split("\n").length}:${c$1-t.lastIndexOf("\n",c$1-1)}`),{idx:c$1})}

let c;if("undefined"!==typeof Deno){const t=Deno.cwd();c=new URL("file://"+("/"===t[0]?"":"/")+t+"/");}else if("undefined"!==typeof process&&process.versions.node)c=new URL("file://"+process.cwd()+"/");else if("undefined"!==typeof document){const t=document.querySelector("base[href]");t?c=new URL(t.href+(t.href.endsWith("/")?"":"/")):"undefined"!==typeof location&&(c=new URL("../",new URL(location.href)));}function importedFrom(t){return t?` imported from ${t}`:""}function isURL(t){try{if("#"===t[0])return false;new URL(t);}catch{return false}return true}function isPlain(t){return !isRelative(t)&&!isURL(t)}function isRelative(t){return t.startsWith("./")||t.startsWith("../")||t.startsWith("/")}class JspmError extends Error{constructor(t,e){super(t);this.jspmError=true;this.code=e;}}function throwInternalError(...t){throw new Error("Internal Error"+(t.length?" "+t.join(", "):""))}const{SemverRange:h}=e$4;const f=["https","http","data","file","ipfs"];async function parseUrlTarget(t,e,s){var r;const i=e.indexOf(":");if(isRelative(e)||-1!==i&&f.includes(e.slice(0,i))){const i=e.indexOf("|");let n;if(-1===i)n=".";else {n=`./${e.slice(i+1)}`;e=e.slice(0,i);}const a=new URL(e+(e.endsWith("/")?"":"/"),s||c);const o=await t.getPackageBase(a.href);const l=(null===(r=o?await t.getPackageConfig(o):null)||void 0===r?void 0:r.name)||a.pathname.split("/").slice(0,-1).pop();if(!l)throw new JspmError(`Unable to determine an alias for target package ${a.href}`);return {alias:l,target:a,subpath:n}}}async function toPackageTarget(t,e,s){const r=await parseUrlTarget(t,e,s);if(r)return r;const i=e.indexOf(":");const n=e.indexOf("@");if(-1!==e.indexOf(":")&&-1!==n&&n<i)throw new Error("Package aliases not yet supported. PRs welcome.");const a=parsePkg(e);if(!a)throw new JspmError(`Invalid package name ${e}`);let o=a.pkgName;const l=a.pkgName.indexOf("@",1);o=-1!==l?a.pkgName.slice(i+1,l):a.pkgName.slice(i+1);return {alias:o,target:newPackageTarget(a.pkgName,s),subpath:a.subpath}}function newPackageTarget(t,e,r){let i,n,a;const o=t.indexOf(":");if(t.startsWith("./")||t.startsWith("../")||t.startsWith("/")||1===o)return new URL(t,e);i=o<1?"npm":t.substr(0,o);if("file"===i)return new URL(t.slice(i.length+1),e);if("https"===i||"http"===i)return new URL(t);const l=t.lastIndexOf("@");if(l>o+1){n=t.slice(o+1,l);const e=t.slice(l+1);a=r||h.isValid(e)?[new h(e)]:e.split("||").map((t=>f$2(t)));}else if(-1===o&&r){n=r;a=h.isValid(t)?[new h(t)]:t.split("||").map((t=>f$2(t)));}else {n=t.slice(o+1);a=[new h("*")];}-1===o&&-1!==n.indexOf("/")&&"@"!==n[0]&&(i="github");const c=n.split("/").length;if(c>2||1===c&&"@"===n[0])throw new JspmError(`Invalid package target ${t}`);return {registry:i,name:n,ranges:a}}function pkgToStr(t){return `${t.registry?t.registry+":":""}${t.name}${t.version?"@"+t.version:""}`}function parsePkg(t){let e=t.indexOf("/");if("@"===t[0]){if(-1===e)return;e=t.indexOf("/",e+1);}return -1===e?{pkgName:t,subpath:"."}:{pkgName:t.slice(0,e),subpath:"."+t.slice(e)}}const u=new Set(["_http_agent","_http_client","_http_common","_http_incoming","_http_outgoing","_http_server","_stream_duplex","_stream_passthrough","_stream_readable","_stream_transform","_stream_wrap","_stream_writable","_tls_common","_tls_wrap","assert","assert/strict","async_hooks","buffer","child_process","cluster","console","constants","crypto","dgram","diagnostics_channel","dns","dns/promises","domain","events","fs","fs/promises","http","http2","https","inspector","module","net","os","path","path/posix","path/win32","perf_hooks","process","punycode","querystring","readline","repl","stream","stream/promises","string_decoder","sys","timers","timers/promises","tls","trace_events","tty","url","util","util/types","v8","vm","wasi","worker_threads","zlib"]);function pkgToUrl$5(t){if("node"!==t.registry)throw new Error("Node a Node.js URL");return "node:"+t.name}function parseUrlPkg$5(t){if(t.startsWith("node:"))return {registry:"node",name:t.slice(5),version:""}}async function getPackageConfig$1(){return null}async function resolveLatestTarget$2(){throw new Error("No version resolution is provided for node:_ builtins")}var p=Object.freeze({__proto__:null,nodeBuiltinSet:u,pkgToUrl:pkgToUrl$5,parseUrlPkg:parseUrlPkg$5,getPackageConfig:getPackageConfig$1,resolveLatestTarget:resolveLatestTarget$2});const d="https://ga.jspm.io/";const g="https://ga.system.jspm.io/";const m="https://api.jspm.io/";const w=3e5;const v=5e3;function pkgToUrl$4(t,e){return ("system"===e?g:d)+pkgToStr(t)+"/"}const y=/^(([a-z]+):)?((?:@[^/\\%@]+\/)?[^./\\%@][^/\\%@]*)@([^\/]+)(\/.*)?$/;function parseUrlPkg$4(t){let e;if(t.startsWith(d))e="default";else {if(!t.startsWith(g))return;e="system";}const[,,s,r,i]=t.slice(("default"===e?d:g).length).match(y)||[];return {pkg:{registry:s,name:r,version:i},layer:e}}let U={};function clearResolveCache(){U={};}async function checkBuildOrError(t,e){const s=pkgToStr(t);const i=await fetch$1(`${d}${s}/package.json`,e);if(i.ok)return true;const n=await fetch$1(`${d}${s}/_error.log`,e);if(n.ok){const e=await n.text();throw new JspmError(`Resolved dependency ${s} with error:\n\n${e}\nPlease post an issue at jspm/project on GitHub, or by following the link below:\n\nhttps://github.com/jspm/project/issues/new?title=CDN%20build%20error%20for%20${encodeURIComponent(t.name+"@"+t.version)}&body=_Reporting%20CDN%20Build%20Error._%0A%0A%3C!--%20%20No%20further%20description%20necessary,%20just%20click%20%22Submit%20new%20issue%22%20--%3E`)}return false}async function ensureBuild(t,e){const s=pkgToStr(t);if(await checkBuildOrError(t,e))return;const i=await fetch$1(`${m}/build/${t.name}@${t.version}`);if(!i.ok&&403!==i.status){const t=(await i.json()).error;throw new JspmError(`Unable to request the JSPM API for a build of ${s}, with error: ${t}.`)}let n=Date.now();while(true){await new Promise((t=>setTimeout(t,v)));if(await checkBuildOrError(t,e))return;if(Date.now()-n>=w)throw new JspmError(`Timed out waiting for the build of ${s} to be ready on the JSPM CDN. Try again later, or post a JSPM project issue if the issue persists.`)}}async function resolveLatestTarget$1(t,e,s,r){const{registry:i,name:n,range:a}=t;if(a.isExact&&!a.version.tag){const t={registry:i,name:n,version:a.version.toString()};await ensureBuild(t,this.fetchOpts);return t}const o=U[t.registry+":"+t.name]=U[t.registry+":"+t.name]||{latest:null,majors:Object.create(null),minors:Object.create(null),tags:Object.create(null)};if(a.isWildcard){let s=await(o.latest||(o.latest=lookupRange.call(this,i,n,"",e,r)));s instanceof Promise&&(s=await s);if(s){s instanceof Promise&&throwInternalError();this.log("resolve",`${t.registry}:${t.name}@${a} -> WILDCARD ${s.version}${r?" ["+r+"]":""}`);await ensureBuild(s,this.fetchOpts);return s}}else if(a.isExact&&a.version.tag){const s=a.version.tag;let l=await(o.tags[s]||(o.tags[s]=lookupRange.call(this,i,n,s,e,r)));l instanceof Promise&&(l=await l);if(l){l instanceof Promise&&throwInternalError();this.log("resolve",`${t.registry}:${t.name}@${a} -> TAG ${s}${r?" ["+r+"]":""}`);await ensureBuild(l,this.fetchOpts);return l}}else if(a.isMajor){const s=a.version.major;let l=await(o.majors[s]||(o.majors[s]=lookupRange.call(this,i,n,s,e,r)));l instanceof Promise&&(l=await l);if(l){l instanceof Promise&&throwInternalError();this.log("resolve",`${t.registry}:${t.name}@${a} -> MAJOR ${l.version}${r?" ["+r+"]":""}`);await ensureBuild(l,this.fetchOpts);return l}}else if(a.isStable){const s=`${a.version.major}.${a.version.minor}`;let l=await(o.minors[s]||(o.minors[s]=lookupRange.call(this,i,n,s,e,r)));l instanceof Promise&&(l=await l);if(l){l instanceof Promise&&throwInternalError();this.log("resolve",`${t.registry}:${t.name}@${a} -> MINOR ${l.version}${r?" ["+r+"]":""}`);await ensureBuild(l,this.fetchOpts);return l}}return null}function pkgToLookupUrl(t,e=false){return `${d}${t.registry}:${t.name}${t.version?"@"+t.version:e?"@":""}`}async function lookupRange(t,e,s,i,n){const a=await fetch$1(pkgToLookupUrl({registry:t,name:e,version:s},i),this.fetchOpts);switch(a.status){case 304:case 200:return {registry:t,name:e,version:(await a.text()).trim()};case 404:return null;default:throw new JspmError(`Invalid status code ${a.status} looking up "${t}:${e}" - ${a.statusText}${importedFrom(n)}`)}}var k=Object.freeze({__proto__:null,pkgToUrl:pkgToUrl$4,parseUrlPkg:parseUrlPkg$4,clearResolveCache:clearResolveCache,resolveLatestTarget:resolveLatestTarget$1});const{Semver:b,SemverRange:$}=e$4;function addInstalledRange(t,e,s,r){const i=getInstalledRanges(t,r);for(const t of i)if(t.name===e&&t.pkgUrl===s)return;i.push({name:e,pkgUrl:s,target:r});}function getInstalledRanges(t,e){return t[e.registry+":"+e.name]=t[e.registry+":"+e.name]||[]}function pruneResolutions(t,e){const s={};for(const[r,i]of e){const e=t[i][r];s[i]=s[i]||{};s[i][r]=e;}return s}function getResolution(t,e,s){s.endsWith("/")||throwInternalError(s);t[s]=t[s]||{};return t[s][e]}function stringResolution(t,e){t.endsWith("/")||throwInternalError(t);return e?t.slice(0,-1)+"|"+e:t}function setResolution(t,e,s,r,i){s.endsWith("/")||throwInternalError(s);t[s]=t[s]||{};const n=stringResolution(r,i);if(t[s][e]===n)return false;t[s][e]=n;return true}class Installer{constructor(t,e,s,r){this.installedRanges={};this.installing=false;this.newInstalls=false;this.currentInstall=Promise.resolve();this.added=new Map;this.hasLock=false;this.defaultProvider={provider:"jspm",layer:"default"};this.log=s;this.resolver=r;this.resolutions=e.resolutions||{};this.installBaseUrl=t.href;this.opts=e;let i={};e.lock&&({resolutions:i,exists:this.hasLock}=e.lock);e.defaultProvider&&(this.defaultProvider={provider:e.defaultProvider.split(".")[0],layer:e.defaultProvider.split(".")[1]||"default"});this.providers=e.providers||{};this.installs=i;if(e.stdlib)if(isURL(e.stdlib)||"."===e.stdlib[0]){this.stdlibTarget=new URL(e.stdlib,t);this.stdlibTarget.href.endsWith("/")&&(this.stdlibTarget.pathname=this.stdlibTarget.pathname.slice(0,-1));}else this.stdlibTarget=newPackageTarget(e.stdlib,this.installBaseUrl);}async startInstall(){if(this.installing)return this.currentInstall.then((()=>this.startInstall()));let t;this.installing=true;this.newInstalls=false;this.added=new Map;this.currentInstall=new Promise((e=>{t=async t=>{if(!t){this.installing=false;e();return false}this.installing=false;e();return {pjsonChanged:false,lock:this.installs}};}));return t}async lockInstall(t,e=this.installBaseUrl,s=true){const r=new Set;const visitInstall=async(t,e)=>{if(r.has(t+"##"+e))return;r.add(t+"##"+e);const s=await this.install(t,e);const i=s.split("|")[0]+(-1===s.indexOf("|")?"":"/");const n=await this.resolver.getDepList(i);const a=Object.keys(this.installs[i]||{});await Promise.all([...new Set([...n,...a])].map((t=>visitInstall(t,i))));};await Promise.all(t.map((t=>visitInstall(t,e))));if(s){const t=[...r].map((t=>{const[e,s]=t.split("##");return [e,s]}));this.installs=pruneResolutions(this.installs,t);}}replace(t,e,s){let r;if(t instanceof URL)r=t.href;else {const i=this.getBestMatch(t);if(!i){if(this.installs[e])return false;throw new Error("No installation found to replace.")}r=this.resolver.pkgToUrl(i,s);}let i=false;for(const t of Object.keys(this.installs)){for(const s of Object.keys(this.installs[t]))if(this.installs[t][s]===r){this.installs[t][s]=e;i=true;}if(t===r){this.installs[e]=this.installs[t];delete this.installs[t];i=true;}}return i}async installTarget(t,e,s,r,i,n){if(this.opts.freeze)throw new JspmError(`"${t}" is not installed in the jspm lockfile, imported from ${n}.`,"ERR_NOT_INSTALLED");r&&(s===this.installBaseUrl&&s.startsWith("file:")?this.added.set(t,e):this.log("info",`Package ${t} not declared in package.json dependencies${importedFrom(n)}.`));if(e instanceof URL){this.log("install",`${t} ${s} -> ${e.href}`);const r=e.href+(e.href.endsWith("/")?"":"/");this.newInstalls=setResolution(this.installs,t,s,r,i);return stringResolution(r,i)}let a=this.defaultProvider;for(const t of Object.keys(this.providers))if(e.name.startsWith(t)&&(e.name.length===t.length||"/"===e.name[t.length])){a={provider:this.providers[t],layer:"default"};const e=a.provider.indexOf(".");if(-1!==e){a.layer=a.provider.slice(e+1);a.provider=a.provider.slice(0,e);}break}if(this.opts.freeze){const r=this.getBestMatch(e);if(r){this.log("install",`${t} ${s} -> ${r.registry}:${r.name}@${r.version}`);const n=this.resolver.pkgToUrl(r,a);this.newInstalls=setResolution(this.installs,t,s,n,i);addInstalledRange(this.installedRanges,t,s,e);return stringResolution(n,i)}}const o=await this.resolver.resolveLatestTarget(e,false,a,n);const l=getInstalledRanges(this.installedRanges,e);const c=this.tryUpgradePackagesTo(o,e,l,a);if(c&&!this.opts.latest){c instanceof URL?this.log("install",`${t} ${s} -> ${c.href}`):this.log("install",`${t} ${s} -> ${c.registry}:${c.name}@${c.version}`);const r=c instanceof URL?c.href:this.resolver.pkgToUrl(c,a);this.newInstalls=setResolution(this.installs,t,s,r,i);addInstalledRange(this.installedRanges,t,s,e);return stringResolution(r,i)}this.log("install",`${t} ${s} -> ${o.registry}:${o.name}@${o.version}`);const h=this.resolver.pkgToUrl(o,a);this.newInstalls=setResolution(this.installs,t,s,h,i);addInstalledRange(this.installedRanges,t,s,e);return stringResolution(h,i)}async install(t,e,s=true,r=this.installBaseUrl){var i,n,a,o,l,c;this.installing||throwInternalError("Not installing");if(!this.opts.reset){const s=null===(i=this.installs[e])||void 0===i?void 0:i[t];if(s&&!this.opts.reset)return s}if(this.resolutions[t])return this.installTarget(t,newPackageTarget(this.resolutions[t],this.opts.baseUrl.href,t),e,false,null,r);const h=await this.resolver.getPackageConfig(e)||{};if(s&&u.has(t))return this.installTarget(t,this.stdlibTarget,e,false,"nodelibs/"+t,r);const f=(null===(n=h.dependencies)||void 0===n?void 0:n[t])||(null===(a=h.peerDependencies)||void 0===a?void 0:a[t])||(null===(o=h.optionalDependencies)||void 0===o?void 0:o[t])||e===this.installBaseUrl&&(null===(l=h.devDependencies)||void 0===l?void 0:l[t]);if(f){const s=newPackageTarget(f,e,t);return this.installTarget(t,s,e,false,null,r)}if(null===(c=this.installs[this.installBaseUrl])||void 0===c?void 0:c[t])return this.installs[this.installBaseUrl][t];const p=newPackageTarget("*",e,t);const d=await this.installTarget(t,p,e,true,null,r);return d}getBestMatch(t){let e=null;for(const s of Object.keys(this.installs)){const r=this.resolver.parseUrlPkg(s);r&&this.inRange(r.pkg,t)&&(e=e?-1===b.compare(new b(e.version),r.pkg.version)?r.pkg:e:r.pkg);}return e}inRange(t,e){return t.registry===e.registry&&t.name===e.name&&e.ranges.some((e=>e.has(t.version,true)))}tryUpgradePackagesTo(t,e,s,r){if(this.opts.freeze)return;const i=new b(t.version);let n=true;for(const{target:t}of s)t.ranges.every((t=>!t.has(i)))&&(n=false);if(n)for(const{name:e,pkgUrl:i}of s){const[s,n]=getResolution(this.installs,e,i).split("|");const a=parseUrlPkg$4(s);if(a){const{pkg:{version:a}}=parseUrlPkg$4(s);a!==t.version&&(this.newInstalls=setResolution(this.installs,e,i,this.resolver.pkgToUrl(t,r),n));}else this.newInstalls=setResolution(this.installs,e,i,s,n);}else for(const{name:r,pkgUrl:i}of s){const s=getResolution(this.installs,r,i).split("|")[0];const n=parseUrlPkg$4(s);if(!n)return new URL(s.endsWith("/")?s:s+"/");{const{pkg:{version:r}}=parseUrlPkg$4(s);if(e.ranges.some((t=>t.has(r))))return {registry:t.registry,name:t.name,version:r}}}}}const R="https://cdn.skypack.dev/";function pkgToUrl$3(t){return R+t.name+"@"+t.version+"/"}const P=/^((?:@[^/\\%@]+\/)?[^./\\%@][^/\\%@]*)@([^\/]+)(\/.*)?$/;function parseUrlPkg$3(t){if(!t.startsWith(R))return;const[,e,s]=t.slice(R.length).match(P)||[];return {registry:"npm",name:e,version:s}}var L=Object.freeze({__proto__:null,pkgToUrl:pkgToUrl$3,parseUrlPkg:parseUrlPkg$3,resolveLatestTarget:resolveLatestTarget$1});const T="https://cdn.jsdelivr.net/";function pkgToUrl$2(t){return T+t.registry+"/"+t.name+"@"+t.version+"/"}const j=/^([^\/]+)\/((?:@[^/\\%@]+\/)?[^./\\%@][^/\\%@]*)@([^\/]+)(\/.*)?$/;function parseUrlPkg$2(t){if(!t.startsWith(T))return;const[,e,s,r]=t.slice(T.length).match(j)||[];return {registry:e,name:s,version:r}}var E=Object.freeze({__proto__:null,pkgToUrl:pkgToUrl$2,parseUrlPkg:parseUrlPkg$2,resolveLatestTarget:resolveLatestTarget$1});const x="https://unpkg.com/";function pkgToUrl$1(t){return x+t.name+"@"+t.version+"/"}const S=/^((?:@[^/\\%@]+\/)?[^./\\%@][^/\\%@]*)@([^\/]+)(\/.*)?$/;function parseUrlPkg$1(t){if(!t.startsWith(x))return;const[,e,s]=t.slice(x.length).match(S)||[];return {registry:"npm",name:e,version:s}}var O=Object.freeze({__proto__:null,pkgToUrl:pkgToUrl$1,parseUrlPkg:parseUrlPkg$1,resolveLatestTarget:resolveLatestTarget$1});function pkgToUrl(t){return new URL(t.version+t.name+"/").href}function parseUrlPkg(t){const e=t.lastIndexOf("/node_modules/");if(-1===e)return;const s=t.slice(0,e+14);const r=t.slice(e+14).split("/");const i="@"===r[0][0]?r[0]+"/"+r[1]:r[0];return {registry:"node_modules",name:i,version:s}}async function dirExists(t,e){const s=await fetch$1(t,this.fetchOpts);switch(s.status){case 304:case 200:return true;case 404:return false;default:throw new JspmError(`Invalid status code ${s.status} looking up "${t}" - ${s.statusText}${importedFrom(e)}`)}}async function resolveLatestTarget(t,e,s,r){let i=new URL(`node_modules/${t.name}`,r);const n=new URL(`/node_modules/${t.name}`,r).href;while(!await dirExists.call(this,i)){if(i.href===n)return null;i=new URL(`../../${-1===t.name.indexOf("/")?"":"../"}node_modules/${t.name}`,i);}return {registry:"node_modules",name:t.name,version:i.href.slice(0,-t.name.length)}}var I=Object.freeze({__proto__:null,pkgToUrl:pkgToUrl,parseUrlPkg:parseUrlPkg,resolveLatestTarget:resolveLatestTarget});const D={jsdelivr:E,jspm:k,node:p,nodemodules:I,skypack:L,unpkg:O};function getProvider(t,e=D){const s=e[t];if(s)return s;throw new Error("No "+t+" provider is defined.")}let _,M;const C=globalThis.console;const W={log(){},warn(){},memory(){},assert(){},clear(){},count(){},countReset(){},debug(){},dir(){},dirxml(){},error(){},exception(){},group(){},groupCollapsed(){},groupEnd(){},info(){},table(){},time(){},timeEnd(){},timeLog(){},timeStamp(){},trace(){}};async function createTsAnalysis(t,e){_||([{default:_},{default:{default:M}}]=await Promise.all([import('./dev.index-6dd57f07.js').then(function (n) { return n.b; }),import('./index-0489c92b.js')]));const s=new Set;const r=new Set;let i=false;globalThis.console=W;try{_.transform(t,{filename:"/"+e,ast:false,sourceMaps:false,inputSourceMap:false,babelrc:false,babelrcRoots:false,configFile:false,highlightCode:false,compact:false,sourceType:"module",parserOpts:{plugins:["jsx"],errorRecovery:true},presets:[[M,{onlyRemoveTypeImports:true}]],plugins:[({types:t})=>({visitor:{ExportAllDeclaration(t){s.add(t.node.source.value);},ExportNamedDeclaration(t){t.node.source&&s.add(t.node.source.value);},ImportDeclaration(t){s.add(t.node.source.value);},Import(t){r.add(buildDynamicString$1(t.parentPath.get("arguments.0").node,e,true));},MetaProperty(e){t.isIdentifier(e.node.meta,{name:"import"})&&t.isIdentifier(e.node.property,{name:"meta"})&&(i=true);}}})]});}finally{globalThis.console=C;}return {deps:[...s],dynamicDeps:[...r],cjsLazyDeps:null,size:t.length,format:"typescript"}}function buildDynamicString$1(t,e,s=false,r=false){if("StringLiteral"===t.type)return t.value;if("TemplateLiteral"===t.type){let i="";for(let n=0;n<t.quasis.length;n++){const a=t.quasis[n].value.cooked;if(a.length){i+=a;r=false;}const o=t.expressions[n];if(o){const t=buildDynamicString$1(o,e,s,r);if(t.length){r=t.endsWith("*");i+=t;}}}return i}if("BinaryExpression"===t.type&&"+"===t.operator){const i=buildDynamicString$1(t.left,e,s,r);i.length&&(r=i.endsWith("*"));const n=buildDynamicString$1(t.right,e,s,r);return i+n}if(s&&"Identifier"===t.type){if("__dirname"===t.name)return ".";if("__filename"===t.name)return "./"+e}return r?"":"*"}let A;async function createCjsAnalysis(t,e,s){A||({default:A}=await import('./dev.index-6dd57f07.js').then(function (n) { return n.b; }));const r=new Set;const i=new Set;A.transform(e,{ast:false,sourceMaps:false,inputSourceMap:false,babelrc:false,babelrcRoots:false,configFile:false,highlightCode:false,compact:false,sourceType:"script",parserOpts:{allowReturnOutsideFunction:true,errorRecovery:true},plugins:[({types:t})=>({visitor:{Program(t,e){e.functionDepth=0;},CallExpression(e,n){if(t.isIdentifier(e.node.callee,{name:"require"})||t.isIdentifier(e.node.callee.object,{name:"require"})&&t.isIdentifier(e.node.callee.property,{name:"resolve"})||t.isMemberExpression(e.node.callee)&&t.isIdentifier(e.node.callee.object,{name:"module"})&&t.isIdentifier(e.node.callee.property,{name:"require"})){const t=buildDynamicString(e.get("arguments.0").node,s);r.add(t);n.functionDepth>0&&i.add(t);}},Scope:{enter(e,s){t.isFunction(e.scope.block)&&s.functionDepth++;},exit(e,s){t.isFunction(e.scope.block)&&s.functionDepth--;}}}})]});return {deps:[...r],dynamicDeps:t.filter((t=>t.n)).map((t=>t.n)),cjsLazyDeps:[...i],size:e.length,format:"commonjs"}}function buildDynamicString(t,e,s=false,r=false){if("StringLiteral"===t.type)return t.value;if("TemplateLiteral"===t.type){let i="";for(let n=0;n<t.quasis.length;n++){const a=t.quasis[n].value.cooked;if(a.length){i+=a;r=false;}const o=t.expressions[n];if(o){const t=buildDynamicString(o,e,s,r);if(t.length){r=t.endsWith("*");i+=t;}}}return i}if("BinaryExpression"===t.type&&"+"===t.operator){const i=buildDynamicString(t.left,e,s,r);i.length&&(r=i.endsWith("*"));const n=buildDynamicString(t.right,e,s,r);return i+n}if("Identifier"===t.type){if("__dirname"===t.name)return ".";if("__filename"===t.name)return "./"+e}return r?"":"*"}function createEsmAnalysis(t,e,s){if(!t.length&&N.test(e))return createSystemAnalysis(e,t);const r=[];const i=[];for(const s of t)if(-1!==s.d){if(s.d>=0){const t=e.slice(s.s,s.e);if(t.startsWith('"')||t.startsWith("'"))try{i.push(JSON.parse('"'+t.slice(1,-1)+'"'));}catch(t){console.warn("TODO: Dynamic import custom expression tracing.");}}}else r.push(e.slice(s.s,s.e));const n=e.length;return {deps:r,dynamicDeps:i,cjsLazyDeps:null,size:n,format:"esm"}}const N=/^\s*(\/\*[^\*]*(\*(?!\/)[^\*]*)*\*\/|\s*\/\/[^\n]*)*\s*System\s*\.\s*register\s*\(\s*(\[[^\]]*\])\s*,\s*\(?function\s*\(\s*([^\),\s]+\s*(,\s*([^\),\s]+)\s*)?\s*)?\)/;function createSystemAnalysis(t,e,s){const[,,,r,,,i]=t.match(N)||[];if(!r)return createEsmAnalysis(e,t);const n=JSON.parse(r.replace(/'/g,'"'));const a=[];if(i){const e=`${i}.import(`;let s=-1;while(-1!==(s=t.indexOf(e,s+1))){const r=s+e.length+1;const i=t[s+e.length];if('"'===i||"'"===i){const n=t.indexOf(i,s+e.length+1);if(-1!==n)try{a.push(JSON.parse('"'+t.slice(r,n)+'"'));continue}catch(t){}}console.warn("TODO: Dynamic import custom expression tracing.");}}const o=t.length;return {deps:n,dynamicDeps:a,cjsLazyDeps:null,size:o,format:"system"}}let z,J;class Resolver{constructor(t,e,s=false){this.pcfgPromises=Object.create(null);this.pcfgs=Object.create(null);this.preserveSymlinks=false;this.providers=D;this.log=t;this.fetchOpts=e;this.preserveSymlinks=s;}addCustomProvider(t,e){if(!e.pkgToUrl)throw new Error('Custom provider "'+t+'" must define a "pkgToUrl" method.');if(!e.parseUrlPkg)throw new Error('Custom provider "'+t+'" must define a "parseUrlPkg" method.');if(!e.resolveLatestTarget)throw new Error('Custom provider "'+t+'" must define a "resolveLatestTarget" method.');this.providers=Object.assign({},this.providers,{[t]:e});}parseUrlPkg(t){for(const e of Object.keys(this.providers)){const s=this.providers[e];const r=s.parseUrlPkg.call(this,t);if(r)return {pkg:"pkg"in r?r.pkg:r,source:{provider:e,layer:"layer"in r?r.layer:"default"}}}return null}pkgToUrl(t,{provider:e,layer:s}){return getProvider(e,this.providers).pkgToUrl.call(this,t,s)}async getPackageBase(t){const e=this.parseUrlPkg(t);if(e)return this.pkgToUrl(e.pkg,e.source);let s;try{s=new URL("./",t);}catch{return t}const r=new URL("/",s).href;do{let e;if(e=await this.checkPjson(s.href))return new URL(".",e).href;if(s.href===r)return new URL("./",t).href}while(s=new URL("../",s))}async getPackageConfig(t){if(!t.startsWith("file:")&&!t.startsWith("http:")&&!t.startsWith("https:")&&!t.startsWith("ipfs:"))return null;if(!t.endsWith("/"))throw new Error(`Internal Error: Package URL must end in "/". Got ${t}`);let e=this.pcfgs[t];if(e)return e;this.pcfgPromises[t]||(this.pcfgPromises[t]=(async()=>{var e,s;const i=this.parseUrlPkg(t);if(i){const s=await(null===(e=getProvider(i.source.provider,this.providers).getPackageConfig)||void 0===e?void 0:e.call(this,t));if(void 0!==s){this.pcfgs[t]=s;return}}const n=await fetch$1(`${t}package.json`,this.fetchOpts);switch(n.status){case 200:case 304:break;case 401:case 403:case 404:case 406:this.pcfgs[t]=null;return;default:throw new JspmError(`Invalid status code ${n.status} reading package config for ${t}. ${n.statusText}`)}if(n.headers&&!(null===(s=n.headers.get("Content-Type"))||void 0===s?void 0:s.match(/^application\/json(;|$)/)))this.pcfgs[t]=null;else try{this.pcfgs[t]=await n.json();}catch(e){this.pcfgs[t]=null;}})());await this.pcfgPromises[t];return this.pcfgs[t]}async getDepList(t,e=false){const s=await this.getPackageConfig(t);return s?[...new Set([Object.keys(s.dependencies||{}),Object.keys(e&&s.devDependencies||{}),Object.keys(s.peerDependencies||{}),Object.keys(s.optionalDependencies||{}),Object.keys(s.imports||{})].flat())]:[]}async checkPjson(t){return null!==await this.getPackageConfig(t)&&t}async exists(t){const e=await fetch$1(t,this.fetchOpts);switch(e.status){case 200:case 304:return true;case 404:case 406:return false;default:throw new JspmError(`Invalid status code ${e.status} loading ${t}. ${e.statusText}`)}}async resolveLatestTarget(t,e,{provider:s,layer:r},i){let n;for(const e of t.ranges.sort(t.ranges[0].constructor.compare))n?e.gt(n)&&!n.contains(e)&&(n=e):n=e;const a={registry:t.registry,name:t.name,range:n};const o=await getProvider(s,this.providers).resolveLatestTarget.call(this,a,e,r,i);if(o)return o;throw new JspmError(`Unable to resolve package ${a.registry}:${a.name} to "${a.range}"${importedFrom(i)}`)}async wasCommonJS(t){var e;const s=await this.getPackageBase(t);if(!s)return false;const r=await this.getPackageConfig(s);if(!r)return false;const i="./"+t.slice(s.length);return !!(null===(e=null===r||void 0===r?void 0:r.exports)||void 0===e?void 0:e[i+"!cjs"])}async realPath(t){if(!t.startsWith("file:")||this.preserveSymlinks)return t;let e=false;t=t.replace(/%3a/i,(()=>{e=true;return ":"}));z||([{realpath:z},{pathToFileURL:J}]=await Promise.all([import('./fs-fe6d5e4b.js').then(function (n) { return n.h; }),import('./url-abf489dd.js').then(function (n) { return n.u; })]));const s=J(await new Promise(((e,s)=>z(new URL(t),((t,r)=>t?s(t):e(r)))))).href;return e?s.replace(":","%3a"):s}async finalizeResolve(t,e,s,r,i){e&&t.endsWith("/")&&(t=t.slice(0,-1));e&&(t=await(async()=>{if(await this.exists(t+"/package.json")){const n=await this.getPackageConfig(t)||{};return s.includes("browser")&&"string"===typeof n.browser?this.finalizeResolve(await legacyMainResolve.call(this,n.browser,new URL(t)),e,s,r,i):s.includes("module")&&"string"===typeof n.module?this.finalizeResolve(await legacyMainResolve.call(this,n.module,new URL(t)),e,s,r,i):"string"===typeof n.main?this.finalizeResolve(await legacyMainResolve.call(this,n.main,new URL(t)),e,s,r,i):this.finalizeResolve(await legacyMainResolve.call(this,null,new URL(t)),e,s,r,i)}return await this.exists(t+"/index.js")?t+"/index.js":await this.exists(t+"/index.json")?t+"/index.json":await this.exists(t+"/index.node")?t+"/index.node":await this.exists(t)?t:await this.exists(t+".js")?t+".js":await this.exists(t+".json")?t+".json":await this.exists(t+".node")?t+".node":t})());if(s.includes("browser")){i=i||await this.getPackageBase(t);if(t.startsWith(i)){const n=await this.getPackageConfig(i);if(n&&"object"===typeof n.browser&&null!==n.browser){const a="./"+t.slice(i.length);if(n.browser[a]){const o=n.browser[a];if(false===o)throw new Error(`TODO: Empty browser map for ${a} in ${t}`);if(!o.startsWith("./"))throw new Error(`TODO: External browser map for ${a} to ${o} in ${t}`);return await this.finalizeResolve(i+o.slice(2),e,s,r,i)}}}}if(t.startsWith("node:")){const n=await r.installTarget(t.slice(5),r.stdlibTarget,i,false,"nodelibs/"+t.slice(5),i);let[a,o]=n.split("|");a.endsWith("/")||(a+="/");o=o.length?"./"+o:".";return this.finalizeResolve(await this.resolveExport(a,o,s,e,t,r,new URL(i)),e,s,r,a)}return t}async resolveExport(t,e,s,r,i,a,o){const l=await this.getPackageConfig(t)||{};function throwExportNotDefined(){throw new JspmError(`No '${e}' exports subpath defined in ${t} resolving ${i}${importedFrom(o)}.`,"MODULE_NOT_FOUND")}if(void 0===l.exports||null===l.exports)return "."===e||r&&"./"===e?s.includes("browser")&&"string"===typeof l.browser?this.finalizeResolve(await legacyMainResolve.call(this,l.browser,new URL(t),i,t),r,s,a,t):s.includes("module")&&"string"===typeof l.module?this.finalizeResolve(await legacyMainResolve.call(this,l.module,new URL(t),i,t),r,s,a,t):"string"===typeof l.main?this.finalizeResolve(await legacyMainResolve.call(this,l.main,new URL(t),i,t),r,s,a,t):this.finalizeResolve(await legacyMainResolve.call(this,null,new URL(t),i,t),r,s,a,t):this.finalizeResolve(new URL(e,new URL(t)).href,r,s,a,t);{function allDotKeys(t){for(let e in t)if("."!==e[0])return false;return true}if("string"===typeof l.exports){if("."===e)return this.finalizeResolve(new URL(l.exports,t).href,r,s,a,t);throwExportNotDefined();}else if(allDotKeys(l.exports)){const i=getMapMatch(e,l.exports);if(i){const n=resolvePackageTarget(l.exports[i],t,s,e.slice(i.length-(i.endsWith("*")?1:0)));null===n&&throwExportNotDefined();return this.finalizeResolve(n,r,s,a,t)}throwExportNotDefined();}else {if("."===e)return this.finalizeResolve(resolvePackageTarget(l.exports,t,s,""),r,s,a,t);throwExportNotDefined();}}}async analyze(t,e,s,i,n=true){var a,o;const c=await fetch$1(t,this.fetchOpts);switch(c.status){case 200:case 304:break;case 404:throw new JspmError(`Module not found: ${t}${importedFrom(e)}`,"MODULE_NOT_FOUND");default:throw new JspmError(`Invalid status code ${c.status} loading ${t}. ${c.statusText}`)}let h=await c.text();try{if(t.endsWith(".ts")||t.endsWith(".tsx")||t.endsWith(".jsx"))return await createTsAnalysis(h,t);if(t.endsWith(".json"))try{JSON.parse(h);return {deps:[],dynamicDeps:[],cjsLazyDeps:null,size:h.length,format:"json"}}catch{}const[e,r]=parse(h);if(e.every((t=>t.d>0))&&!r.length&&t.startsWith("file:"))if(i){if(!(t.endsWith(".mjs")||t.endsWith(".js")&&"module"===(null===(a=await this.getPackageConfig(await this.getPackageBase(t)))||void 0===a?void 0:a.type)))return createCjsAnalysis(e,h,t)}else if(t.endsWith(".cjs")||t.endsWith(".js")&&"module"!==(null===(o=await this.getPackageConfig(await this.getPackageBase(t)))||void 0===o?void 0:o.type))return createCjsAnalysis(e,h,t);return s?createSystemAnalysis(h,e,t):createEsmAnalysis(e,h,t)}catch(r){if(!r.message||!r.message.startsWith("Parse error @:"))throw r;if(n)try{return this.analyze(t,e,s,i,false)}catch{}if(r.message&&r.message.startsWith("Parse error @:")){const[e]=r.message.split("\n",1);const s=e.slice(14);let[i,n]=s.split(":");const a=h.split("\n");let o="";i>1&&(o+="\n  "+a[i-2]);o+="\n> "+a[i-1];o+="\n  "+" ".repeat(n-1)+"^";a.length>1&&(o+="\n  "+a[i]);throw new JspmError(`${o}\n\nError parsing ${t}:${s}`)}throw r}}}function resolvePackageTarget(t,e,s,r,i){if("string"===typeof t){if(""===r)return new URL(t,e).href;if(-1!==t.indexOf("*"))return new URL(t.replace(/\*/g,r),e).href;if(t.endsWith("/"))return new URL(t+r,e).href;throw new Error("Expected pattern or path export")}if("object"!==typeof t||null===t||Array.isArray(t)){if(Array.isArray(t))for(const i of t)return resolvePackageTarget(i,e,s,r)}else for(const i in t)if("default"===i||s.includes(i)){const n=resolvePackageTarget(t[i],e,s,r);if(n)return n}return null}async function legacyMainResolve(t,e,s,r){let i;if(t){if(await this.exists(i=new URL(`./${t}/index.js`,e).href))return i;if(await this.exists(i=new URL(`./${t}/index.json`,e).href))return i;if(await this.exists(i=new URL(`./${t}/index.node`,e).href))return i;if(await this.exists(i=new URL(`./${t}`,e).href))return i;if(await this.exists(i=new URL(`./${t}.js`,e).href))return i;if(await this.exists(i=new URL(`./${t}.json`,e).href))return i;if(await this.exists(i=new URL(`./${t}.node`,e).href))return i}else {if(await this.exists(i=new URL("./index.js",e).href))return i;if(await this.exists(i=new URL("./index.json",e).href))return i;if(await this.exists(i=new URL("./index.node",e).href))return i}throw new JspmError(`Unable to resolve ${t?t+" in ":""}${e} resolving ${s}${importedFrom(r)}.`,"MODULE_NOT_FOUND")}class TraceMap{constructor(t,e,s,r){this.env=["browser","development","module"];this.tracedUrls={};this.traces=new Set;this.staticList=new Set;this.dynamicList=new Set;this.log=s;this.resolver=r;this.mapBase=t;this.opts=e;this.opts.env&&(this.env=this.opts.env);e.inputMap?this.map=e.inputMap instanceof ImportMap?e.inputMap:new ImportMap(t).extend(e.inputMap):this.map=new ImportMap(t);this.installer=new Installer(this.mapBase,this.opts,this.log,this.resolver);}clearLists(){this.staticList=new Set;this.dynamicList=new Set;this.tracedUrls={};this.traces=new Set;}replace(t,e,s){return this.installer.replace(t,e,s)}async visit(t,e,s=new Set){if(s.has(t))return;s.add(t);const r=this.tracedUrls[t];if(r){for(const t of Object.keys(r.deps))-1===t.indexOf("*")&&await this.visit(r.deps[t],e,s);await e(t,r);}}checkTypes(){let t=false,e=false;for(const s of [...this.staticList,...this.dynamicList]){const r=this.tracedUrls[s];"system"===r.format?t=true:e=true;}return {system:t,esm:e}}async startInstall(){const t=await this.installer.startInstall();return async e=>{if(!e){t(false);return false}if(!this.opts.fullMap){const t={};do{this.installer.newInstalls=false;await Promise.all([...this.traces].map((async e=>{var s,r;const[i,n]=e.split("##");try{const a=await this.trace(i,new URL(n),(null===(r=null===(s=this.tracedUrls)||void 0===s?void 0:s[n])||void 0===r?void 0:r.wasCJS)?["require",...this.env]:["import",...this.env]);a&&(t[e]=a);}catch(t){throw t}})));}while(this.installer.newInstalls);let e=this.staticList;const s=new Set;const depVisitor=async(r,i)=>{var n,a,o,l,c,h,f,u,p;e.add(r);const d=await this.resolver.getPackageBase(r);for(const e of i.dynamicDeps){if(-1!==e.indexOf("*"))continue;const i=t[e+"##"+r];if(isPlain(e)){const t=null===(n=this.map.scopes[d])||void 0===n?void 0:n[e];(!t||t!==i&&(null===(o=null===(a=this.tracedUrls)||void 0===a?void 0:a[r])||void 0===o?void 0:o.wasCJS))&&this.map.set(e,i,d);}s.add(i);}for(const e of i.deps){if(-1!==e.indexOf("*"))continue;const s=t[e+"##"+r];if(isPlain(e)){const t=null===(l=this.map.scopes[d])||void 0===l?void 0:l[e];(!t||t!==s&&(null===(h=null===(c=this.tracedUrls)||void 0===c?void 0:c[r])||void 0===h?void 0:h.wasCJS))&&this.map.set(e,s,d);}}for(const e of i.cjsLazyDeps){if(-1!==e.indexOf("*"))continue;const s=t[e+"##"+r];if(isPlain(e)){const t=null===(f=this.map.scopes[d])||void 0===f?void 0:f[e];(!t||t!==s&&(null===(p=null===(u=this.tracedUrls)||void 0===u?void 0:u[r])||void 0===p?void 0:p.wasCJS))&&this.map.set(e,s,d);}}};const r=new Set;for(const e of this.traces){const s=t[e];if(void 0===s)continue;const[i,n]=e.split("##");isPlain(i)&&n===this.mapBase.href&&this.map.set(i,s);await this.visit(s,depVisitor,r);}e=this.dynamicList;for(const t of s)await this.visit(t,depVisitor,r);}return t(true)}}async add(t,e,s=true){const r=await this.installer.installTarget(t,e,this.mapBase.href,s,null,this.mapBase.href);return r.slice(0,-1)}
/**
     * @returns `resolved` - either a URL `string` pointing to the module or `null` if the specifier should be ignored.
     */
async trace(t,e=this.mapBase,s=["import",...this.env]){var r,i,a,l,c;if(null===(r=this.opts.ignore)||void 0===r?void 0:r.includes(t))return null;const h=await this.resolver.getPackageBase(e.href);h||throwInternalError();const f="commonjs"===(null===(i=this.tracedUrls[e.href])||void 0===i?void 0:i.format);this.traces.add(t+"##"+e.href);if(!isPlain(t)){let r=new URL(t,e);if("file:"!==r.protocol&&"https:"!==r.protocol&&"http:"!==r.protocol&&"node:"!==r.protocol&&"data:"!==r.protocol)throw new JspmError(`Found unexpected protocol ${r.protocol}${importedFrom(e)}`);const i=r.href;const n=await this.resolver.realPath(await this.resolver.finalizeResolve(i,f,s,this.installer,h));if(n!==i){this.map.set(i.endsWith("/")?i.slice(0,-1):i,n,h);r=new URL(n);}this.log("trace",`${t} ${e.href} -> ${r}`);await this.traceUrl(r.href,e,s);return r.href}const u=parsePkg(t);if(!u)throw new JspmError(`Invalid package name ${t}`);const{pkgName:p,subpath:d}=u;const g=getScopeMatches(e,this.map.scopes,this.map.baseUrl);const m=g.filter((([,t])=>t.startsWith(h)));if(m.length)for(const[r]of m){const i=getMapMatch(t,this.map.scopes[r]);if(i){const n=await this.resolver.realPath(new URL(this.map.scopes[r][i]+t.slice(i.length),this.map.baseUrl).href);this.log("trace",`${t} ${e.href} -> ${n}`);await this.traceUrl(n,e,s);return n}}const w=g.find((([,t])=>t===h));if(w){const r=this.map.scopes[w[0]];const i=getMapMatch(t,r);const a=i?await this.resolver.realPath(new URL(r[i]+t.slice(i.length),this.map.baseUrl).href):null;if(a){this.log("trace",`${t} ${e.href} -> ${a}`);await this.traceUrl(a,e,s);return a}}const v=getMapMatch(t,this.map.imports);const y=v?await this.resolver.realPath(new URL(this.map.imports[v]+t.slice(v.length),this.map.baseUrl).href):null;if(y){this.log("trace",`${t} ${e.href} -> ${y}`);await this.traceUrl(y,e,s);return y}const U=await this.resolver.getPackageConfig(h)||{};if(U.exports&&U.name===p){const r=await this.resolver.realPath(await this.resolver.resolveExport(h,d,s,f,t,this.installer,e));this.log("trace",`${t} ${e.href} -> ${r}`);await this.traceUrl(r,e,s);return r}if(U.imports&&"#"===p[0]){const r=getMapMatch(t,U.imports);if(!r)throw new JspmError(`No '${t}' import defined in ${h}${importedFrom(e)}.`);const i=await this.resolver.realPath(resolvePackageTarget(U.imports[r],h,s,t.slice(r.length),this.installer));this.map.set(r,i,h);this.log("trace",`${t} ${e.href} -> ${i}`);await this.traceUrl(i,e,s);return i}const k=this.opts.freeze?null===(l=null===(a=this.installer)||void 0===a?void 0:a.installs[h])||void 0===l?void 0:l[p]:await(null===(c=this.installer)||void 0===c?void 0:c.install(p,h,"./"!==d,e.href));if(k){let[r,i]=k.split("|");i&&!r.endsWith("/")&&(r+="/");const n=i?"./"+i+d.slice(1):d;const a=await this.resolver.realPath(await this.resolver.resolveExport(r,n,s,f,t,this.installer,e));this.log("trace",`${t} ${e.href} -> ${a}`);await this.traceUrl(a,e,s);return a}throw new JspmError(`No resolution in map for ${t}${importedFrom(e)}`)}async traceUrl(t,e,s){var r;if(t in this.tracedUrls)return;const i=this.tracedUrls[t]={wasCJS:false,deps:[],dynamicDeps:[],cjsLazyDeps:[],hasStaticParent:true,size:NaN,integrity:"",format:void 0};if(t.endsWith("/"))throw new JspmError(`Trailing "/" installs not yet supported installing ${t} for ${e.href}`);const n="commonjs"===(null===(r=this.tracedUrls[e.href])||void 0===r?void 0:r.format);const{deps:a,dynamicDeps:o,cjsLazyDeps:l,size:c,format:h}=await this.resolver.analyze(t,e,this.opts.system,n);i.format=h;i.size=c;const f="commonjs"===h||await this.resolver.wasCommonJS(t);f&&(i.wasCJS=true);f&&s.includes("import")?s=s.map((t=>"import"===t?"require":t)):!f&&s.includes("require")&&(s=s.map((t=>"require"===t?"import":t)));let u=[...a];if(o.length&&!this.opts.static)for(const t of o)u.includes(t)||u.push(t);if(l&&!this.opts.static)for(const t of l)u.includes(t)||u.push(t);const p=new URL(t);await Promise.all(u.map((async e=>{if(-1!==e.indexOf("*")){this.log("todo","Handle wildcard trace "+e+" in "+t);return}const r=await this.trace(e,p,s);if(null!==r){a.includes(e)&&!i.deps.includes(e)&&i.deps.push(e);o.includes(e)&&!i.dynamicDeps.includes(e)&&i.dynamicDeps.push(e);l&&l.includes(e)&&!i.cjsLazyDeps.includes(e)&&i.cjsLazyDeps.push(e);}})));}}function createLogger(){let t;let e=new Promise((e=>t=e));let s=[];const logStream=async function*(){while(true){while(s.length)yield s.shift();await e;}};function log(r,i){if(s.length)s.push({type:r,message:i});else {s=[{type:r,message:i}];const n=t;e=new Promise((e=>t=e));n();}}return {log:log,logStream:logStream}}var B,F,q;const H="win32"===(null===(B=globalThis.process)||void 0===B?void 0:B.platform);H?Object.keys(null===(F=globalThis.process)||void 0===F?void 0:F.env).find((t=>Boolean(t.match(/^PATH$/i))))||"Path":"PATH";"win32"===(null===(q=globalThis.process)||void 0===q?void 0:q.platform)?";":":";const G={tab:"  ",newline:H?"\r\n":"\n",trailingNewline:H?"\r\n":"\n",indent:"",quote:'"'};function detectNewline(t){let e=t.match(/\r?\n|\r(?!\n)/);return e?e[0]:H?"\r\n":"\n"}function detectIndent$1(t,e){let s;let r=t.split(e);for(const t of r){const e=t.match(/^\s*[^\s]/);e&&(void 0===s||e.length<s.length)&&(s=e[0].slice(0,-1));}r=r.map((t=>t.slice(s.length)));let i=r.map((t=>{var e;return (null===(e=t.match(/^[ \t]*/))||void 0===e?void 0:e[0])||""}))||[];let n=new Map;let a=0;i.forEach((t=>{let e=Math.abs(t.length-a);0!==e&&n.set(e,(n.get(e)||0)+1);a=t.length;}));let o=0;for(const t of n.keys())(!o||n.get(t)>=n.get(o))&&(o=t);let l=new Map;i.forEach((t=>{let e=t.substr(t.length-o);l.set(e,(l.get(e)||0)+1);}));let c="";for(const[t,e]of l)(!c||e>l.get(c))&&(c=t);r.length<5&&r.reduce(((t,e)=>t+e.length),0)<100&&(c="  ");return {indent:s||"",tab:c}}function detectStyle(t){let e=Object.assign({},G);e.newline=detectNewline(t);let{indent:s,tab:r}=detectIndent$1(t,e.newline);e.indent=s;e.tab=r;let i=t.match(/"|'/);i&&(e.quote=i[0]);e.trailingNewline=t&&t.match(new RegExp(e.newline+"$"))?e.newline:"";return e}function parseStyled(t,e){t.startsWith("\ufeff")&&(t=t.substr(1));let s=detectStyle(t);try{return {json:JSON.parse(t),style:s}}catch(t){throw new JspmError("Error parsing JSON file"+(e?" "+e:""))}}let K,V;const Q=["link","base"];function parseHtml(t,e=["script","link","base"]){var s;const r=[];K=t;V=0;let i={tagName:void 0,start:-1,end:-1,attributes:[],innerStart:-1,innerEnd:-1};while(V<K.length){while(60!==K.charCodeAt(V++))if(V===K.length)return r;const t=V;V=t;const n=null===(s=readTagName())||void 0===s?void 0:s.toLowerCase();if("!--"===n){while(45!==K.charCodeAt(V)||45!==K.charCodeAt(V+1)||62!==K.charCodeAt(V+2))if(++V===K.length)return r;V+=3;}else {if(void 0===n)return r;if(e.includes(n)){i.tagName=n;i.start=V-n.length-2;const t=i.attributes;let e;while(e=scanAttr())t.push(e);let s=Q.includes(n);47===K.charCodeAt(V-2)&&62===K.charCodeAt(V-1)&&(s=true);if(s)i.end=V;else {i.innerStart=V;while(true){while(60!==K.charCodeAt(V++))if(V===K.length)return r;const t=readTagName();if(void 0===t)return r;if("/script"===t){i.innerEnd=V-8;while(scanAttr());i.end=V;break}}}r.push(i);i={tagName:void 0,start:-1,end:-1,attributes:[],innerStart:-1,innerEnd:-1};}else while(scanAttr());}}return r}function readTagName(){let t=V;let e;while(!isWs(e=K.charCodeAt(V++))&&62!==e)if(V===K.length)return null;return K.slice(t,62===e?--V:V-1)}function scanAttr(){let t;while(isWs(t=K.charCodeAt(V)))if(++V===K.length)return null;if(62===t||47===t&&62===(t=K.charCodeAt(++V))){V++;return null}const e=V;while(!isWs(t=K.charCodeAt(V++))&&61!==t){if(V===K.length)return null;if(62===t)return e+2===V&&47===K.charCodeAt(e)?null:{nameStart:e,nameEnd:--V,valueStart:-1,valueEnd:-1}}const s=V-1;if(61!==t){while(isWs(t=K.charCodeAt(V))&&61!==t){if(++V===K.length)return null;if(62===t)return null}if(61!==t)return {nameStart:e,nameEnd:s,valueStart:-1,valueEnd:-1}}while(isWs(t=K.charCodeAt(V++))){if(V===K.length)return null;if(62===t)return null}if(34===t){const t=V;while(34!==K.charCodeAt(V++))if(V===K.length)return null;return {nameStart:e,nameEnd:s,valueStart:t,valueEnd:V-1}}if(39===t){const t=V;while(39!==K.charCodeAt(V++))if(V===K.length)return null;return {nameStart:e,nameEnd:s,valueStart:t,valueEnd:V-1}}{const r=V-1;V++;while(!isWs(t=K.charCodeAt(V))&&62!==t)if(++V===K.length)return null;return {nameStart:e,nameEnd:s,valueStart:r,valueEnd:V}}}function isWs(t){return 32===t||t<14&&t>8}function getAttr(t,e,s){for(const r of e.attributes)if(t.slice(r.nameStart,r.nameEnd)===s)return t.slice(r.valueStart,r.valueEnd);return null}const X=/(^|\/)(es-module-shims|esms)(\.min)?\.js$/;function toHtmlAttrs(t,e){return Object.fromEntries(e.map((e=>readAttr(t,e))).map((t=>[t.name,t])))}function analyzeHtml(t,e=c){const s={base:e,map:{json:null,style:null,start:-1,end:-1,newlineTab:"\n",newScript:false,attrs:null},staticImports:new Set,dynamicImports:new Set,preloads:[],modules:[],esModuleShims:null};const r=parseHtml(t);for(const i of r)switch(i.tagName){case"base":s.map.json||createInjectionPoint(t,s.map,i);const r=getAttr(t,i,"href");r&&(s.base=new URL(r,e));break;case"script":const n=getAttr(t,i,"type");if("importmap"===n){const{json:r,style:n}=parseStyled(t.slice(i.innerStart,i.innerEnd),e.href+"#importmap");const{start:a,end:o}=i;const l=toHtmlAttrs(t,i.attributes);s.map={json:r,style:n,start:a,end:o,attrs:l,newlineTab:"\n"+detectIndent(t,o),newScript:false};}else if("module"===n){const e=getAttr(t,i,"src");if(e)X.test(e)?s.esModuleShims={start:i.start,end:i.end,attrs:toHtmlAttrs(t,i.attributes)}:s.staticImports.add(e);else {const[e]=parse(t.slice(i.innerStart,i.innerEnd))||[];for(const{n:t,d:r}of e)t&&(-1===r?s.staticImports:s.dynamicImports).add(t);}}else if(!n||"javascript"===n){const e=getAttr(t,i,"src");if(e)X.test(e)?s.esModuleShims={start:i.start,end:i.end,attrs:toHtmlAttrs(t,i.attributes)}:s.staticImports.add(e);else {const[e]=parse(t.slice(i.innerStart,i.innerEnd))||[];for(const{n:t,d:r}of e)t&&(-1===r?s.staticImports:s.dynamicImports).add(t);}}s.map.json||createInjectionPoint(t,s.map,i);break;case"link":s.map.json||createInjectionPoint(t,s.map,i);if("modulepreload"===getAttr(t,i,"rel")){const{start:e,end:r}=i;const n=toHtmlAttrs(t,i.attributes);s.preloads.push({start:e,end:r,attrs:n});}}return s}function createInjectionPoint(t,e,s){e.newlineTab="\n"+detectIndent(t,s.start);e.newScript=true;e.attrs=toHtmlAttrs(t,s.attributes);e.start=e.end=s.start;}function readAttr(t,{nameStart:e,nameEnd:s,valueStart:r,valueEnd:i}){return {start:e,end:-1!==i?i:s,quote:-1===r||'"'!==t[r-1]&&"'"!==t[r-1]?"":t[r-1],name:t.slice(e,s),value:-1===r?null:t.slice(r,i)}}function detectIndent(t,e){if(""===t||-1===e)return "";const s=t.lastIndexOf("\n",e);const r=(-1===s?t:t.slice(s,e)).match(/^[ \t]*/);return r?r[0]:""}const Y=/^\s+/;class Replacer{constructor(t){this.offsetTable=[];this.source=t;}replace(t,e,s){const r=findOffset(this.offsetTable,t);const i=findOffset(this.offsetTable,e);this.source=this.source.slice(0,t+r)+s+this.source.slice(e+i);addOffset(this.offsetTable,e,s.length-(e+i-t-r));}remove(t,e,s=false){var r,i,n;this.replace(t,e,"");if(s){"boolean"===typeof s&&(s=Y);const t=this.idx(e);const[a]=null!==(r=this.source.slice(t).match(s))&&void 0!==r?r:[];this.source=this.source.slice(0,t)+this.source.slice(null!==(i=t+(null===a||void 0===a?void 0:a.length))&&void 0!==i?i:0);addOffset(this.offsetTable,e,null!==(n=-(null===a||void 0===a?void 0:a.length))&&void 0!==n?n:0);}}idx(t){return t+findOffset(this.offsetTable,t)}}function addOffset(t,e,s){let r=t.length,i=false;while(r-- >0){const[s]=t[r];if(s<e||s===e&&(i=true))break}i?t.splice(r,1,[e,s+t[r][1]]):t.splice(r+1,0,[e,s]);}function findOffset(t,e){let s=0;for(const[r,i]of t){if(r>e)break;s+=i;}return s}let Z;async function getIntegrity(t,e){Z||({createHash:Z}=await import('./crypto-701d57ad.js'));const s=await fetch$1(t,e);const i=await s.text();const n=Z("sha384");n.update(i);return "sha384-"+n.digest("base64")}function clearCache(){}class Generator{
/**
     * @param options GeneratorOptions
     *
     * For example:
     *
     * ```js
     * const generator = new Generator({
     *   mapUrl: import.meta.url,
     *   inputMap: {
     *     "imports": {
     *       "react": "https://cdn.skypack.dev/react"
     *     }
     *   },
     *   defaultProvider: 'jspm',
     *   providers: {
     *     '@orgscope': 'nodemodules'
     *   },
     *   customProviders: {},
     *   env: ['production', 'browser'],
     *   cache: false,
     * });
     * ```
     */
constructor({baseUrl:t,mapUrl:e,rootUrl:s,inputMap:r,env:i=["browser","development","module"],defaultProvider:n="jspm",customProviders:a,providers:o={},resolutions:l={},cache:h=true,stdlib:f="@jspm/core",ignore:u=[],ipfsAPI:p}={}){this.finishInstall=null;this.installCnt=0;let d;d="offline"===h?{cache:"force-cache"}:h?{}:{cache:"no-store"};p&&(d.ipfsAPI=p);const{log:g,logStream:m}=createLogger();const w=new Resolver(g,d,true);if(a)for(const t of Object.keys(a))w.addCustomProvider(t,a[t]);this.logStream=m;if(e&&!t){e="string"===typeof e?new URL(e,c):e;try{t=new URL("./",e);}catch{t=new URL(e+"/");}}else t&&!e?e=t:e||t||(t=e=c);this.baseUrl="string"===typeof t?new URL(t,c):t;if(!this.baseUrl.pathname.endsWith("/")){this.baseUrl=new URL(this.baseUrl.href);this.baseUrl.pathname+="/";}this.mapUrl="string"===typeof e?new URL(e,this.baseUrl):e;this.rootUrl="string"===typeof s?new URL(s,this.baseUrl):s||null;if(!this.mapUrl.pathname.endsWith("/"))try{this.mapUrl=new URL("./",this.mapUrl);}catch{this.mapUrl=new URL(this.mapUrl.href+"/");}this.traceMap=new TraceMap(this.mapUrl,{baseUrl:this.baseUrl,stdlib:f,env:i,defaultProvider:n,providers:o,inputMap:r,ignore:u,resolutions:l},g,w);}
/**
     * Trace a module and install all dependencies necessary into the map
     * to support its execution including static and dynamic module imports.
     *
     * @param specifier Import specifier to trace
     * @param parentUrl Parent URL to trace this specifier from
     */async traceInstall(t,e){"string"===typeof e&&(e=new URL(e));let s=false;0===this.installCnt++&&(this.finishInstall=await this.traceMap.startInstall());try{await this.traceMap.trace(t,e||this.baseUrl);}catch(t){s=true;throw t}finally{0===--this.installCnt&&await this.finishInstall(true);if(!s)return {staticDeps:[...this.traceMap.staticList],dynamicDeps:[...this.traceMap.dynamicList]}}}
/**
     * Generate and inject an import map for an HTML file
     *
     * Traces the module scripts of the HTML via traceInstall and install
     * for URL-like specifiers and bare specifiers respectively.
     *
     * Injects the final generated import map returning the injected HTML
     *
     * @param html String
     * @param injectOptions Injection options
     *
     * Injection options are: `htmlUrl`, `preload`, `integrity`, `whitespace`
     * and `esModuleShims`. The default is `{ esModuleShims: true, whitespace: true }`.
     *
     * ES Module shims will be resolved to the latest version against the provider
     *
     * Example:
     *
     * ```js
     *  const outputHtml = await generator.htmlGenerate(`
     *    <!doctype html>
     *    <script type="module">import 'react'<\/script>
     *  `);
     * ```
     *
     * which outputs:
     *
     * ```
     *   <!doctype html>
     *   <script async src="https://ga.jspm.io/npm:es-module-shims@1.4.1/dist/es-module-shims.js"></script>
     *   <script type="importmap">
     *   {...}
     *   </script>
     *   <script type="module">import 'react'</script>
     * ```
     *
     */async htmlGenerate(t,{htmlUrl:s,preload:r=false,integrity:i=false,whitespace:n=true,esModuleShims:a=true}={}){"string"===typeof s&&(s=new URL(s));i&&(r=true);const o=analyzeHtml(t,s);let l=[];await Promise.all([...new Set([...o.staticImports,...o.dynamicImports])].map((async t=>{if(isPlain(t))var{staticDeps:e}=await this.install(t);else var{staticDeps:e}=await this.traceInstall(t,o.base);l=l.concat(e);})));const c=new Replacer(t);let h="";if(a){const t=await this.traceMap.resolver.resolveLatestTarget({name:"es-module-shims",registry:"npm",ranges:[new R$3("*")]},false,this.traceMap.installer.defaultProvider);const s=this.traceMap.resolver.pkgToUrl(t,this.traceMap.installer.defaultProvider)+"dist/es-module-shims.js";h=`<script async src="${s}" crossorigin="anonymous"${i?` integrity="${await getIntegrity(s,this.traceMap.resolver.fetchOpts)}"`:""}><\/script>${o.map.newlineTab}`;}void 0!==a&&o.esModuleShims&&c.remove(o.esModuleShims.start,o.esModuleShims.end,true);let f="";if(r&&l.length){let t=true;for(let e of l){(t||n)&&(f+=o.map.newlineTab);t&&(t=false);f+=i?`<link rel="modulepreload" href="${e}" integrity="${await getIntegrity(e,this.traceMap.resolver.fetchOpts)}" />`:`<link rel="modulepreload" href="${e}" />`;}}if(void 0!==r)for(const t of o.preloads)c.remove(t.start,t.end,true);c.replace(o.map.start,o.map.end,h+'<script type="importmap">'+(n?"\n":"")+JSON.stringify(this.getMap(),null,n?2:0)+(n?o.map.newlineTab:"")+"<\/script>"+f+(o.map.newScript?o.map.newlineTab:""));return c.source}
/**
     * Install a package target into the import map, including all its dependency resolutions via tracing.
     * @param install Package to install
     *
     * For example:
     *
     * ```js
     * // Install a new package into the import map
     * await generator.install('react-dom');
     *
     * // Install a package version and subpath into the import map (installs lit/decorators.js)
     * await generator.install('lit@2/decorators.js');
     *
     * // Install a package version to a custom alias
     * await generator.install({ alias: 'react16', target: 'react@16' });
     *
     * // Install a specific subpath of a package
     * await generator.install({ target: 'lit@2', subpath: './html.js' });
     *
     * // Install an export from a locally located package folder into the map
     * // The package.json is used to determine the exports and dependencies.
     * await generator.install({ alias: 'mypkg', target: './packages/local-pkg', subpath: './feature' });
     * ```
     *
     */async install(t){this.traceMap.clearLists();if(Array.isArray(t))return await Promise.all(t.map((t=>this.install(t)))).then((()=>({staticDeps:[...this.traceMap.staticList],dynamicDeps:[...this.traceMap.dynamicList]})));if(1!==arguments.length)throw new Error("Install takes a single target string or object.");if("string"!==typeof t&&void 0!==t.subpaths){t.subpaths.every((t=>{if("string"!==typeof t||"."!==t&&!t.startsWith("./"))throw new Error(`Install subpath "${t}" must be equal to "." or start with "./".`)}));return await Promise.all(t.subpaths.map((e=>this.install({target:t.target,alias:t.alias,subpath:e})))).then((()=>({staticDeps:[...this.traceMap.staticList],dynamicDeps:[...this.traceMap.dynamicList]})))}let e=false;0===this.installCnt++&&(this.finishInstall=await this.traceMap.startInstall());try{const{alias:s,target:r,subpath:i}=await installToTarget.call(this,t);await this.traceMap.add(s,r);await this.traceMap.trace(s+i.slice(1),this.mapUrl);}catch(t){e=true;throw t}finally{0===--this.installCnt&&await this.finishInstall(true);if(!e)return {staticDeps:[...this.traceMap.staticList],dynamicDeps:[...this.traceMap.dynamicList]}}}
/**
     * Resolve a specifier using the import map.
     *
     * @param specifier Module to resolve
     * @param parentUrl ParentURL of module to resolve
     * @returns Resolved URL string
     */resolve(t,e=this.baseUrl){"string"===typeof e&&(e=new URL(e,this.baseUrl));const s=this.traceMap.map.resolve(t,e);if(null===s)throw new JspmError(`Unable to resolve "${t}" from ${e.href}`,"MODULE_NOT_FOUND");return s}get importMap(){return this.traceMap.map}
/**
     *
     * @param url
     * @returns
     */getAnalysis(t){"string"!==typeof t&&(t=t.href);const e=this.traceMap.tracedUrls[t];if(!e)throw new Error(`The URL ${t} has not been traced by this generator instance.`);return {format:e.format,staticDeps:e.deps,dynamicDeps:e.dynamicDeps,cjsLazyDeps:e.cjsLazyDeps||[]}}getMap(){const t=this.traceMap.map.clone();t.flatten(this.rootUrl?this.rootUrl:this.baseUrl);this.rootUrl&&t.rebase(this.rootUrl.href,true);t.sort();return t.toJSON()}}async function fetch(t,e={}){return fetch$1(t,e)}
/**
 * Get the lookup resolution information for a specific install.
 *
 * @param install The install object
 * @param lookupOptions Provider and cache defaults for lookup
 * @returns The resolved install and exact package { install, resolved }
 */async function lookup(t,{provider:e,cache:s}={}){const r=new Generator({cache:!s,defaultProvider:e});const{target:i,subpath:n,alias:a}=await installToTarget.call(r,t);if(i instanceof URL)throw new Error("URL lookups not supported");const o=await r.traceMap.resolver.resolveLatestTarget(i,true,r.traceMap.installer.defaultProvider);return {install:{target:{registry:i.registry,name:i.name,range:i.ranges.map((t=>t.toString())).join(" || ")},subpath:n,alias:a},resolved:o}}
/**
 * Get the package.json configuration for a specific URL or package.
 *
 * @param pkg Package to lookup configuration for
 * @param lookupOptions Optional provider and cache defaults for lookup
 * @returns Package JSON configuration
 *
 * Example:
 * ```js
 * import { getPackageConfig } from '@jspm/generator';
 *
 * // Supports a resolved package
 * {
 *   const packageJson = await getPackageConfig({ registry: 'npm', name: 'lit-element', version: '2.5.1' });
 * }
 *
 * // Or alternatively provide any URL
 * {
 *   const packageJson = await getPackageConfig('https://ga.jspm.io/npm:lit-element@2.5.1/lit-element.js');
 * }
 * ```
 */async function getPackageConfig(t,{provider:e,cache:s}={}){const r=new Generator({cache:!s,defaultProvider:e});t="object"===typeof t&&"name"in t?r.traceMap.resolver.pkgToUrl(t,r.traceMap.installer.defaultProvider):"string"===typeof t?new URL(t).href:t.href;return r.traceMap.resolver.getPackageConfig(t)}
/**
 * Get the package base URL for the given module URL.
 *
 * @param url module URL
 * @param lookupOptions Optional provider and cache defaults for lookup
 * @returns Base package URL
 *
 * Modules can be remote CDN URLs or local file:/// URLs.
 *
 * All modules in JSPM are resolved as within a package boundary, which is the
 * parent path of the package containing a package.json file.
 *
 * For JSPM CDN this will always be the base of the package as defined by the
 * JSPM CDN provider. For non-provider-defined origins it is always determined
 * by trying to fetch the package.json in each parent path until the root is reached
 * or one is found. On file:/// URLs this exactly matches the Node.js resolution
 * algorithm boundary lookup.
 *
 * This package.json file controls the package name, imports resolution, dependency
 * resolutions and other package information.
 *
 * getPackageBase will return the folder containing the package.json,
 * with a trailing '/'.
 *
 * This URL will either be the root URL of the origin, or it will be a
 * path "pkgBase" such that fetch(`${pkgBase}package.json`) is an existing
 * package.json file.
 *
 * For example:
 *
 * ```js
 *   import { getPackageBase } from '@jspm/generator';
 *   const pkgUrl = await getPackageBase('https://ga.jspm.io/npm:lit-element@2.5.1/lit-element.js');
 *   // Returns: https://ga.jspm.io/npm:lit-element@2.5.1/
 * ```
 */async function getPackageBase(t,{provider:e,cache:s}={}){const r=new Generator({cache:!s,defaultProvider:e});return r.traceMap.resolver.getPackageBase("string"===typeof t?t:t.href)}async function installToTarget(t){"string"===typeof t&&(t={target:t});if("string"!==typeof t.target)throw new Error('All installs require a "target" string.');if(void 0!==t.subpath&&("string"!==typeof t.subpath||"."!==t.subpath&&!t.subpath.startsWith("./")))throw new Error(`Install subpath "${t.subpath}" must be a string equal to "." or starting with "./".${"string"===typeof t.subpath?`\nTry setting the subpath to "./${t.subpath}"`:""}`);const{alias:e,target:s,subpath:r}=await toPackageTarget(this.traceMap.resolver,t.target,this.baseUrl.href);return {alias:t.alias||e,target:s,subpath:t.subpath||r}}

export { Generator as G, getPackageBase as a, clearCache as c, e$2 as e, fetch as f, getPackageConfig as g, lookup as l, oe$1 as o, v$1 as v };
