var e$3={};const t$3=/^([~\^])?(0|[1-9]\d*)(?:\.(0|[1-9]\d*))?$/;const r$3=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-([\da-z-]+(?:\.[\da-z-]+)*))?(\+[\da-z-]+)?$/i;e$3.semverRegEx=r$3;e$3.shortSemverRegEx=t$3;const s$2=Symbol("major");const i$3=Symbol("minor");const n$3=Symbol("patch");const h$3=Symbol("pre");const a$3=Symbol("build");const o$4=Symbol("tag");let m$3=/^\d+$/;class Semver{constructor(e){let t=e.match(r$3);if(t){this[s$2]=parseInt(t[1],10);this[i$3]=parseInt(t[2],10);this[n$3]=parseInt(t[3],10);this[h$3]=t[4]&&t[4].split(".");this[a$3]=t[5];}else this[o$4]=e;}get major(){return this[s$2]}get minor(){return this[i$3]}get patch(){return this[n$3]}get pre(){return this[h$3]}get build(){return this[a$3]}get tag(){return this[o$4]}gt(e){return 1===Semver.compare(this,e)}lt(e){return -1===Semver.compare(this,e)}eq(e){e instanceof Semver||(e=new Semver(e));if(this[o$4]&&e[o$4])return this[o$4]===e[o$4];if(this[o$4]||e[o$4])return false;if(this[s$2]!==e[s$2])return false;if(this[i$3]!==e[i$3])return false;if(this[n$3]!==e[n$3])return false;if(void 0===this[h$3]&&void 0===e[h$3])return true;if(void 0===this[h$3]||void 0===e[h$3])return false;if(this[h$3].length!==e[h$3].length)return false;for(let t=0;t<this[h$3].length;t++)if(this[h$3][t]!==e[h$3][t])return false;return this[a$3]===e[a$3]}matches(e,t=false){e instanceof SemverRange||(e=new SemverRange(e));return e.has(this,t)}toString(){return this[o$4]?this[o$4]:this[s$2]+"."+this[i$3]+"."+this[n$3]+(this[h$3]?"-"+this[h$3].join("."):"")+(this[a$3]?this[a$3]:"")}static isValid(e){let t=e.match(r$3);return t&&void 0!==t[2]&&void 0!==t[3]}static compare(e,t){e instanceof Semver||(e=new Semver(e));t instanceof Semver||(t=new Semver(t));return e[o$4]&&t[o$4]?0:e[o$4]?-1:t[o$4]?1:e[s$2]!==t[s$2]?e[s$2]>t[s$2]?1:-1:e[i$3]!==t[i$3]?e[i$3]>t[i$3]?1:-1:e[n$3]!==t[n$3]?e[n$3]>t[n$3]?1:-1:e[h$3]||t[h$3]?e[h$3]?t[h$3]?prereleaseCompare(e[h$3],t[h$3]):-1:1:0}}e$3.Semver=Semver;function prereleaseCompare(e,t){for(let r=0,s=Math.min(e.length,t.length);r<s;r++)if(e[r]!==t[r]){let s=e[r].match(m$3);let i=t[r].match(m$3);return s&&!i?-1:i&&!s?1:s&&i?parseInt(e[r],10)>parseInt(t[r],10)?1:-1:e[r]>t[r]?1:-1}return e.length===t.length?0:e.length>t.length?1:-1}const c$3=0;const u$3=1;const v$3=2;const l$3=3;const S$3=Symbol("type");const g$3=Symbol("version");class SemverRange{constructor(e){if("*"===e||""===e){this[S$3]=c$3;return}let r=e.match(t$3);if(r){r[1]&&(e=e.substr(1));if(void 0===r[3]){this[g$3]=new Semver(e+".0.0");this[S$3]=u$3;}else {this[g$3]=new Semver(e+".0");"^"===r[1]&&"0"!==r[2]?this[S$3]=u$3:this[S$3]=v$3;}this[g$3][h$3]=this[g$3][h$3]||[];}else if(e.startsWith("^^")){this[g$3]=new Semver(e.substr(2));this[S$3]=u$3;}else if("^"===e[0]){this[g$3]=new Semver(e.substr(1));0===this[g$3][s$2]?0===this[g$3][i$3]?this[S$3]=l$3:this[S$3]=v$3:this[S$3]=u$3;}else if("~"===e[0]){this[g$3]=new Semver(e.substr(1));this[S$3]=v$3;}else {this[g$3]=new Semver(e);this[S$3]=l$3;}this[g$3][o$4]&&this[S$3]!==l$3&&(this[S$3]=l$3);}get isExact(){return this[S$3]===l$3}get isExactSemver(){return this[S$3]===l$3&&void 0===this.version[o$4]}get isExactTag(){return this[S$3]===l$3&&void 0!==this.version[o$4]}get isStable(){return this[S$3]===v$3}get isMajor(){return this[S$3]===u$3}get isWildcard(){return this[S$3]===c$3}get type(){switch(this[S$3]){case c$3:return "wildcard";case u$3:return "major";case v$3:return "stable";case l$3:return "exact"}}get version(){return this[g$3]}gt(e){return 1===SemverRange.compare(this,e)}lt(e){return -1===SemverRange.compare(this,e)}eq(e){return 0===SemverRange.compare(this,e)}has(e,t=false){e instanceof Semver||(e=new Semver(e));return this[S$3]===c$3?t||!e[h$3]&&!e[o$4]:this[S$3]===l$3?this[g$3].eq(e):!e[o$4]&&(this[g$3][s$2]===e[s$2]&&(!(this[S$3]===u$3?this[g$3][i$3]>e[i$3]:this[g$3][i$3]!==e[i$3])&&((this[S$3]===u$3&&this[g$3][i$3]!==e[i$3]||!(this[g$3][n$3]>e[n$3]))&&(void 0===e[h$3]||0===e[h$3].length||(void 0===this[g$3][h$3]||0===this[g$3][h$3].length?t:(false!==t||this[g$3][i$3]===e[i$3]&&this[g$3][n$3]===e[n$3])&&1!==prereleaseCompare(this[g$3][h$3],e[h$3]))))))}contains(e){e instanceof SemverRange||(e=new SemverRange(e));return this[S$3]===c$3||e[S$3]!==c$3&&(e[S$3]>=this[S$3]&&this.has(e[g$3],true))}intersect(e){e instanceof SemverRange||(e=new SemverRange(e));if(this[S$3]===c$3&&e[S$3]===c$3)return this;if(this[S$3]===c$3)return e;if(e[S$3]===c$3)return this;if(this[S$3]===l$3)return e.has(this[g$3],true)?this:void 0;if(e[S$3]===l$3)return this.has(e[g$3],true)?e:void 0;let t,r,s;if(e[g$3].gt(this[g$3])){t=e;r=this;s=true;}else {t=this;r=e;s=false;}if(!r.has(t[g$3],true))return;if(r[S$3]===u$3)return s?e:this;let i=new SemverRange(t[g$3].toString());i[S$3]=v$3;return i}bestMatch(e,t=false){let r;e.forEach((e=>{e instanceof Semver||(e=new Semver(e));this.has(e,t)&&(r?1===Semver.compare(e,r)&&(r=e):r=e);}));return r}toString(){let e=this[g$3];switch(this[S$3]){case c$3:return "*";case u$3:return 0===e[s$2]&&0===e[i$3]&&0===e[n$3]?"0":e[h$3]&&0===e[h$3].length&&0===e[n$3]?"^"+e[s$2]+"."+e[i$3]:"^"+e.toString();case v$3:return e[h$3]&&0===e[h$3].length&&0===e[n$3]||0===e[s$2]&&0===e[i$3]?e[s$2]+"."+e[i$3]:"~"+e.toString();case l$3:return e.toString()}}static match(e,t,r=false){t instanceof Semver||(t=new Semver(t));return t.matches(e,r)}static isValid(e){let t=new SemverRange(e);return t[S$3]!==l$3||void 0===t[g$3][o$4]}static compare(e,t){e instanceof SemverRange||(e=new SemverRange(e));t instanceof SemverRange||(t=new SemverRange(t));if(e[S$3]===c$3&&t[S$3]===c$3)return 0;if(e[S$3]===c$3)return 1;if(t[S$3]===c$3)return -1;let r=Semver.compare(e[g$3],t[g$3]);return 0!==r?r:e[S$3]===t[S$3]?0:e[S$3]>t[S$3]?1:-1}}e$3.SemverRange=SemverRange;

function unimplemented(e){throw new Error("Node.js process "+e+" is not supported by JSPM core outside of Node.js")}var e$2=[];var n$2=false;var r$2;var t$2=-1;function cleanUpNextTick(){if(n$2&&r$2){n$2=false;r$2.length?e$2=r$2.concat(e$2):t$2=-1;e$2.length&&drainQueue();}}function drainQueue(){if(!n$2){var a=setTimeout(cleanUpNextTick,0);n$2=true;var o=e$2.length;while(o){r$2=e$2;e$2=[];while(++t$2<o)r$2&&r$2[t$2].run();t$2=-1;o=e$2.length;}r$2=null;n$2=false;clearTimeout(a);}}function nextTick(r){var t=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];e$2.push(new Item(r,t));1!==e$2.length||n$2||setTimeout(drainQueue,0);}function Item(e,n){this.fun=e;this.array=n;}Item.prototype.run=function(){this.fun.apply(null,this.array);};var a$2="browser";var o$3="x64";var i$2="browser";var s$1={PATH:"/usr/bin",LANG:navigator.language+".UTF-8",PWD:"/",HOME:"/home",TMP:"/tmp"};var v$2=["/usr/bin/node"];var l$2=[];var u$2="v16.8.0";var c$2={};var emitWarning=function(e,n){console.warn((n?n+": ":"")+e);};var binding=function(e){unimplemented("binding");};var umask=function(e){return 0};var cwd=function(){return "/"};var chdir=function(e){};var d$2={name:"node",sourceUrl:"",headersUrl:"",libUrl:""};function noop(){}var p$2=noop;var f$3=[];function _linkedBinding(e){unimplemented("_linkedBinding");}var g$2={};var m$2=false;var h$2={};function dlopen(e){unimplemented("dlopen");}function _getActiveRequests(){return []}function _getActiveHandles(){return []}var _$2=noop;var b$2=noop;var cpuUsage=function(){return {}};var w$2=cpuUsage;var k$2=cpuUsage;var x$2=noop;var U$2=noop;var A$2=noop;var E$3={};function assert(e,n){if(!e)throw new Error(n||"assertion error")}var C$3={inspector:false,debug:false,uv:false,ipv6:false,tls_alpn:false,tls_sni:false,tls_ocsp:false,tls:false,cached_builtins:true};var T$2=noop;var y$2=noop;function hasUncaughtExceptionCaptureCallback(){return false}var L$2=noop;var P$2=noop;var B$3=noop;var I$3=noop;var N$2=noop;var M$2=void 0;var H$1=void 0;var D$2=void 0;var S$2=noop;var q$1=2;var R$2=1;var Q$2="/bin/usr/node";var j$2=9229;var F$1="node";var O$2=[];var W$2=noop;var G$1={now:"undefined"!==typeof performance?performance.now.bind(performance):void 0,timing:"undefined"!==typeof performance?performance.timing:void 0};if(void 0===G$1.now){var J$1=Date.now();G$1.timing&&G$1.timing.navigationStart&&(J$1=G$1.timing.navigationStart);G$1.now=()=>Date.now()-J$1;}function uptime(){return G$1.now()/1e3}var z$2=1e9;function hrtime(e){var n=Math.floor(.001*(Date.now()-G$1.now()));var r=.001*G$1.now();var t=Math.floor(r)+n;var a=Math.floor(r%1*1e9);if(e){t-=e[0];a-=e[1];if(a<0){t--;a+=z$2;}}return [t,a]}hrtime.bigint=function(e){var n=hrtime(e);return "undefined"===typeof BigInt?n[0]*z$2+n[1]:BigInt(n[0]*z$2)+BigInt(n[1])};var K$1=10;var V$1={};var X$1=0;function on(){return oe$1}var Y$1=on;var Z$1=on;var $$2=on;var ee$1=on;var ne$1=on;var re$1=noop;var te$1=on;var ae$1=on;function listeners(e){return []}var oe$1={version:u$2,versions:c$2,arch:o$3,platform:i$2,release:d$2,_rawDebug:p$2,moduleLoadList:f$3,binding:binding,_linkedBinding:_linkedBinding,_events:V$1,_eventsCount:X$1,_maxListeners:K$1,on:on,addListener:Y$1,once:Z$1,off:$$2,removeListener:ee$1,removeAllListeners:ne$1,emit:re$1,prependListener:te$1,prependOnceListener:ae$1,listeners:listeners,domain:g$2,_exiting:m$2,config:h$2,dlopen:dlopen,uptime:uptime,_getActiveRequests:_getActiveRequests,_getActiveHandles:_getActiveHandles,reallyExit:_$2,_kill:b$2,cpuUsage:cpuUsage,resourceUsage:w$2,memoryUsage:k$2,kill:x$2,exit:U$2,openStdin:A$2,allowedNodeEnvironmentFlags:E$3,assert:assert,features:C$3,_fatalExceptions:T$2,setUncaughtExceptionCaptureCallback:y$2,hasUncaughtExceptionCaptureCallback:hasUncaughtExceptionCaptureCallback,emitWarning:emitWarning,nextTick:nextTick,_tickCallback:L$2,_debugProcess:P$2,_debugEnd:B$3,_startProfilerIdleNotifier:I$3,_stopProfilerIdleNotifier:N$2,stdout:M$2,stdin:D$2,stderr:H$1,abort:S$2,umask:umask,chdir:chdir,cwd:cwd,env:s$1,title:a$2,argv:v$2,execArgv:l$2,pid:q$1,ppid:R$2,execPath:Q$2,debugPort:j$2,hrtime:hrtime,argv0:F$1,_preload_modules:O$2,setSourceMapsEnabled:W$2};

var r$1="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var t$1={};var n$1=oe$1;t$1=t$1=SemVer;var o$2;o$2="object"===typeof n$1&&n$1.env&&n$1.env.NODE_DEBUG&&/\bsemver\b/i.test(n$1.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER");console.log.apply(console,e);}:function(){};t$1.SEMVER_SPEC_VERSION="2.0.0";var a$1=256;var i$1=Number.MAX_SAFE_INTEGER||9007199254740991;var s=16;var p$1=t$1.re=[];var c$1=t$1.src=[];var l$1=t$1.tokens={};var E$2=0;function tok(e){l$1[e]=E$2++;}tok("NUMERICIDENTIFIER");c$1[l$1.NUMERICIDENTIFIER]="0|[1-9]\\d*";tok("NUMERICIDENTIFIERLOOSE");c$1[l$1.NUMERICIDENTIFIERLOOSE]="[0-9]+";tok("NONNUMERICIDENTIFIER");c$1[l$1.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";tok("MAINVERSION");c$1[l$1.MAINVERSION]="("+c$1[l$1.NUMERICIDENTIFIER]+")\\."+"("+c$1[l$1.NUMERICIDENTIFIER]+")\\."+"("+c$1[l$1.NUMERICIDENTIFIER]+")";tok("MAINVERSIONLOOSE");c$1[l$1.MAINVERSIONLOOSE]="("+c$1[l$1.NUMERICIDENTIFIERLOOSE]+")\\."+"("+c$1[l$1.NUMERICIDENTIFIERLOOSE]+")\\."+"("+c$1[l$1.NUMERICIDENTIFIERLOOSE]+")";tok("PRERELEASEIDENTIFIER");c$1[l$1.PRERELEASEIDENTIFIER]="(?:"+c$1[l$1.NUMERICIDENTIFIER]+"|"+c$1[l$1.NONNUMERICIDENTIFIER]+")";tok("PRERELEASEIDENTIFIERLOOSE");c$1[l$1.PRERELEASEIDENTIFIERLOOSE]="(?:"+c$1[l$1.NUMERICIDENTIFIERLOOSE]+"|"+c$1[l$1.NONNUMERICIDENTIFIER]+")";tok("PRERELEASE");c$1[l$1.PRERELEASE]="(?:-("+c$1[l$1.PRERELEASEIDENTIFIER]+"(?:\\."+c$1[l$1.PRERELEASEIDENTIFIER]+")*))";tok("PRERELEASELOOSE");c$1[l$1.PRERELEASELOOSE]="(?:-?("+c$1[l$1.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+c$1[l$1.PRERELEASEIDENTIFIERLOOSE]+")*))";tok("BUILDIDENTIFIER");c$1[l$1.BUILDIDENTIFIER]="[0-9A-Za-z-]+";tok("BUILD");c$1[l$1.BUILD]="(?:\\+("+c$1[l$1.BUILDIDENTIFIER]+"(?:\\."+c$1[l$1.BUILDIDENTIFIER]+")*))";tok("FULL");tok("FULLPLAIN");c$1[l$1.FULLPLAIN]="v?"+c$1[l$1.MAINVERSION]+c$1[l$1.PRERELEASE]+"?"+c$1[l$1.BUILD]+"?";c$1[l$1.FULL]="^"+c$1[l$1.FULLPLAIN]+"$";tok("LOOSEPLAIN");c$1[l$1.LOOSEPLAIN]="[v=\\s]*"+c$1[l$1.MAINVERSIONLOOSE]+c$1[l$1.PRERELEASELOOSE]+"?"+c$1[l$1.BUILD]+"?";tok("LOOSE");c$1[l$1.LOOSE]="^"+c$1[l$1.LOOSEPLAIN]+"$";tok("GTLT");c$1[l$1.GTLT]="((?:<|>)?=?)";tok("XRANGEIDENTIFIERLOOSE");c$1[l$1.XRANGEIDENTIFIERLOOSE]=c$1[l$1.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*";tok("XRANGEIDENTIFIER");c$1[l$1.XRANGEIDENTIFIER]=c$1[l$1.NUMERICIDENTIFIER]+"|x|X|\\*";tok("XRANGEPLAIN");c$1[l$1.XRANGEPLAIN]="[v=\\s]*("+c$1[l$1.XRANGEIDENTIFIER]+")"+"(?:\\.("+c$1[l$1.XRANGEIDENTIFIER]+")"+"(?:\\.("+c$1[l$1.XRANGEIDENTIFIER]+")"+"(?:"+c$1[l$1.PRERELEASE]+")?"+c$1[l$1.BUILD]+"?"+")?)?";tok("XRANGEPLAINLOOSE");c$1[l$1.XRANGEPLAINLOOSE]="[v=\\s]*("+c$1[l$1.XRANGEIDENTIFIERLOOSE]+")"+"(?:\\.("+c$1[l$1.XRANGEIDENTIFIERLOOSE]+")"+"(?:\\.("+c$1[l$1.XRANGEIDENTIFIERLOOSE]+")"+"(?:"+c$1[l$1.PRERELEASELOOSE]+")?"+c$1[l$1.BUILD]+"?"+")?)?";tok("XRANGE");c$1[l$1.XRANGE]="^"+c$1[l$1.GTLT]+"\\s*"+c$1[l$1.XRANGEPLAIN]+"$";tok("XRANGELOOSE");c$1[l$1.XRANGELOOSE]="^"+c$1[l$1.GTLT]+"\\s*"+c$1[l$1.XRANGEPLAINLOOSE]+"$";tok("COERCE");c$1[l$1.COERCE]="(^|[^\\d])"+"(\\d{1,"+s+"})"+"(?:\\.(\\d{1,"+s+"}))?"+"(?:\\.(\\d{1,"+s+"}))?"+"(?:$|[^\\d])";tok("COERCERTL");p$1[l$1.COERCERTL]=new RegExp(c$1[l$1.COERCE],"g");tok("LONETILDE");c$1[l$1.LONETILDE]="(?:~>?)";tok("TILDETRIM");c$1[l$1.TILDETRIM]="(\\s*)"+c$1[l$1.LONETILDE]+"\\s+";p$1[l$1.TILDETRIM]=new RegExp(c$1[l$1.TILDETRIM],"g");var u$1="$1~";tok("TILDE");c$1[l$1.TILDE]="^"+c$1[l$1.LONETILDE]+c$1[l$1.XRANGEPLAIN]+"$";tok("TILDELOOSE");c$1[l$1.TILDELOOSE]="^"+c$1[l$1.LONETILDE]+c$1[l$1.XRANGEPLAINLOOSE]+"$";tok("LONECARET");c$1[l$1.LONECARET]="(?:\\^)";tok("CARETTRIM");c$1[l$1.CARETTRIM]="(\\s*)"+c$1[l$1.LONECARET]+"\\s+";p$1[l$1.CARETTRIM]=new RegExp(c$1[l$1.CARETTRIM],"g");var f$2="$1^";tok("CARET");c$1[l$1.CARET]="^"+c$1[l$1.LONECARET]+c$1[l$1.XRANGEPLAIN]+"$";tok("CARETLOOSE");c$1[l$1.CARETLOOSE]="^"+c$1[l$1.LONECARET]+c$1[l$1.XRANGEPLAINLOOSE]+"$";tok("COMPARATORLOOSE");c$1[l$1.COMPARATORLOOSE]="^"+c$1[l$1.GTLT]+"\\s*("+c$1[l$1.LOOSEPLAIN]+")$|^$";tok("COMPARATOR");c$1[l$1.COMPARATOR]="^"+c$1[l$1.GTLT]+"\\s*("+c$1[l$1.FULLPLAIN]+")$|^$";tok("COMPARATORTRIM");c$1[l$1.COMPARATORTRIM]="(\\s*)"+c$1[l$1.GTLT]+"\\s*("+c$1[l$1.LOOSEPLAIN]+"|"+c$1[l$1.XRANGEPLAIN]+")";p$1[l$1.COMPARATORTRIM]=new RegExp(c$1[l$1.COMPARATORTRIM],"g");var h$1="$1$2$3";tok("HYPHENRANGE");c$1[l$1.HYPHENRANGE]="^\\s*("+c$1[l$1.XRANGEPLAIN]+")"+"\\s+-\\s+"+"("+c$1[l$1.XRANGEPLAIN]+")"+"\\s*$";tok("HYPHENRANGELOOSE");c$1[l$1.HYPHENRANGELOOSE]="^\\s*("+c$1[l$1.XRANGEPLAINLOOSE]+")"+"\\s+-\\s+"+"("+c$1[l$1.XRANGEPLAINLOOSE]+")"+"\\s*$";tok("STAR");c$1[l$1.STAR]="(<|>)?=?\\s*\\*";for(var m$1=0;m$1<E$2;m$1++){o$2(m$1,c$1[m$1]);p$1[m$1]||(p$1[m$1]=new RegExp(c$1[m$1]));}t$1.parse=parse$1;function parse$1(e,r){r&&"object"===typeof r||(r={loose:!!r,includePrerelease:false});if(e instanceof SemVer)return e;if("string"!==typeof e)return null;if(e.length>a$1)return null;var t=r.loose?p$1[l$1.LOOSE]:p$1[l$1.FULL];if(!t.test(e))return null;try{return new SemVer(e,r)}catch(e){return null}}t$1.valid=valid;function valid(e,r){var t=parse$1(e,r);return t?t.version:null}t$1.clean=clean;function clean(e,r){var t=parse$1(e.trim().replace(/^[=v]+/,""),r);return t?t.version:null}t$1.SemVer=SemVer;function SemVer(e,t){t&&"object"===typeof t||(t={loose:!!t,includePrerelease:false});if(e instanceof SemVer){if(e.loose===t.loose)return e;e=e.version;}else if("string"!==typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>a$1)throw new TypeError("version is longer than "+a$1+" characters");if(!((this||r$1)instanceof SemVer))return new SemVer(e,t);o$2("SemVer",e,t);(this||r$1).options=t;(this||r$1).loose=!!t.loose;var n=e.trim().match(t.loose?p$1[l$1.LOOSE]:p$1[l$1.FULL]);if(!n)throw new TypeError("Invalid Version: "+e);(this||r$1).raw=e;(this||r$1).major=+n[1];(this||r$1).minor=+n[2];(this||r$1).patch=+n[3];if((this||r$1).major>i$1||(this||r$1).major<0)throw new TypeError("Invalid major version");if((this||r$1).minor>i$1||(this||r$1).minor<0)throw new TypeError("Invalid minor version");if((this||r$1).patch>i$1||(this||r$1).patch<0)throw new TypeError("Invalid patch version");n[4]?(this||r$1).prerelease=n[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var r=+e;if(r>=0&&r<i$1)return r}return e})):(this||r$1).prerelease=[];(this||r$1).build=n[5]?n[5].split("."):[];this.format();}SemVer.prototype.format=function(){(this||r$1).version=(this||r$1).major+"."+(this||r$1).minor+"."+(this||r$1).patch;(this||r$1).prerelease.length&&((this||r$1).version+="-"+(this||r$1).prerelease.join("."));return (this||r$1).version};SemVer.prototype.toString=function(){return (this||r$1).version};SemVer.prototype.compare=function(e){o$2("SemVer.compare",(this||r$1).version,(this||r$1).options,e);e instanceof SemVer||(e=new SemVer(e,(this||r$1).options));return this.compareMain(e)||this.comparePre(e)};SemVer.prototype.compareMain=function(e){e instanceof SemVer||(e=new SemVer(e,(this||r$1).options));return compareIdentifiers((this||r$1).major,e.major)||compareIdentifiers((this||r$1).minor,e.minor)||compareIdentifiers((this||r$1).patch,e.patch)};SemVer.prototype.comparePre=function(e){e instanceof SemVer||(e=new SemVer(e,(this||r$1).options));if((this||r$1).prerelease.length&&!e.prerelease.length)return -1;if(!(this||r$1).prerelease.length&&e.prerelease.length)return 1;if(!(this||r$1).prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=(this||r$1).prerelease[t];var a=e.prerelease[t];o$2("prerelease compare",t,n,a);if(void 0===n&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===n)return -1;if(n!==a)return compareIdentifiers(n,a)}while(++t)};SemVer.prototype.compareBuild=function(e){e instanceof SemVer||(e=new SemVer(e,(this||r$1).options));var t=0;do{var n=(this||r$1).build[t];var a=e.build[t];o$2("prerelease compare",t,n,a);if(void 0===n&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===n)return -1;if(n!==a)return compareIdentifiers(n,a)}while(++t)};SemVer.prototype.inc=function(e,t){switch(e){case"premajor":(this||r$1).prerelease.length=0;(this||r$1).patch=0;(this||r$1).minor=0;(this||r$1).major++;this.inc("pre",t);break;case"preminor":(this||r$1).prerelease.length=0;(this||r$1).patch=0;(this||r$1).minor++;this.inc("pre",t);break;case"prepatch":(this||r$1).prerelease.length=0;this.inc("patch",t);this.inc("pre",t);break;case"prerelease":0===(this||r$1).prerelease.length&&this.inc("patch",t);this.inc("pre",t);break;case"major":0===(this||r$1).minor&&0===(this||r$1).patch&&0!==(this||r$1).prerelease.length||(this||r$1).major++;(this||r$1).minor=0;(this||r$1).patch=0;(this||r$1).prerelease=[];break;case"minor":0===(this||r$1).patch&&0!==(this||r$1).prerelease.length||(this||r$1).minor++;(this||r$1).patch=0;(this||r$1).prerelease=[];break;case"patch":0===(this||r$1).prerelease.length&&(this||r$1).patch++;(this||r$1).prerelease=[];break;case"pre":if(0===(this||r$1).prerelease.length)(this||r$1).prerelease=[0];else {var n=(this||r$1).prerelease.length;while(--n>=0)if("number"===typeof(this||r$1).prerelease[n]){(this||r$1).prerelease[n]++;n=-2;}-1===n&&(this||r$1).prerelease.push(0);}t&&((this||r$1).prerelease[0]===t?isNaN((this||r$1).prerelease[1])&&((this||r$1).prerelease=[t,0]):(this||r$1).prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}this.format();(this||r$1).raw=(this||r$1).version;return this||r$1};t$1.inc=inc;function inc(e,r,t,n){if("string"===typeof t){n=t;t=void 0;}try{return new SemVer(e,t).inc(r,n).version}catch(e){return null}}t$1.diff=diff;function diff(e,r){if(eq(e,r))return null;var t=parse$1(e);var n=parse$1(r);var o="";if(t.prerelease.length||n.prerelease.length){o="pre";var a="prerelease";}for(var i in t)if(("major"===i||"minor"===i||"patch"===i)&&t[i]!==n[i])return o+i;return a}t$1.compareIdentifiers=compareIdentifiers;var R$1=/^[0-9]+$/;function compareIdentifiers(e,r){var t=R$1.test(e);var n=R$1.test(r);if(t&&n){e=+e;r=+r;}return e===r?0:t&&!n?-1:n&&!t?1:e<r?-1:1}t$1.rcompareIdentifiers=rcompareIdentifiers;function rcompareIdentifiers(e,r){return compareIdentifiers(r,e)}t$1.major=major;function major(e,r){return new SemVer(e,r).major}t$1.minor=minor;function minor(e,r){return new SemVer(e,r).minor}t$1.patch=patch;function patch(e,r){return new SemVer(e,r).patch}t$1.compare=compare;function compare(e,r,t){return new SemVer(e,t).compare(new SemVer(r,t))}t$1.compareLoose=compareLoose;function compareLoose(e,r){return compare(e,r,true)}t$1.compareBuild=compareBuild;function compareBuild(e,r,t){var n=new SemVer(e,t);var o=new SemVer(r,t);return n.compare(o)||n.compareBuild(o)}t$1.rcompare=rcompare;function rcompare(e,r,t){return compare(r,e,t)}t$1.sort=sort;function sort(e,r){return e.sort((function(e,n){return t$1.compareBuild(e,n,r)}))}t$1.rsort=rsort;function rsort(e,r){return e.sort((function(e,n){return t$1.compareBuild(n,e,r)}))}t$1.gt=gt;function gt(e,r,t){return compare(e,r,t)>0}t$1.lt=lt;function lt(e,r,t){return compare(e,r,t)<0}t$1.eq=eq;function eq(e,r,t){return 0===compare(e,r,t)}t$1.neq=neq;function neq(e,r,t){return 0!==compare(e,r,t)}t$1.gte=gte;function gte(e,r,t){return compare(e,r,t)>=0}t$1.lte=lte;function lte(e,r,t){return compare(e,r,t)<=0}t$1.cmp=cmp;function cmp(e,r,t,n){switch(r){case"===":"object"===typeof e&&(e=e.version);"object"===typeof t&&(t=t.version);return e===t;case"!==":"object"===typeof e&&(e=e.version);"object"===typeof t&&(t=t.version);return e!==t;case"":case"=":case"==":return eq(e,t,n);case"!=":return neq(e,t,n);case">":return gt(e,t,n);case">=":return gte(e,t,n);case"<":return lt(e,t,n);case"<=":return lte(e,t,n);default:throw new TypeError("Invalid operator: "+r)}}t$1.Comparator=Comparator;function Comparator(e,t){t&&"object"===typeof t||(t={loose:!!t,includePrerelease:false});if(e instanceof Comparator){if(e.loose===!!t.loose)return e;e=e.value;}if(!((this||r$1)instanceof Comparator))return new Comparator(e,t);o$2("comparator",e,t);(this||r$1).options=t;(this||r$1).loose=!!t.loose;this.parse(e);(this||r$1).semver===I$2?(this||r$1).value="":(this||r$1).value=(this||r$1).operator+(this||r$1).semver.version;o$2("comp",this||r$1);}var I$2={};Comparator.prototype.parse=function(e){var t=(this||r$1).options.loose?p$1[l$1.COMPARATORLOOSE]:p$1[l$1.COMPARATOR];var n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);(this||r$1).operator=void 0!==n[1]?n[1]:"";"="===(this||r$1).operator&&((this||r$1).operator="");n[2]?(this||r$1).semver=new SemVer(n[2],(this||r$1).options.loose):(this||r$1).semver=I$2;};Comparator.prototype.toString=function(){return (this||r$1).value};Comparator.prototype.test=function(e){o$2("Comparator.test",e,(this||r$1).options.loose);if((this||r$1).semver===I$2||e===I$2)return true;if("string"===typeof e)try{e=new SemVer(e,(this||r$1).options);}catch(e){return false}return cmp(e,(this||r$1).operator,(this||r$1).semver,(this||r$1).options)};Comparator.prototype.intersects=function(e,t){if(!(e instanceof Comparator))throw new TypeError("a Comparator is required");t&&"object"===typeof t||(t={loose:!!t,includePrerelease:false});var n;if(""===(this||r$1).operator){if(""===(this||r$1).value)return true;n=new Range(e.value,t);return satisfies((this||r$1).value,n,t)}if(""===e.operator){if(""===e.value)return true;n=new Range((this||r$1).value,t);return satisfies(e.semver,n,t)}var o=(">="===(this||r$1).operator||">"===(this||r$1).operator)&&(">="===e.operator||">"===e.operator);var a=("<="===(this||r$1).operator||"<"===(this||r$1).operator)&&("<="===e.operator||"<"===e.operator);var i=(this||r$1).semver.version===e.semver.version;var s=(">="===(this||r$1).operator||"<="===(this||r$1).operator)&&(">="===e.operator||"<="===e.operator);var p=cmp((this||r$1).semver,"<",e.semver,t)&&(">="===(this||r$1).operator||">"===(this||r$1).operator)&&("<="===e.operator||"<"===e.operator);var c=cmp((this||r$1).semver,">",e.semver,t)&&("<="===(this||r$1).operator||"<"===(this||r$1).operator)&&(">="===e.operator||">"===e.operator);return o||a||i&&s||p||c};t$1.Range=Range;function Range(e,t){t&&"object"===typeof t||(t={loose:!!t,includePrerelease:false});if(e instanceof Range)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Range(e.raw,t);if(e instanceof Comparator)return new Range(e.value,t);if(!((this||r$1)instanceof Range))return new Range(e,t);(this||r$1).options=t;(this||r$1).loose=!!t.loose;(this||r$1).includePrerelease=!!t.includePrerelease;(this||r$1).raw=e;(this||r$1).set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this||r$1).filter((function(e){return e.length}));if(!(this||r$1).set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format();}Range.prototype.format=function(){(this||r$1).range=(this||r$1).set.map((function(e){return e.join(" ").trim()})).join("||").trim();return (this||r$1).range};Range.prototype.toString=function(){return (this||r$1).range};Range.prototype.parseRange=function(e){var t=(this||r$1).options.loose;e=e.trim();var n=t?p$1[l$1.HYPHENRANGELOOSE]:p$1[l$1.HYPHENRANGE];e=e.replace(n,hyphenReplace);o$2("hyphen replace",e);e=e.replace(p$1[l$1.COMPARATORTRIM],h$1);o$2("comparator trim",e,p$1[l$1.COMPARATORTRIM]);e=e.replace(p$1[l$1.TILDETRIM],u$1);e=e.replace(p$1[l$1.CARETTRIM],f$2);e=e.split(/\s+/).join(" ");var a=t?p$1[l$1.COMPARATORLOOSE]:p$1[l$1.COMPARATOR];var i=e.split(" ").map((function(e){return parseComparator(e,(this||r$1).options)}),this||r$1).join(" ").split(/\s+/);(this||r$1).options.loose&&(i=i.filter((function(e){return !!e.match(a)})));i=i.map((function(e){return new Comparator(e,(this||r$1).options)}),this||r$1);return i};Range.prototype.intersects=function(e,t){if(!(e instanceof Range))throw new TypeError("a Range is required");return (this||r$1).set.some((function(r){return isSatisfiable(r,t)&&e.set.some((function(e){return isSatisfiable(e,t)&&r.every((function(r){return e.every((function(e){return r.intersects(e,t)}))}))}))}))};function isSatisfiable(e,r){var t=true;var n=e.slice();var o=n.pop();while(t&&n.length){t=n.every((function(e){return o.intersects(e,r)}));o=n.pop();}return t}t$1.toComparators=toComparators;function toComparators(e,r){return new Range(e,r).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))}function parseComparator(e,r){o$2("comp",e,r);e=replaceCarets(e,r);o$2("caret",e);e=replaceTildes(e,r);o$2("tildes",e);e=replaceXRanges(e,r);o$2("xrange",e);e=replaceStars(e,r);o$2("stars",e);return e}function isX(e){return !e||"x"===e.toLowerCase()||"*"===e}function replaceTildes(e,r){return e.trim().split(/\s+/).map((function(e){return replaceTilde(e,r)})).join(" ")}function replaceTilde(e,r){var t=r.loose?p$1[l$1.TILDELOOSE]:p$1[l$1.TILDE];return e.replace(t,(function(r,t,n,a,i){o$2("tilde",e,r,t,n,a,i);var s;if(isX(t))s="";else if(isX(n))s=">="+t+".0.0 <"+(+t+1)+".0.0";else if(isX(a))s=">="+t+"."+n+".0 <"+t+"."+(+n+1)+".0";else if(i){o$2("replaceTilde pr",i);s=">="+t+"."+n+"."+a+"-"+i+" <"+t+"."+(+n+1)+".0";}else s=">="+t+"."+n+"."+a+" <"+t+"."+(+n+1)+".0";o$2("tilde return",s);return s}))}function replaceCarets(e,r){return e.trim().split(/\s+/).map((function(e){return replaceCaret(e,r)})).join(" ")}function replaceCaret(e,r){o$2("caret",e,r);var t=r.loose?p$1[l$1.CARETLOOSE]:p$1[l$1.CARET];return e.replace(t,(function(r,t,n,a,i){o$2("caret",e,r,t,n,a,i);var s;if(isX(t))s="";else if(isX(n))s=">="+t+".0.0 <"+(+t+1)+".0.0";else if(isX(a))s="0"===t?">="+t+"."+n+".0 <"+t+"."+(+n+1)+".0":">="+t+"."+n+".0 <"+(+t+1)+".0.0";else if(i){o$2("replaceCaret pr",i);s="0"===t?"0"===n?">="+t+"."+n+"."+a+"-"+i+" <"+t+"."+n+"."+(+a+1):">="+t+"."+n+"."+a+"-"+i+" <"+t+"."+(+n+1)+".0":">="+t+"."+n+"."+a+"-"+i+" <"+(+t+1)+".0.0";}else {o$2("no pr");s="0"===t?"0"===n?">="+t+"."+n+"."+a+" <"+t+"."+n+"."+(+a+1):">="+t+"."+n+"."+a+" <"+t+"."+(+n+1)+".0":">="+t+"."+n+"."+a+" <"+(+t+1)+".0.0";}o$2("caret return",s);return s}))}function replaceXRanges(e,r){o$2("replaceXRanges",e,r);return e.split(/\s+/).map((function(e){return replaceXRange(e,r)})).join(" ")}function replaceXRange(e,r){e=e.trim();var t=r.loose?p$1[l$1.XRANGELOOSE]:p$1[l$1.XRANGE];return e.replace(t,(function(t,n,a,i,s,p){o$2("xRange",e,t,n,a,i,s,p);var c=isX(a);var l=c||isX(i);var E=l||isX(s);var u=E;"="===n&&u&&(n="");p=r.includePrerelease?"-0":"";if(c)t=">"===n||"<"===n?"<0.0.0-0":"*";else if(n&&u){l&&(i=0);s=0;if(">"===n){n=">=";if(l){a=+a+1;i=0;s=0;}else {i=+i+1;s=0;}}else if("<="===n){n="<";l?a=+a+1:i=+i+1;}t=n+a+"."+i+"."+s+p;}else l?t=">="+a+".0.0"+p+" <"+(+a+1)+".0.0"+p:E&&(t=">="+a+"."+i+".0"+p+" <"+a+"."+(+i+1)+".0"+p);o$2("xRange return",t);return t}))}function replaceStars(e,r){o$2("replaceStars",e,r);return e.trim().replace(p$1[l$1.STAR],"")}function hyphenReplace(e,r,t,n,o,a,i,s,p,c,l,E,u){r=isX(t)?"":isX(n)?">="+t+".0.0":isX(o)?">="+t+"."+n+".0":">="+r;s=isX(p)?"":isX(c)?"<"+(+p+1)+".0.0":isX(l)?"<"+p+"."+(+c+1)+".0":E?"<="+p+"."+c+"."+l+"-"+E:"<="+s;return (r+" "+s).trim()}Range.prototype.test=function(e){if(!e)return false;if("string"===typeof e)try{e=new SemVer(e,(this||r$1).options);}catch(e){return false}for(var t=0;t<(this||r$1).set.length;t++)if(testSet((this||r$1).set[t],e,(this||r$1).options))return true;return false};function testSet(e,r,t){for(var n=0;n<e.length;n++)if(!e[n].test(r))return false;if(r.prerelease.length&&!t.includePrerelease){for(n=0;n<e.length;n++){o$2(e[n].semver);if(e[n].semver!==I$2&&e[n].semver.prerelease.length>0){var a=e[n].semver;if(a.major===r.major&&a.minor===r.minor&&a.patch===r.patch)return true}}return false}return true}t$1.satisfies=satisfies;function satisfies(e,r,t){try{r=new Range(r,t);}catch(e){return false}return r.test(e)}t$1.maxSatisfying=maxSatisfying;function maxSatisfying(e,r,t){var n=null;var o=null;try{var a=new Range(r,t);}catch(e){return null}e.forEach((function(e){if(a.test(e)&&(!n||-1===o.compare(e))){n=e;o=new SemVer(n,t);}}));return n}t$1.minSatisfying=minSatisfying;function minSatisfying(e,r,t){var n=null;var o=null;try{var a=new Range(r,t);}catch(e){return null}e.forEach((function(e){if(a.test(e)&&(!n||1===o.compare(e))){n=e;o=new SemVer(n,t);}}));return n}t$1.minVersion=minVersion;function minVersion(e,r){e=new Range(e,r);var t=new SemVer("0.0.0");if(e.test(t))return t;t=new SemVer("0.0.0-0");if(e.test(t))return t;t=null;for(var n=0;n<e.set.length;++n){var o=e.set[n];o.forEach((function(e){var r=new SemVer(e.semver.version);switch(e.operator){case">":0===r.prerelease.length?r.patch++:r.prerelease.push(0);r.raw=r.format();case"":case">=":t&&!gt(t,r)||(t=r);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));}return t&&e.test(t)?t:null}t$1.validRange=validRange;function validRange(e,r){try{return new Range(e,r).range||"*"}catch(e){return null}}t$1.ltr=ltr;function ltr(e,r,t){return outside(e,r,"<",t)}t$1.gtr=gtr;function gtr(e,r,t){return outside(e,r,">",t)}t$1.outside=outside;function outside(e,r,t,n){e=new SemVer(e,n);r=new Range(r,n);var o,a,i,s,p;switch(t){case">":o=gt;a=lte;i=lt;s=">";p=">=";break;case"<":o=lt;a=gte;i=gt;s="<";p="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(e,r,n))return false;for(var c=0;c<r.set.length;++c){var l=r.set[c];var E=null;var u=null;l.forEach((function(e){e.semver===I$2&&(e=new Comparator(">=0.0.0"));E=E||e;u=u||e;o(e.semver,E.semver,n)?E=e:i(e.semver,u.semver,n)&&(u=e);}));if(E.operator===s||E.operator===p)return false;if((!u.operator||u.operator===s)&&a(e,u.semver))return false;if(u.operator===p&&i(e,u.semver))return false}return true}t$1.prerelease=prerelease;function prerelease(e,r){var t=parse$1(e,r);return t&&t.prerelease.length?t.prerelease:null}t$1.intersects=intersects;function intersects(e,r,t){e=new Range(e,t);r=new Range(r,t);return e.intersects(r)}t$1.coerce=coerce;function coerce(e,r){if(e instanceof SemVer)return e;"number"===typeof e&&(e=String(e));if("string"!==typeof e)return null;r=r||{};var t=null;if(r.rtl){var n;while((n=p$1[l$1.COERCERTL].exec(e))&&(!t||t.index+t[0].length!==e.length)){t&&n.index+n[0].length===t.index+t[0].length||(t=n);p$1[l$1.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;}p$1[l$1.COERCERTL].lastIndex=-1;}else t=e.match(p$1[l$1.COERCE]);return null===t?null:parse$1(t[2]+"."+(t[3]||"0")+"."+(t[4]||"0"),r)}var v$1=t$1;const O$1=t$1.SEMVER_SPEC_VERSION,L$1=t$1.tokens;const N$1=t$1.re,S$1=t$1.src,T$1=t$1.parse,g$1=t$1.valid,A$1=t$1.clean,d$1=t$1.SemVer,C$2=t$1.inc,w$1=t$1.diff,y$1=t$1.compareIdentifiers,P$1=t$1.rcompareIdentifiers,D$1=t$1.major,V=t$1.minor,M$1=t$1.patch,X=t$1.compare,k$1=t$1.compareLoose,F=t$1.compareBuild,G=t$1.rcompare,j$1=t$1.sort,U$1=t$1.rsort,b$1=t$1.gt,x$1=t$1.lt,$$1=t$1.eq,B$2=t$1.neq,q=t$1.gte,H=t$1.lte,_$1=t$1.cmp,Y=t$1.Comparator,z$1=t$1.Range,Z=t$1.toComparators,J=t$1.satisfies,K=t$1.maxSatisfying,Q$1=t$1.minSatisfying,W$1=t$1.minVersion,ee=t$1.validRange,re=t$1.ltr,te=t$1.gtr,ne=t$1.outside,oe=t$1.prerelease,ae=t$1.intersects,ie=t$1.coerce;

var e$1 = /*#__PURE__*/Object.freeze({
     __proto__: null,
     'default': v$1,
     Comparator: Y,
     Range: z$1,
     SEMVER_SPEC_VERSION: O$1,
     SemVer: d$1,
     clean: A$1,
     cmp: _$1,
     coerce: ie,
     compare: X,
     compareBuild: F,
     compareIdentifiers: y$1,
     compareLoose: k$1,
     diff: w$1,
     eq: $$1,
     gt: b$1,
     gte: q,
     gtr: te,
     inc: C$2,
     intersects: ae,
     lt: x$1,
     lte: H,
     ltr: re,
     major: D$1,
     maxSatisfying: K,
     minSatisfying: Q$1,
     minVersion: W$1,
     minor: V,
     neq: B$2,
     outside: ne,
     parse: T$1,
     patch: M$1,
     prerelease: oe,
     rcompare: G,
     rcompareIdentifiers: P$1,
     re: N$1,
     rsort: U$1,
     satisfies: J,
     sort: j$1,
     src: S$1,
     toComparators: Z,
     tokens: L$1,
     valid: g$1,
     validRange: ee
});

var n="default"in e$1?v$1:e$1;var r={};const i=n;const{Semver:o$1,SemverRange:a}=e$3;r=function nodeRangeToSemverRange(e){let t=i.validRange(e);if(!t)return new a(e);if("*"===t)return new a(t);try{let t=new a(e);if(!t.version.tag)return t}catch(e){if("ENOTSEMVER"!==e.code)throw e}let n;for(let e of t.split("||")){let t,r,i,f;for(let n of e.split(" ")){let e="<"===n[0];let a=">"===n[0];if(!e&&!a){t=n;i=true;break}let l="="===n[1];if(a){if(!e){let e="="===n[1];let t=new o$1(n.substr(1+e));if(!r||r.lt(t)){r=t;f=e;}}}else {let e=new o$1(n.substr(1+l));if(!t||t.gt(e)){t=e;i=l;}}}if(!t){n=new a("*");continue}if(r&&t&&r.gt(t)){let e=new a(r.toString());n&&(n.contains(e)||!e.gt(n)&&!e.contains(n))||(n=e);continue}let l;if(t){if(i){let e=new a(t.toString());n&&(n.contains(e)||!e.gt(n)&&!e.contains(n))||(n=e);continue}let e=0,o=0,f=0,c="";if(t.pre&&r.major===t.major&&r.minor===t.minor&&r.patch===t.patch){n=new a("~"+r.toString());continue}if(0===t.patch)if(0===t.minor){if(t.major>0){e=t.major-1;c="^";}}else {e=t.major;o=t.minor-1;c="~";}else {e=t.major;o=t.minor;f=0;c="~";}l=new a(0===e&&"^"===c?"0":c+e+"."+o+"."+f);}if(!r){n=l;continue}let c;c=f?new a("^^"+r.toString()):r.pre?new a("^^"+r.major+"."+r.minor+"."+r.patch+"-"+[...r.pre,1].join(".")):new a("^^"+r.major+"."+r.minor+"."+(r.patch+1));let m=l?c.intersect(l)||l:c;n&&(n.contains(m)||!m.gt(n)&&!m.contains(n))||(n=m);}return n};var f$1=r;

let t=[];let o=0;function pushFetchPool(){if(++o>100)return new Promise((o=>t.push(o)))}function popFetchPool(){o--;t.length&&t.shift()();}async function fetch$1(t,o){const e=pushFetchPool();e&&await e;try{return await globalThis.fetch(t,o)}finally{popFetchPool();}}

var e;if("undefined"!==typeof Deno)new URL("file://"+Deno.cwd()+"/");else if("undefined"!==typeof process&&(null===(e=process.versions)||void 0===e?void 0:e.node))new URL("file://"+process.cwd()+"/");else if("undefined"!==typeof document){const e=document.querySelector("base[href]");e?new URL(e.href+(e.href.endsWith("/")?"":"/")):"undefined"!==typeof location&&new URL("../",new URL(location.href));}function matchesRoot(e,t){return e.protocol===t.protocol&&e.host===t.host&&e.port===t.port&&e.username===t.username&&e.password===t.password}function rebase(e,t=new URL("/",e),s=false){"boolean"===typeof s?s=s?"/":"./":s.endsWith("/")||(s+="/");t.search=t.hash="";t.pathname.endsWith("/")||(t.pathname+="/");const r=e.href;const i=t.href;if(r.startsWith(i))return s+r.slice(i.length);if(!matchesRoot(e,t))return e.href;const o=t.pathname;const n=e.pathname;const l=Math.min(o.length,n.length);let c=-1;for(let e=0;e<l;e++){if(o[e]!==n[e])break;"/"===n[e]&&(c=e);}return "../".repeat(o.slice(c+1).split("/").length-1)+n.slice(c+1)+e.search+e.hash}function isURL$1(e){try{if("#"===e[0])return false;new URL(e);}catch{return false}return true}function isPlain$1(e){return !isRelative$1(e)&&!isURL$1(e)}function isRelative$1(e){return e.startsWith("./")||e.startsWith("../")||e.startsWith("/")}function alphabetize(e){const t={};for(const s of Object.keys(e).sort())t[s]=e[s];return t}function replaceTarget(e,t,s){const r=e[t];if("string"===typeof r||null===r){const i=s(r);void 0!==i&&(e[t]=i);}else for(const e of Object.keys(r))replaceTarget(r,e,s);}function mapTarget(e,t){if("string"===typeof e||null===e)return t(e);const s={};for(const r of Object.keys(e))s[r]=mapTarget(e[r],t);return s}function targetEquals(e,t,s){if(null===e||null===t)return e===t;if("string"===typeof e||"string"===typeof t)return "string"===typeof e&&"string"===typeof t&&new URL(e,s).href===new URL(t,s).href;const r=Object.keys(e);const i=Object.keys(t);if(r.length!==i.length)return false;for(let o=0;o<r.length;o++){const n=r[o];const l=i[o];if(n!==l)return false;if(!targetEquals(e[n],t[l],s))return false}return true}class ImportMap{constructor(e,t){this.imports=Object.create(null);this.scopes=Object.create(null);"string"===typeof e&&(e=new URL(e));this.baseUrl=e;t&&this.extend(t,true);}clone(){return new ImportMap(this.baseUrl,this.toJSON())}extend(e,t=false){Object.assign(this.imports,e.imports);if(t)Object.assign(this.scopes,e.scopes);else if(e.scopes)for(const t of Object.keys(e.scopes))Object.assign(this.scopes[t]=this.scopes[t]||Object.create(null),e.scopes[t]);this.rebase(this.baseUrl.href);return this}sort(){this.imports=alphabetize(this.imports);this.scopes=alphabetize(this.scopes);for(const e of Object.keys(this.scopes))this.scopes[e]=alphabetize(this.scopes[e]);}set(e,t,s){if(s){this.scopes[s]=this.scopes[s]||{};this.scopes[s][e]=t;}else this.imports[e]=t;}replace(e,t){const s=e.endsWith("/");if(!isURL$1(e))throw new Error("URL remapping only supports URLs");const r=rebase(new URL(t),this.baseUrl);for(const t of Object.keys(this.imports))replaceTarget(this.imports,t,(t=>{if(null!==t)return s&&t.startsWith(e)||t===e?r+t.slice(e.length):void 0}));for(const t of Object.keys(this.scopes)){const i=this.scopes[t];const o=new URL(t,this.baseUrl).href;if(s&&o.startsWith(e)||o===e){const s=r+o.slice(e.length);delete this.scopes[t];this.scopes[s]=i;}for(const t of Object.keys(i))replaceTarget(i,t,(t=>{if(null!==t)return s&&t.startsWith(e)||t===e?r+t.slice(e.length):void 0}));}return this}combineSubpaths(){}
/**
     * Groups the import map scopes to shared URLs to reduce duplicate mappings.
     *
     * @param baseScope {String | URL}
     *
     * For two given scopes, "https://site.com/x/" and "https://site.com/y/",
     * a single scope will be constructed for "https://site.com/" including
     * their shared mappings.
     *
     * In the case where the scope is on the same origin as the baseUrl, the grouped
     * root will never backtrack below the baseUrl, unless specifying the baseScope
     * option to permit a custom backtracking base.
     *
     */flatten(e=this.baseUrl){"string"===typeof e&&(e=new URL(e.endsWith("/")?e:e+"/"));if(!e.pathname.endsWith("/")){e=new URL(e.href);e.pathname+="/";}for(const t of Object.keys(this.scopes)){const s=this.scopes[t];const r=new URL(t,this.baseUrl);let i;i=r.protocol===this.baseUrl.protocol&&r.hostname===this.baseUrl.hostname&&r.port===this.baseUrl.port?rebase(r.href.startsWith(e.href)?e:r,this.baseUrl):r.protocol+"//"+r.hostname+(r.port?":"+r.port:"")+"/";let o=this.scopes[i]||{};o===s&&(o=null);let n=true;for(const e of Object.keys(s)){const t=s[e];if(targetEquals(this.imports[e],t,this.baseUrl))delete s[e];else if(!o||o[e]&&!targetEquals(o[e],t,this.baseUrl))n=false;else {o[e]=t;replaceTarget(o,e,(e=>rebase(new URL(e,this.baseUrl),this.baseUrl)));delete s[e];this.scopes[i]=alphabetize(o);}}n&&delete this.scopes[t];}return this}rebase(e=this.baseUrl.href,t=false){const s=this.baseUrl;this.baseUrl=new URL(e,this.baseUrl);this.baseUrl.pathname.endsWith("/")||(this.baseUrl.pathname+="/");let r=false;for(const e of Object.keys(this.imports)){replaceTarget(this.imports,e,(e=>{if(null!==e)return rebase(new URL(e,s),this.baseUrl,t)}));if(!isPlain$1(e)){const i=rebase(new URL(e,s),this.baseUrl,t);if(i!==e){r=true;this.imports[i]=this.imports[e];delete this.imports[e];}}}r&&(this.imports=alphabetize(this.imports));let i=false;for(const e of Object.keys(this.scopes)){const r=this.scopes[e];let o=false;for(let e of Object.keys(r)){replaceTarget(r,e,(e=>{if(null!==e)return rebase(new URL(e,s),this.baseUrl,t)}));if(!isPlain$1(e)){const i=rebase(new URL(e,s),this.baseUrl,t);if(i!==e){o=true;r[i]=r[e];delete r[e];}}}o&&(this.scopes[e]=alphabetize(r));const n=rebase(new URL(e,s),this.baseUrl,t);if(e!==n){i=true;delete this.scopes[e];this.scopes[n]=r;}}i&&(this.scopes=alphabetize(this.scopes));return this}setEnv(e){for(const t of Object.keys(this.imports)){const s=this.imports[t];"string"!==typeof s&&null!==s&&(this.imports[t]=resolveConditional(s,e));}for(const t of Object.keys(this.scopes)){const s=this.scopes[t];for(const t of Object.keys(s)){const r=s[t];"string"!==typeof r&&null!==r&&(s[t]=resolveConditional(r,e));}}return this}resolve(e,t=this.baseUrl,s){"string"===typeof t&&(t=new URL(t));let r;if(!isPlain$1(e)){r=new URL(e,t);e=r.href;}const i=getScopeMatches(t,this.scopes,this.baseUrl);for(const[t]of i){let i=getMapMatch(e,this.scopes[t]);!i&&r&&(i=getMapMatch(e=rebase(r,this.baseUrl,true),this.scopes[t])||getMapMatch(e=rebase(r,this.baseUrl,false),this.scopes[t]));if(i){const r=s?resolveConditional(this.scopes[t][i],s):this.scopes[t][i];return mapTarget(r,(t=>null===t?null:new URL(t+e.slice(i.length),this.baseUrl).href))}}let o=getMapMatch(e,this.imports);!o&&r&&(o=getMapMatch(e=rebase(r,this.baseUrl,true),this.imports)||getMapMatch(e=rebase(r,this.baseUrl,false),this.imports));if(o){const t=s?resolveConditional(this.imports[o],s):this.imports[o];return mapTarget(t,(t=>null===t?null:new URL(t+e.slice(o.length),this.baseUrl).href))}return r?r.href:null}toJSON(){const e={};Object.keys(this.imports).length&&(e.imports=this.imports);Object.keys(this.scopes).length&&(e.scopes=this.scopes);return JSON.parse(JSON.stringify(e))}}function getScopeMatches(e,t,s){const r=e.href;let i=Object.keys(t).map((e=>[e,new URL(e,s).href]));i=i.sort((([,e],[,t])=>e.length<t.length?1:-1));return i.filter((([,e])=>e===r||e.endsWith("/")&&r.startsWith(e)))}function getMapMatch(e,t){if(e in t)return e;let s;for(const r of Object.keys(t)){const t=r.endsWith("*");(r.endsWith("/")||t)&&(e.startsWith(t?r.slice(0,-1):r)&&(!s||r.length>s.length)&&(s=r));}return s}function resolveConditional(e,t={}){if("string"===typeof e||null===e)return e;Array.isArray(t)&&(t={include:t});const{include:s=[],exclude:r=[],covers:i=[]}=t;const{resolved:o}=internalResolveConditional(e,{include:s,exclude:r,covers:i},[],[]);return void 0===o?null:o}function internalResolveConditional(e,t,s,r){if("string"===typeof e)return {exhaustive:true,resolved:e};if(null===e)return {exhaustive:true,resolved:e};let{include:i,exclude:o,covers:n}=t;let l={};let c=0;const a=[];for(const t of Object.keys(e)){if(r.includes(t))continue;if(a.includes(t))continue;const h=[t,...s];const{exhaustive:f,resolved:p}=internalResolveConditional(e[t],{include:i,exclude:o,covers:n},h,[...r,...a]);f&&a.push(t);if(void 0!==p&&!o.includes(t)){l[t]=p;c++;}if("default"===t||i.includes(t)||s.includes(t))return {exhaustive:true,resolved:1===c?l[t]:l};if(n.some((e=>e.every((e=>i.includes(e)||s.includes(e)||r.includes(e)||a.includes(e))))))return {exhaustive:true,resolved:l}}return 0===c?{exhaustive:false,resolved:void 0}:{exhaustive:false,resolved:l}}

const A=1===new Uint8Array(new Uint16Array([1]).buffer)[0];function parse(I,g="@"){if(!B$1)return E$1.then((()=>parse(I)));const D=I.length+1,w=(B$1.__heap_base.value||B$1.__heap_base)+4*D-B$1.memory.buffer.byteLength;w>0&&B$1.memory.grow(Math.ceil(w/65536));const L=B$1.sa(D-1);if((A?C$1:Q)(I,new Uint16Array(B$1.memory.buffer,L,D)),!B$1.parse())throw Object.assign(new Error(`Parse error ${g}:${I.slice(0,B$1.e()).split("\n").length}:${B$1.e()-I.lastIndexOf("\n",B$1.e()-1)}`),{idx:B$1.e()});const k=[],o=[];for(;B$1.ri();){const A=B$1.is(),E=B$1.ie(),g=B$1.ai(),D=B$1.id(),w=B$1.ss(),L=B$1.se();let o;B$1.ip()&&(o=J(I.slice(-1===D?A-1:A,-1===D?E+1:E))),k.push({n:o,s:A,e:E,ss:w,se:L,d:D,a:g});}for(;B$1.re();){const A=I.slice(B$1.es(),B$1.ee()),E=A[0];o.push('"'===E||"'"===E?J(A):A);}function J(A){try{return (0,eval)(A)}catch(A){}}return [k,o,!!B$1.f()]}function Q(A,B){const E=A.length;let I=0;for(;I<E;){const E=A.charCodeAt(I);B[I++]=(255&E)<<8|E>>>8;}}function C$1(A,B){const E=A.length;let I=0;for(;I<E;)B[I]=A.charCodeAt(I++);}let B$1;const E$1=WebAssembly.compile((I$1="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","undefined"!=typeof Buffer?Buffer.from(I$1,"base64"):Uint8Array.from(atob(I$1),(A=>A.charCodeAt(0))))).then(WebAssembly.instantiate).then((({exports:A})=>{B$1=A;}));var I$1;

let l;if("undefined"!==typeof Deno){const e=Deno.cwd();l=new URL("file://"+("/"===e[0]?"":"/")+e+"/");}else if("undefined"!==typeof process&&process.versions.node)l=new URL("file://"+process.cwd()+"/");else if("undefined"!==typeof document){const e=document.querySelector("base[href]");e?l=new URL(e.href+(e.href.endsWith("/")?"":"/")):"undefined"!==typeof location&&(l=new URL("../",new URL(location.href)));}function importedFrom(e){return e?` imported from ${e}`:""}function isURL(e){try{if("#"===e[0])return false;new URL(e);}catch{return false}return true}function isPlain(e){return !isRelative(e)&&!isURL(e)}function isRelative(e){return e.startsWith("./")||e.startsWith("../")||e.startsWith("/")}class JspmError extends Error{constructor(e,t){super(e);this.jspmError=true;this.code=t;}}function throwInternalError(...e){throw new Error("Internal Error"+(e.length?" "+e.join(", "):""))}const{SemverRange:c}=e$3;const h=["https","http","data","file","ipfs"];async function parseUrlTarget(e,t,s){var r;const i=t.indexOf(":");if(isRelative(t)||-1!==i&&h.includes(t.slice(0,i))){const i=t.indexOf("|");let n;if(-1===i)n=".";else {n=`./${t.slice(i+1)}`;t=t.slice(0,i);}const a=new URL(t+(t.endsWith("/")?"":"/"),s||l);const o=await e.getPackageBase(a.href);const c=(null===(r=o?await e.getPackageConfig(o):null)||void 0===r?void 0:r.name)||a.pathname.split("/").slice(0,-1).pop();if(!c)throw new JspmError(`Unable to determine an alias for target package ${a.href}`);return {alias:c,target:a,subpath:n}}}async function toPackageTarget(e,t,s){const r=await parseUrlTarget(e,t,s);if(r)return r;const i=t.indexOf(":");const n=t.indexOf("@");if(-1!==t.indexOf(":")&&-1!==n&&n<i)throw new Error("Package aliases not yet supported. PRs welcome.");const a=parsePkg(t);if(!a)throw new JspmError(`Invalid package name ${t}`);let o=a.pkgName;const l=a.pkgName.indexOf("@",1);o=-1!==l?a.pkgName.slice(i+1,l):a.pkgName.slice(i+1);return {alias:o,target:newPackageTarget(a.pkgName,s),subpath:a.subpath}}function newPackageTarget(e,s,r){let i,n,a;const o=e.indexOf(":");if(e.startsWith("./")||e.startsWith("../")||e.startsWith("/")||1===o)return new URL(e,s);i=o<1?"npm":e.substr(0,o);if("file"===i)return new URL(e.slice(i.length+1),s);if("https"===i||"http"===i)return new URL(e);const l=e.lastIndexOf("@");if(l>o+1){n=e.slice(o+1,l);const s=e.slice(l+1);a=r||c.isValid(s)?[new c(s)]:s.split("||").map((e=>f$1(e)));}else if(-1===o&&r){n=r;a=c.isValid(e)?[new c(e)]:e.split("||").map((e=>f$1(e)));}else {n=e.slice(o+1);a=[new c("*")];}-1===o&&-1!==n.indexOf("/")&&"@"!==n[0]&&(i="github");const h=n.split("/").length;if(h>2||1===h&&"@"===n[0])throw new JspmError(`Invalid package target ${e}`);return {registry:i,name:n,ranges:a}}function pkgToStr(e){return `${e.registry?e.registry+":":""}${e.name}${e.version?"@"+e.version:""}`}function parsePkg(e){let t=e.indexOf("/");if("@"===e[0]){if(-1===t)return;t=e.indexOf("/",t+1);}return -1===t?{pkgName:e,subpath:"."}:{pkgName:e.slice(0,t),subpath:"."+e.slice(t)}}const p=new Set(["_http_agent","_http_client","_http_common","_http_incoming","_http_outgoing","_http_server","_stream_duplex","_stream_passthrough","_stream_readable","_stream_transform","_stream_wrap","_stream_writable","_tls_common","_tls_wrap","assert","assert/strict","async_hooks","buffer","child_process","cluster","console","constants","crypto","dgram","diagnostics_channel","dns","dns/promises","domain","events","fs","fs/promises","http","http2","https","inspector","module","net","os","path","path/posix","path/win32","perf_hooks","process","punycode","querystring","readline","repl","stream","stream/promises","string_decoder","sys","timers","timers/promises","tls","trace_events","tty","url","util","util/types","v8","vm","wasi","worker_threads","zlib"]);function pkgToUrl$5(e){if("node"!==e.registry)throw new Error("Node a Node.js URL");return "node:"+e.name}function parseUrlPkg$5(e){if(e.startsWith("node:"))return {registry:"node",name:e.slice(5),version:""}}async function getPackageConfig$1(){return null}async function resolveLatestTarget$2(){throw new Error("No version resolution is provided for node:_ builtins")}var f=Object.freeze({__proto__:null,nodeBuiltinSet:p,pkgToUrl:pkgToUrl$5,parseUrlPkg:parseUrlPkg$5,getPackageConfig:getPackageConfig$1,resolveLatestTarget:resolveLatestTarget$2});const u="https://ga.jspm.io/";const d="https://ga.system.jspm.io/";const g="https://api.jspm.io/";const m=3e5;const w=5e3;function pkgToUrl$4(e,t){return ("system"===t?d:u)+pkgToStr(e)+"/"}const v=/^(([a-z]+):)?((?:@[^/\\%@]+\/)?[^./\\%@][^/\\%@]*)@([^\/]+)(\/.*)?$/;function parseUrlPkg$4(e){let t;if(e.startsWith(u))t="default";else {if(!e.startsWith(d))return;t="system";}const[,,s,r,i]=e.slice(("default"===t?u:d).length).match(v)||[];return {pkg:{registry:s,name:r,version:i},layer:t}}let y={};function clearResolveCache(){y={};}async function checkBuildOrError(e,t){const r=pkgToStr(e);const i=await fetch$1(`${u}${r}/package.json`,t);if(i.ok)return true;const n=await fetch$1(`${u}${r}/_error.log`,t);if(n.ok){const t=await n.text();throw new JspmError(`Resolved dependency ${r} with error:\n\n${t}\nPlease post an issue at jspm/project on GitHub, or by following the link below:\n\nhttps://github.com/jspm/project/issues/new?title=CDN%20build%20error%20for%20${encodeURIComponent(e.name+"@"+e.version)}&body=_Reporting%20CDN%20Build%20Error._%0A%0A%3C!--%20%20No%20further%20description%20necessary,%20just%20click%20%22Submit%20new%20issue%22%20--%3E`)}return false}async function ensureBuild(e,t){const r=pkgToStr(e);if(await checkBuildOrError(e,t))return;const i=await fetch$1(`${g}/build/${e.name}@${e.version}`);if(!i.ok&&403!==i.status){const e=(await i.json()).error;throw new JspmError(`Unable to request the JSPM API for a build of ${r}, with error: ${e}.`)}let n=Date.now();while(true){await new Promise((e=>setTimeout(e,w)));if(await checkBuildOrError(e,t))return;if(Date.now()-n>=m)throw new JspmError(`Timed out waiting for the build of ${r} to be ready on the JSPM CDN. Try again later, or post a JSPM project issue if the issue persists.`)}}async function resolveLatestTarget$1(e,t,s,r){const{registry:i,name:n,range:a}=e;if(a.isExact&&!a.version.tag){const e={registry:i,name:n,version:a.version.toString()};await ensureBuild(e,this.fetchOpts);return e}const o=y[e.registry+":"+e.name]=y[e.registry+":"+e.name]||{latest:null,majors:Object.create(null),minors:Object.create(null),tags:Object.create(null)};if(a.isWildcard){let s=await(o.latest||(o.latest=lookupRange.call(this,i,n,"",t,r)));s instanceof Promise&&(s=await s);if(s){s instanceof Promise&&throwInternalError();this.log("resolve",`${e.registry}:${e.name}@${a} -> WILDCARD ${s.version}${r?" ["+r+"]":""}`);await ensureBuild(s,this.fetchOpts);return s}}else if(a.isExact&&a.version.tag){const s=a.version.tag;let l=await(o.tags[s]||(o.tags[s]=lookupRange.call(this,i,n,s,t,r)));l instanceof Promise&&(l=await l);if(l){l instanceof Promise&&throwInternalError();this.log("resolve",`${e.registry}:${e.name}@${a} -> TAG ${s}${r?" ["+r+"]":""}`);await ensureBuild(l,this.fetchOpts);return l}}else if(a.isMajor){const s=a.version.major;let l=await(o.majors[s]||(o.majors[s]=lookupRange.call(this,i,n,s,t,r)));l instanceof Promise&&(l=await l);if(l){l instanceof Promise&&throwInternalError();this.log("resolve",`${e.registry}:${e.name}@${a} -> MAJOR ${l.version}${r?" ["+r+"]":""}`);await ensureBuild(l,this.fetchOpts);return l}}else if(a.isStable){const s=`${a.version.major}.${a.version.minor}`;let l=await(o.minors[s]||(o.minors[s]=lookupRange.call(this,i,n,s,t,r)));l instanceof Promise&&(l=await l);if(l){l instanceof Promise&&throwInternalError();this.log("resolve",`${e.registry}:${e.name}@${a} -> MINOR ${l.version}${r?" ["+r+"]":""}`);await ensureBuild(l,this.fetchOpts);return l}}return null}function pkgToLookupUrl(e,t=false){return `${u}${e.registry}:${e.name}${e.version?"@"+e.version:t?"@":""}`}async function lookupRange(e,t,r,i,n){const a=await fetch$1(pkgToLookupUrl({registry:e,name:t,version:r},i),this.fetchOpts);switch(a.status){case 304:case 200:return {registry:e,name:t,version:(await a.text()).trim()};case 404:return null;default:throw new JspmError(`Invalid status code ${a.status} looking up "${e}:${t}" - ${a.statusText}${importedFrom(n)}`)}}var U=Object.freeze({__proto__:null,pkgToUrl:pkgToUrl$4,parseUrlPkg:parseUrlPkg$4,clearResolveCache:clearResolveCache,resolveLatestTarget:resolveLatestTarget$1});const{Semver:k,SemverRange:$}=e$3;function addInstalledRange(e,t,s,r){const i=getInstalledRanges(e,r);for(const e of i)if(e.name===t&&e.pkgUrl===s)return;i.push({name:t,pkgUrl:s,target:r});}function getInstalledRanges(e,t){return e[t.registry+":"+t.name]=e[t.registry+":"+t.name]||[]}function pruneResolutions(e,t){const s={};for(const[r,i]of t){const t=e[i][r];s[i]=s[i]||{};s[i][r]=t;}return s}function getResolution(e,t,s){s.endsWith("/")||throwInternalError(s);e[s]=e[s]||{};return e[s][t]}function stringResolution(e,t){e.endsWith("/")||throwInternalError(e);return t?e.slice(0,-1)+"|"+t:e}function setResolution(e,t,s,r,i){s.endsWith("/")||throwInternalError(s);e[s]=e[s]||{};const n=stringResolution(r,i);if(e[s][t]===n)return false;e[s][t]=n;return true}class Installer{constructor(e,t,s,r){this.installedRanges={};this.installing=false;this.newInstalls=false;this.currentInstall=Promise.resolve();this.added=new Map;this.hasLock=false;this.defaultProvider={provider:"jspm",layer:"default"};this.log=s;this.resolver=r;this.resolutions=t.resolutions||{};this.installBaseUrl=e.href;this.opts=t;let i={};t.lock&&({resolutions:i,exists:this.hasLock}=t.lock);t.defaultProvider&&(this.defaultProvider={provider:t.defaultProvider.split(".")[0],layer:t.defaultProvider.split(".")[1]||"default"});this.providers=t.providers||{};this.installs=i;if(t.stdlib)if(isURL(t.stdlib)||"."===t.stdlib[0]){this.stdlibTarget=new URL(t.stdlib,e);this.stdlibTarget.href.endsWith("/")&&(this.stdlibTarget.pathname=this.stdlibTarget.pathname.slice(0,-1));}else this.stdlibTarget=newPackageTarget(t.stdlib,this.installBaseUrl);}async startInstall(){if(this.installing)return this.currentInstall.then((()=>this.startInstall()));let e;this.installing=true;this.newInstalls=false;this.added=new Map;this.currentInstall=new Promise((t=>{e=async e=>{if(!e){this.installing=false;t();return false}this.installing=false;t();return {pjsonChanged:false,lock:this.installs}};}));return e}async lockInstall(e,t=this.installBaseUrl,s=true){const r=new Set;const visitInstall=async(e,t)=>{if(r.has(e+"##"+t))return;r.add(e+"##"+t);const s=await this.install(e,t);const i=s.split("|")[0]+(-1===s.indexOf("|")?"":"/");const n=await this.resolver.getDepList(i);const a=Object.keys(this.installs[i]||{});await Promise.all([...new Set([...n,...a])].map((e=>visitInstall(e,i))));};await Promise.all(e.map((e=>visitInstall(e,t))));if(s){const e=[...r].map((e=>{const[t,s]=e.split("##");return [t,s]}));this.installs=pruneResolutions(this.installs,e);}}replace(e,t,s){let r;if(e instanceof URL)r=e.href;else {const i=this.getBestMatch(e);if(!i){if(this.installs[t])return false;throw new Error("No installation found to replace.")}r=this.resolver.pkgToUrl(i,s);}let i=false;for(const e of Object.keys(this.installs)){for(const s of Object.keys(this.installs[e]))if(this.installs[e][s]===r){this.installs[e][s]=t;i=true;}if(e===r){this.installs[t]=this.installs[e];delete this.installs[e];i=true;}}return i}async installTarget(e,t,s,r,i,n){if(this.opts.freeze)throw new JspmError(`"${e}" is not installed in the jspm lockfile, imported from ${n}.`,"ERR_NOT_INSTALLED");r&&(s===this.installBaseUrl&&s.startsWith("file:")?this.added.set(e,t):this.log("info",`Package ${e} not declared in package.json dependencies${importedFrom(n)}.`));if(t instanceof URL){this.log("install",`${e} ${s} -> ${t.href}`);const r=t.href+(t.href.endsWith("/")?"":"/");this.newInstalls=setResolution(this.installs,e,s,r,i);return stringResolution(r,i)}let a=this.defaultProvider;for(const e of Object.keys(this.providers))if(t.name.startsWith(e)&&(t.name.length===e.length||"/"===t.name[e.length])){a={provider:this.providers[e],layer:"default"};const t=a.provider.indexOf(".");if(-1!==t){a.layer=a.provider.slice(t+1);a.provider=a.provider.slice(0,t);}break}if(this.opts.freeze){const r=this.getBestMatch(t);if(r){this.log("install",`${e} ${s} -> ${r.registry}:${r.name}@${r.version}`);const n=this.resolver.pkgToUrl(r,a);this.newInstalls=setResolution(this.installs,e,s,n,i);addInstalledRange(this.installedRanges,e,s,t);return stringResolution(n,i)}}const o=await this.resolver.resolveLatestTarget(t,false,a,n);const l=getInstalledRanges(this.installedRanges,t);const c=this.tryUpgradePackagesTo(o,t,l,a);if(c&&!this.opts.latest){c instanceof URL?this.log("install",`${e} ${s} -> ${c.href}`):this.log("install",`${e} ${s} -> ${c.registry}:${c.name}@${c.version}`);const r=c instanceof URL?c.href:this.resolver.pkgToUrl(c,a);this.newInstalls=setResolution(this.installs,e,s,r,i);addInstalledRange(this.installedRanges,e,s,t);return stringResolution(r,i)}this.log("install",`${e} ${s} -> ${o.registry}:${o.name}@${o.version}`);const h=this.resolver.pkgToUrl(o,a);this.newInstalls=setResolution(this.installs,e,s,h,i);addInstalledRange(this.installedRanges,e,s,t);return stringResolution(h,i)}async install(e,t,s=true,r=this.installBaseUrl){var i,n,a,o,l,c;this.installing||throwInternalError("Not installing");if(!this.opts.reset){const s=null===(i=this.installs[t])||void 0===i?void 0:i[e];if(s&&!this.opts.reset)return s}if(this.resolutions[e])return this.installTarget(e,newPackageTarget(this.resolutions[e],this.opts.baseUrl.href,e),t,false,null,r);const h=await this.resolver.getPackageConfig(t)||{};if(s&&p.has(e))return this.installTarget(e,this.stdlibTarget,t,false,"nodelibs/"+e,r);const f=(null===(n=h.dependencies)||void 0===n?void 0:n[e])||(null===(a=h.peerDependencies)||void 0===a?void 0:a[e])||(null===(o=h.optionalDependencies)||void 0===o?void 0:o[e])||t===this.installBaseUrl&&(null===(l=h.devDependencies)||void 0===l?void 0:l[e]);if(f){const s=newPackageTarget(f,t,e);return this.installTarget(e,s,t,false,null,r)}if(null===(c=this.installs[this.installBaseUrl])||void 0===c?void 0:c[e])return this.installs[this.installBaseUrl][e];const u=newPackageTarget("*",t,e);const d=await this.installTarget(e,u,t,true,null,r);return d}getBestMatch(e){let t=null;for(const s of Object.keys(this.installs)){const r=this.resolver.parseUrlPkg(s);r&&this.inRange(r.pkg,e)&&(t=t?-1===k.compare(new k(t.version),r.pkg.version)?r.pkg:t:r.pkg);}return t}inRange(e,t){return e.registry===t.registry&&e.name===t.name&&t.ranges.some((t=>t.has(e.version,true)))}tryUpgradePackagesTo(e,t,s,r){if(this.opts.freeze)return;const i=new k(e.version);let n=true;for(const{target:e}of s)e.ranges.every((e=>!e.has(i)))&&(n=false);if(n)for(const{name:t,pkgUrl:i}of s){const[s,n]=getResolution(this.installs,t,i).split("|");const a=parseUrlPkg$4(s);if(a){const{pkg:{version:a}}=parseUrlPkg$4(s);a!==e.version&&(this.newInstalls=setResolution(this.installs,t,i,this.resolver.pkgToUrl(e,r),n));}else this.newInstalls=setResolution(this.installs,t,i,s,n);}else for(const{name:r,pkgUrl:i}of s){const s=getResolution(this.installs,r,i).split("|")[0];const n=parseUrlPkg$4(s);if(!n)return new URL(s.endsWith("/")?s:s+"/");{const{pkg:{version:r}}=parseUrlPkg$4(s);if(t.ranges.some((e=>e.has(r))))return {registry:e.registry,name:e.name,version:r}}}}}const b="https://cdn.skypack.dev/";function pkgToUrl$3(e){return b+e.name+"@"+e.version+"/"}const R=/^((?:@[^/\\%@]+\/)?[^./\\%@][^/\\%@]*)@([^\/]+)(\/.*)?$/;function parseUrlPkg$3(e){if(!e.startsWith(b))return;const[,t,s]=e.slice(b.length).match(R)||[];return {registry:"npm",name:t,version:s}}var P=Object.freeze({__proto__:null,pkgToUrl:pkgToUrl$3,parseUrlPkg:parseUrlPkg$3,resolveLatestTarget:resolveLatestTarget$1});const L="https://cdn.jsdelivr.net/";function pkgToUrl$2(e){return L+e.registry+"/"+e.name+"@"+e.version+"/"}const T=/^([^\/]+)\/((?:@[^/\\%@]+\/)?[^./\\%@][^/\\%@]*)@([^\/]+)(\/.*)?$/;function parseUrlPkg$2(e){if(!e.startsWith(L))return;const[,t,s,r]=e.slice(L.length).match(T)||[];return {registry:t,name:s,version:r}}var x=Object.freeze({__proto__:null,pkgToUrl:pkgToUrl$2,parseUrlPkg:parseUrlPkg$2,resolveLatestTarget:resolveLatestTarget$1});const j="https://unpkg.com/";function pkgToUrl$1(e){return j+e.name+"@"+e.version+"/"}const E=/^((?:@[^/\\%@]+\/)?[^./\\%@][^/\\%@]*)@([^\/]+)(\/.*)?$/;function parseUrlPkg$1(e){if(!e.startsWith(j))return;const[,t,s]=e.slice(j.length).match(E)||[];return {registry:"npm",name:t,version:s}}var O=Object.freeze({__proto__:null,pkgToUrl:pkgToUrl$1,parseUrlPkg:parseUrlPkg$1,resolveLatestTarget:resolveLatestTarget$1});function pkgToUrl(e){return new URL(e.version+e.name+"/").href}function parseUrlPkg(e){const t=e.lastIndexOf("/node_modules/");if(-1===t)return;const s=e.slice(0,t+14);const r=e.slice(t+14).split("/");const i="@"===r[0][0]?r[0]+"/"+r[1]:r[0];return {registry:"node_modules",name:i,version:s}}async function dirExists(e,t){const r=await fetch$1(e,this.fetchOpts);switch(r.status){case 304:case 200:return true;case 404:return false;default:throw new JspmError(`Invalid status code ${r.status} looking up "${e}" - ${r.statusText}${importedFrom(t)}`)}}async function resolveLatestTarget(e,t,s,r){let i=new URL(`node_modules/${e.name}`,r);const n=new URL(`/node_modules/${e.name}`,r).href;while(!await dirExists.call(this,i)){if(i.href===n)return null;i=new URL(`../../${-1===e.name.indexOf("/")?"":"../"}node_modules/${e.name}`,i);}return {registry:"node_modules",name:e.name,version:i.href.slice(0,-e.name.length)}}var D=Object.freeze({__proto__:null,pkgToUrl:pkgToUrl,parseUrlPkg:parseUrlPkg,resolveLatestTarget:resolveLatestTarget});const _={jsdelivr:x,jspm:U,node:f,nodemodules:D,skypack:P,unpkg:O};function getProvider(e,t=_){const s=t[e];if(s)return s;throw new Error("No "+e+" provider is defined.")}let I,S;const M=globalThis.console;const W={log(){},warn(){},memory(){},assert(){},clear(){},count(){},countReset(){},debug(){},dir(){},dirxml(){},error(){},exception(){},group(){},groupCollapsed(){},groupEnd(){},info(){},table(){},time(){},timeEnd(){},timeLog(){},timeStamp(){},trace(){}};async function createTsAnalysis(e,t){I||([{default:I},{default:{default:S}}]=await Promise.all([import('./dev.index-8fbc4ee6.js').then(function (n) { return n.b; }),import('./index-efc3aad2.js')]));const s=new Set;const r=new Set;let i=false;globalThis.console=W;try{I.transform(e,{filename:"/"+t,ast:false,sourceMaps:false,inputSourceMap:false,babelrc:false,babelrcRoots:false,configFile:false,highlightCode:false,compact:false,sourceType:"module",parserOpts:{plugins:["jsx"],errorRecovery:true},presets:[[S,{onlyRemoveTypeImports:true}]],plugins:[({types:e})=>({visitor:{ExportAllDeclaration(e){s.add(e.node.source.value);},ExportNamedDeclaration(e){e.node.source&&s.add(e.node.source.value);},ImportDeclaration(e){s.add(e.node.source.value);},Import(e){r.add(buildDynamicString$1(e.parentPath.get("arguments.0").node,t,true));},MetaProperty(t){e.isIdentifier(t.node.meta,{name:"import"})&&e.isIdentifier(t.node.property,{name:"meta"})&&(i=true);}}})]});}finally{globalThis.console=M;}return {deps:[...s],dynamicDeps:[...r],cjsLazyDeps:null,size:e.length,format:"typescript"}}function buildDynamicString$1(e,t,s=false,r=false){if("StringLiteral"===e.type)return e.value;if("TemplateLiteral"===e.type){let i="";for(let n=0;n<e.quasis.length;n++){const a=e.quasis[n].value.cooked;if(a.length){i+=a;r=false;}const o=e.expressions[n];if(o){const e=buildDynamicString$1(o,t,s,r);if(e.length){r=e.endsWith("*");i+=e;}}}return i}if("BinaryExpression"===e.type&&"+"===e.operator){const i=buildDynamicString$1(e.left,t,s,r);i.length&&(r=i.endsWith("*"));const n=buildDynamicString$1(e.right,t,s,r);return i+n}if(s&&"Identifier"===e.type){if("__dirname"===e.name)return ".";if("__filename"===e.name)return "./"+t}return r?"":"*"}let C;async function createCjsAnalysis(e,t,s){C||({default:C}=await import('./dev.index-8fbc4ee6.js').then(function (n) { return n.b; }));const r=new Set;const i=new Set;C.transform(t,{ast:false,sourceMaps:false,inputSourceMap:false,babelrc:false,babelrcRoots:false,configFile:false,highlightCode:false,compact:false,sourceType:"script",parserOpts:{allowReturnOutsideFunction:true,errorRecovery:true},plugins:[({types:e})=>({visitor:{Program(e,t){t.functionDepth=0;},CallExpression(t,n){if(e.isIdentifier(t.node.callee,{name:"require"})||e.isIdentifier(t.node.callee.object,{name:"require"})&&e.isIdentifier(t.node.callee.property,{name:"resolve"})||e.isMemberExpression(t.node.callee)&&e.isIdentifier(t.node.callee.object,{name:"module"})&&e.isIdentifier(t.node.callee.property,{name:"require"})){const e=buildDynamicString(t.get("arguments.0").node,s);r.add(e);n.functionDepth>0&&i.add(e);}},Scope:{enter(t,s){e.isFunction(t.scope.block)&&s.functionDepth++;},exit(t,s){e.isFunction(t.scope.block)&&s.functionDepth--;}}}})]});return {deps:[...r],dynamicDeps:e.filter((e=>e.n)).map((e=>e.n)),cjsLazyDeps:[...i],size:t.length,format:"commonjs"}}function buildDynamicString(e,t,s=false,r=false){if("StringLiteral"===e.type)return e.value;if("TemplateLiteral"===e.type){let i="";for(let n=0;n<e.quasis.length;n++){const a=e.quasis[n].value.cooked;if(a.length){i+=a;r=false;}const o=e.expressions[n];if(o){const e=buildDynamicString(o,t,s,r);if(e.length){r=e.endsWith("*");i+=e;}}}return i}if("BinaryExpression"===e.type&&"+"===e.operator){const i=buildDynamicString(e.left,t,s,r);i.length&&(r=i.endsWith("*"));const n=buildDynamicString(e.right,t,s,r);return i+n}if("Identifier"===e.type){if("__dirname"===e.name)return ".";if("__filename"===e.name)return "./"+t}return r?"":"*"}function createEsmAnalysis(e,t,s){if(!e.length&&z.test(t))return createSystemAnalysis(t,e);const r=[];const i=[];for(const s of e)if(-1!==s.d){if(s.d>=0){const e=t.slice(s.s,s.e);if(e.startsWith('"')||e.startsWith("'"))try{i.push(JSON.parse('"'+e.slice(1,-1)+'"'));}catch(e){console.warn("TODO: Dynamic import custom expression tracing.");}}}else r.push(t.slice(s.s,s.e));const n=t.length;return {deps:r,dynamicDeps:i,cjsLazyDeps:null,size:n,format:"esm"}}const z=/^\s*(\/\*[^\*]*(\*(?!\/)[^\*]*)*\*\/|\s*\/\/[^\n]*)*\s*System\s*\.\s*register\s*\(\s*(\[[^\]]*\])\s*,\s*\(?function\s*\(\s*([^\),\s]+\s*(,\s*([^\),\s]+)\s*)?\s*)?\)/;function createSystemAnalysis(e,t,s){const[,,,r,,,i]=e.match(z)||[];if(!r)return createEsmAnalysis(t,e);const n=JSON.parse(r.replace(/'/g,'"'));const a=[];if(i){const t=`${i}.import(`;let s=-1;while(-1!==(s=e.indexOf(t,s+1))){const r=s+t.length+1;const i=e[s+t.length];if('"'===i||"'"===i){const n=e.indexOf(i,s+t.length+1);if(-1!==n)try{a.push(JSON.parse('"'+e.slice(r,n)+'"'));continue}catch(e){}}console.warn("TODO: Dynamic import custom expression tracing.");}}const o=e.length;return {deps:n,dynamicDeps:a,cjsLazyDeps:null,size:o,format:"system"}}let N,B;class Resolver{constructor(e,t,s=false){this.pcfgPromises=Object.create(null);this.pcfgs=Object.create(null);this.preserveSymlinks=false;this.providers=_;this.log=e;this.fetchOpts=t;this.preserveSymlinks=s;}addCustomProvider(e,t){if(!t.pkgToUrl)throw new Error('Custom provider "'+e+'" must define a "pkgToUrl" method.');if(!t.parseUrlPkg)throw new Error('Custom provider "'+e+'" must define a "parseUrlPkg" method.');if(!t.resolveLatestTarget)throw new Error('Custom provider "'+e+'" must define a "resolveLatestTarget" method.');this.providers=Object.assign({},this.providers,{[e]:t});}parseUrlPkg(e){for(const t of Object.keys(this.providers)){const s=this.providers[t];const r=s.parseUrlPkg.call(this,e);if(r)return {pkg:"pkg"in r?r.pkg:r,source:{provider:t,layer:"layer"in r?r.layer:"default"}}}return null}pkgToUrl(e,{provider:t,layer:s}){return getProvider(t,this.providers).pkgToUrl.call(this,e,s)}async getPackageBase(e){const t=this.parseUrlPkg(e);if(t)return this.pkgToUrl(t.pkg,t.source);let s;try{s=new URL("./",e);}catch{return e}const r=new URL("/",s).href;do{let t;if(t=await this.checkPjson(s.href))return new URL(".",t).href;if(s.href===r)return new URL("./",e).href}while(s=new URL("../",s))}async getPackageConfig(e){if(!e.startsWith("file:")&&!e.startsWith("http:")&&!e.startsWith("https:")&&!e.startsWith("ipfs:"))return null;if(!e.endsWith("/"))throw new Error(`Internal Error: Package URL must end in "/". Got ${e}`);let t=this.pcfgs[e];if(t)return t;this.pcfgPromises[e]||(this.pcfgPromises[e]=(async()=>{var t,r;const i=this.parseUrlPkg(e);if(i){const s=await(null===(t=getProvider(i.source.provider,this.providers).getPackageConfig)||void 0===t?void 0:t.call(this,e));if(void 0!==s){this.pcfgs[e]=s;return}}const n=await fetch$1(`${e}package.json`,this.fetchOpts);switch(n.status){case 200:case 304:break;case 401:case 403:case 404:case 406:this.pcfgs[e]=null;return;default:throw new JspmError(`Invalid status code ${n.status} reading package config for ${e}. ${n.statusText}`)}if(n.headers&&!(null===(r=n.headers.get("Content-Type"))||void 0===r?void 0:r.match(/^application\/json(;|$)/)))this.pcfgs[e]=null;else try{this.pcfgs[e]=await n.json();}catch(t){this.pcfgs[e]=null;}})());await this.pcfgPromises[e];return this.pcfgs[e]}async getDepList(e,t=false){const s=await this.getPackageConfig(e);return s?[...new Set([Object.keys(s.dependencies||{}),Object.keys(t&&s.devDependencies||{}),Object.keys(s.peerDependencies||{}),Object.keys(s.optionalDependencies||{}),Object.keys(s.imports||{})].flat())]:[]}async checkPjson(e){return null!==await this.getPackageConfig(e)&&e}async exists(e){const t=await fetch$1(e,this.fetchOpts);switch(t.status){case 200:case 304:return true;case 404:case 406:return false;default:throw new JspmError(`Invalid status code ${t.status} loading ${e}. ${t.statusText}`)}}async resolveLatestTarget(e,t,{provider:s,layer:r},i){let n;for(const t of e.ranges.sort(e.ranges[0].constructor.compare))n?t.gt(n)&&!n.contains(t)&&(n=t):n=t;const a={registry:e.registry,name:e.name,range:n};const o=await getProvider(s,this.providers).resolveLatestTarget.call(this,a,t,r,i);if(o)return o;throw new JspmError(`Unable to resolve package ${a.registry}:${a.name} to "${a.range}"${importedFrom(i)}`)}async wasCommonJS(e){var t;const s=await this.getPackageBase(e);if(!s)return false;const r=await this.getPackageConfig(s);if(!r)return false;const i="./"+e.slice(s.length);return !!(null===(t=null===r||void 0===r?void 0:r.exports)||void 0===t?void 0:t[i+"!cjs"])}async realPath(e){if(!e.startsWith("file:")||this.preserveSymlinks)return e;let t=false;e=e.replace(/%3a/i,(()=>{t=true;return ":"}));N||([{realpath:N},{pathToFileURL:B}]=await Promise.all([import('./fs-51f024e7.js').then(function (n) { return n.h; }),import('./url-a2bc15ed.js').then(function (n) { return n.u; })]));const s=B(await new Promise(((t,s)=>N(new URL(e),((e,r)=>e?s(e):t(r)))))).href;return t?s.replace(":","%3a"):s}async finalizeResolve(e,t,s,r,i){t&&e.endsWith("/")&&(e=e.slice(0,-1));t&&(e=await(async()=>{if(await this.exists(e+"/package.json")){const n=await this.getPackageConfig(e)||{};return s.includes("browser")&&"string"===typeof n.browser?this.finalizeResolve(await legacyMainResolve.call(this,n.browser,new URL(e)),t,s,r,i):s.includes("module")&&"string"===typeof n.module?this.finalizeResolve(await legacyMainResolve.call(this,n.module,new URL(e)),t,s,r,i):"string"===typeof n.main?this.finalizeResolve(await legacyMainResolve.call(this,n.main,new URL(e)),t,s,r,i):this.finalizeResolve(await legacyMainResolve.call(this,null,new URL(e)),t,s,r,i)}return await this.exists(e+"/index.js")?e+"/index.js":await this.exists(e+"/index.json")?e+"/index.json":await this.exists(e+"/index.node")?e+"/index.node":await this.exists(e)?e:await this.exists(e+".js")?e+".js":await this.exists(e+".json")?e+".json":await this.exists(e+".node")?e+".node":e})());if(s.includes("browser")){i=i||await this.getPackageBase(e);if(e.startsWith(i)){const n=await this.getPackageConfig(i);if(n&&"object"===typeof n.browser&&null!==n.browser){const a="./"+e.slice(i.length);if(n.browser[a]){const o=n.browser[a];if(false===o)throw new Error(`TODO: Empty browser map for ${a} in ${e}`);if(!o.startsWith("./"))throw new Error(`TODO: External browser map for ${a} to ${o} in ${e}`);return await this.finalizeResolve(i+o.slice(2),t,s,r,i)}}}}if(e.startsWith("node:")){const n=await r.installTarget(e.slice(5),r.stdlibTarget,i,false,"nodelibs/"+e.slice(5),i);let[a,o]=n.split("|");a.endsWith("/")||(a+="/");o=o.length?"./"+o:".";return this.finalizeResolve(await this.resolveExport(a,o,s,t,e,r,new URL(i)),t,s,r,a)}return e}async resolveExport(e,t,s,r,n,a,o){const l=await this.getPackageConfig(e)||{};function throwExportNotDefined(){throw new JspmError(`No '${t}' exports subpath defined in ${e} resolving ${n}${importedFrom(o)}.`,"MODULE_NOT_FOUND")}if(void 0===l.exports||null===l.exports)return "."===t||r&&"./"===t?s.includes("browser")&&"string"===typeof l.browser?this.finalizeResolve(await legacyMainResolve.call(this,l.browser,new URL(e),n,e),r,s,a,e):s.includes("module")&&"string"===typeof l.module?this.finalizeResolve(await legacyMainResolve.call(this,l.module,new URL(e),n,e),r,s,a,e):"string"===typeof l.main?this.finalizeResolve(await legacyMainResolve.call(this,l.main,new URL(e),n,e),r,s,a,e):this.finalizeResolve(await legacyMainResolve.call(this,null,new URL(e),n,e),r,s,a,e):this.finalizeResolve(new URL(t,new URL(e)).href,r,s,a,e);{function allDotKeys(e){for(let t in e)if("."!==t[0])return false;return true}if("string"===typeof l.exports){if("."===t)return this.finalizeResolve(new URL(l.exports,e).href,r,s,a,e);throwExportNotDefined();}else if(allDotKeys(l.exports)){const n=getMapMatch(t,l.exports);if(n){const i=resolvePackageTarget(l.exports[n],e,s,t.slice(n.length-(n.endsWith("*")?1:0)));null===i&&throwExportNotDefined();return this.finalizeResolve(i,r,s,a,e)}throwExportNotDefined();}else {if("."===t)return this.finalizeResolve(resolvePackageTarget(l.exports,e,s,""),r,s,a,e);throwExportNotDefined();}}}async analyze(e,t,r,i,n=true){var a,l;const c=await fetch$1(e,this.fetchOpts);switch(c.status){case 200:case 304:break;case 404:throw new JspmError(`Module not found: ${e}${importedFrom(t)}`,"MODULE_NOT_FOUND");default:throw new JspmError(`Invalid status code ${c.status} loading ${e}. ${c.statusText}`)}let h=await c.text();try{if(e.endsWith(".ts")||e.endsWith(".tsx")||e.endsWith(".jsx"))return await createTsAnalysis(h,e);if(e.endsWith(".json"))try{JSON.parse(h);return {deps:[],dynamicDeps:[],cjsLazyDeps:null,size:h.length,format:"json"}}catch{}const[t,s]=await parse(h);if(t.every((e=>e.d>0))&&!s.length&&e.startsWith("file:"))if(i){if(!(e.endsWith(".mjs")||e.endsWith(".js")&&"module"===(null===(a=await this.getPackageConfig(await this.getPackageBase(e)))||void 0===a?void 0:a.type)))return createCjsAnalysis(t,h,e)}else if(e.endsWith(".cjs")||e.endsWith(".js")&&"module"!==(null===(l=await this.getPackageConfig(await this.getPackageBase(e)))||void 0===l?void 0:l.type))return createCjsAnalysis(t,h,e);return r?createSystemAnalysis(h,t,e):createEsmAnalysis(t,h,e)}catch(s){if(!s.message||!s.message.startsWith("Parse error @:"))throw s;if(n)try{return this.analyze(e,t,r,i,false)}catch{}if(s.message&&s.message.startsWith("Parse error @:")){const[t]=s.message.split("\n",1);const r=t.slice(14);let[i,n]=r.split(":");const a=h.split("\n");let o="";i>1&&(o+="\n  "+a[i-2]);o+="\n> "+a[i-1];o+="\n  "+" ".repeat(n-1)+"^";a.length>1&&(o+="\n  "+a[i]);throw new JspmError(`${o}\n\nError parsing ${e}:${r}`)}throw s}}}function resolvePackageTarget(e,t,s,r,i){if("string"===typeof e){if(""===r)return new URL(e,t).href;if(-1!==e.indexOf("*"))return new URL(e.replace(/\*/g,r),t).href;if(e.endsWith("/"))return new URL(e+r,t).href;throw new Error("Expected pattern or path export")}if("object"!==typeof e||null===e||Array.isArray(e)){if(Array.isArray(e))for(const i of e)return resolvePackageTarget(i,t,s,r)}else for(const i in e)if("default"===i||s.includes(i)){const n=resolvePackageTarget(e[i],t,s,r);if(n)return n}return null}async function legacyMainResolve(e,t,s,r){let i;if(e){if(await this.exists(i=new URL(`./${e}/index.js`,t).href))return i;if(await this.exists(i=new URL(`./${e}/index.json`,t).href))return i;if(await this.exists(i=new URL(`./${e}/index.node`,t).href))return i;if(await this.exists(i=new URL(`./${e}`,t).href))return i;if(await this.exists(i=new URL(`./${e}.js`,t).href))return i;if(await this.exists(i=new URL(`./${e}.json`,t).href))return i;if(await this.exists(i=new URL(`./${e}.node`,t).href))return i}else {if(await this.exists(i=new URL("./index.js",t).href))return i;if(await this.exists(i=new URL("./index.json",t).href))return i;if(await this.exists(i=new URL("./index.node",t).href))return i}throw new JspmError(`Unable to resolve ${e?e+" in ":""}${t} resolving ${s}${importedFrom(r)}.`,"MODULE_NOT_FOUND")}class TraceMap{constructor(e,t,s,r){this.env=["browser","development","module"];this.tracedUrls={};this.traces=new Set;this.staticList=new Set;this.dynamicList=new Set;this.log=s;this.resolver=r;this.mapBase=e;this.opts=t;this.opts.env&&(this.env=this.opts.env);t.inputMap?this.map=t.inputMap instanceof ImportMap?t.inputMap:new ImportMap(e).extend(t.inputMap):this.map=new ImportMap(e);this.installer=new Installer(this.mapBase,this.opts,this.log,this.resolver);}clearLists(){this.staticList=new Set;this.dynamicList=new Set;this.tracedUrls={};this.traces=new Set;}replace(e,t,s){return this.installer.replace(e,t,s)}async visit(e,t,s=new Set){if(s.has(e))return;s.add(e);const r=this.tracedUrls[e];if(r){for(const e of Object.keys(r.deps))-1===e.indexOf("*")&&await this.visit(r.deps[e],t,s);await t(e,r);}}checkTypes(){let e=false,t=false;for(const s of [...this.staticList,...this.dynamicList]){const r=this.tracedUrls[s];"system"===r.format?e=true:t=true;}return {system:e,esm:t}}async startInstall(){const e=await this.installer.startInstall();return async t=>{if(!t){e(false);return false}if(!this.opts.fullMap){const e={};do{this.installer.newInstalls=false;await Promise.all([...this.traces].map((async t=>{var s,r;const[i,n]=t.split("##");try{const a=await this.trace(i,new URL(n),(null===(r=null===(s=this.tracedUrls)||void 0===s?void 0:s[n])||void 0===r?void 0:r.wasCJS)?["require",...this.env]:["import",...this.env]);a&&(e[t]=a);}catch(e){throw e}})));}while(this.installer.newInstalls);let t=this.staticList;const s=new Set;const depVisitor=async(r,i)=>{var n,a,o,l,c,h,p,f,u;t.add(r);const d=await this.resolver.getPackageBase(r);for(const t of i.dynamicDeps){if(-1!==t.indexOf("*"))continue;const i=e[t+"##"+r];if(isPlain(t)){const e=null===(n=this.map.scopes[d])||void 0===n?void 0:n[t];(!e||e!==i&&(null===(o=null===(a=this.tracedUrls)||void 0===a?void 0:a[r])||void 0===o?void 0:o.wasCJS))&&this.map.set(t,i,d);}s.add(i);}for(const t of i.deps){if(-1!==t.indexOf("*"))continue;const s=e[t+"##"+r];if(isPlain(t)){const e=null===(l=this.map.scopes[d])||void 0===l?void 0:l[t];(!e||e!==s&&(null===(h=null===(c=this.tracedUrls)||void 0===c?void 0:c[r])||void 0===h?void 0:h.wasCJS))&&this.map.set(t,s,d);}}for(const t of i.cjsLazyDeps){if(-1!==t.indexOf("*"))continue;const s=e[t+"##"+r];if(isPlain(t)){const e=null===(p=this.map.scopes[d])||void 0===p?void 0:p[t];(!e||e!==s&&(null===(u=null===(f=this.tracedUrls)||void 0===f?void 0:f[r])||void 0===u?void 0:u.wasCJS))&&this.map.set(t,s,d);}}};const r=new Set;for(const t of this.traces){const s=e[t];if(void 0===s)continue;const[i,n]=t.split("##");isPlain(i)&&n===this.mapBase.href&&this.map.set(i,s);await this.visit(s,depVisitor,r);}t=this.dynamicList;for(const e of s)await this.visit(e,depVisitor,r);}return e(true)}}async add(e,t,s=true){const r=await this.installer.installTarget(e,t,this.mapBase.href,s,null,this.mapBase.href);return r.slice(0,-1)}
/**
     * @returns `resolved` - either a URL `string` pointing to the module or `null` if the specifier should be ignored.
     */
async trace(e,t=this.mapBase,s=["import",...this.env]){var r,n,o,l,c;if(null===(r=this.opts.ignore)||void 0===r?void 0:r.includes(e))return null;const h=await this.resolver.getPackageBase(t.href);h||throwInternalError();const p="commonjs"===(null===(n=this.tracedUrls[t.href])||void 0===n?void 0:n.format);this.traces.add(e+"##"+t.href);if(!isPlain(e)){let r=new URL(e,t);if("file:"!==r.protocol&&"https:"!==r.protocol&&"http:"!==r.protocol&&"node:"!==r.protocol&&"data:"!==r.protocol)throw new JspmError(`Found unexpected protocol ${r.protocol}${importedFrom(t)}`);const i=r.href;const n=await this.resolver.realPath(await this.resolver.finalizeResolve(i,p,s,this.installer,h));if(n!==i){this.map.set(i.endsWith("/")?i.slice(0,-1):i,n,h);r=new URL(n);}this.log("trace",`${e} ${t.href} -> ${r}`);await this.traceUrl(r.href,t,s);return r.href}const f=parsePkg(e);if(!f)throw new JspmError(`Invalid package name ${e}`);const{pkgName:u,subpath:d}=f;const g=getScopeMatches(t,this.map.scopes,this.map.baseUrl);const m=g.filter((([,e])=>e.startsWith(h)));if(m.length)for(const[r]of m){const n=getMapMatch(e,this.map.scopes[r]);if(n){const i=await this.resolver.realPath(new URL(this.map.scopes[r][n]+e.slice(n.length),this.map.baseUrl).href);this.log("trace",`${e} ${t.href} -> ${i}`);await this.traceUrl(i,t,s);return i}}const w=g.find((([,e])=>e===h));if(w){const r=this.map.scopes[w[0]];const n=getMapMatch(e,r);const a=n?await this.resolver.realPath(new URL(r[n]+e.slice(n.length),this.map.baseUrl).href):null;if(a){this.log("trace",`${e} ${t.href} -> ${a}`);await this.traceUrl(a,t,s);return a}}const v=getMapMatch(e,this.map.imports);const y=v?await this.resolver.realPath(new URL(this.map.imports[v]+e.slice(v.length),this.map.baseUrl).href):null;if(y){this.log("trace",`${e} ${t.href} -> ${y}`);await this.traceUrl(y,t,s);return y}const U=await this.resolver.getPackageConfig(h)||{};if(U.exports&&U.name===u){const r=await this.resolver.realPath(await this.resolver.resolveExport(h,d,s,p,e,this.installer,t));this.log("trace",`${e} ${t.href} -> ${r}`);await this.traceUrl(r,t,s);return r}if(U.imports&&"#"===u[0]){const r=getMapMatch(e,U.imports);if(!r)throw new JspmError(`No '${e}' import defined in ${h}${importedFrom(t)}.`);const n=await this.resolver.realPath(resolvePackageTarget(U.imports[r],h,s,e.slice(r.length),this.installer));this.map.set(r,n,h);this.log("trace",`${e} ${t.href} -> ${n}`);await this.traceUrl(n,t,s);return n}const k=this.opts.freeze?null===(l=null===(o=this.installer)||void 0===o?void 0:o.installs[h])||void 0===l?void 0:l[u]:await(null===(c=this.installer)||void 0===c?void 0:c.install(u,h,"./"!==d,t.href));if(k){let[r,i]=k.split("|");i&&!r.endsWith("/")&&(r+="/");const n=i?"./"+i+d.slice(1):d;const a=await this.resolver.realPath(await this.resolver.resolveExport(r,n,s,p,e,this.installer,t));this.log("trace",`${e} ${t.href} -> ${a}`);await this.traceUrl(a,t,s);return a}throw new JspmError(`No resolution in map for ${e}${importedFrom(t)}`)}async traceUrl(e,t,s){var r;if(e in this.tracedUrls)return;const i=this.tracedUrls[e]={wasCJS:false,deps:[],dynamicDeps:[],cjsLazyDeps:[],hasStaticParent:true,size:NaN,integrity:"",format:void 0};if(e.endsWith("/"))throw new JspmError(`Trailing "/" installs not yet supported installing ${e} for ${t.href}`);const n="commonjs"===(null===(r=this.tracedUrls[t.href])||void 0===r?void 0:r.format);const{deps:a,dynamicDeps:o,cjsLazyDeps:l,size:c,format:h}=await this.resolver.analyze(e,t,this.opts.system,n);i.format=h;i.size=c;const p="commonjs"===h||await this.resolver.wasCommonJS(e);p&&(i.wasCJS=true);p&&s.includes("import")?s=s.map((e=>"import"===e?"require":e)):!p&&s.includes("require")&&(s=s.map((e=>"require"===e?"import":e)));let f=[...a];if(o.length&&!this.opts.static)for(const e of o)f.includes(e)||f.push(e);if(l&&!this.opts.static)for(const e of l)f.includes(e)||f.push(e);const u=new URL(e);await Promise.all(f.map((async t=>{if(-1!==t.indexOf("*")){this.log("todo","Handle wildcard trace "+t+" in "+e);return}const r=await this.trace(t,u,s);if(null!==r){a.includes(t)&&!i.deps.includes(t)&&i.deps.push(t);o.includes(t)&&!i.dynamicDeps.includes(t)&&i.dynamicDeps.push(t);l&&l.includes(t)&&!i.cjsLazyDeps.includes(t)&&i.cjsLazyDeps.push(t);}})));}}function createLogger(){let e;let t=new Promise((t=>e=t));let s=[];const logStream=async function*(){while(true){while(s.length)yield s.shift();await t;}};function log(r,i){if(s.length)s.push({type:r,message:i});else {s=[{type:r,message:i}];const n=e;t=new Promise((t=>e=t));n();}}return {log:log,logStream:logStream}}function clearCache(){}class Generator$1{
/**
     * @param options GeneratorOptions
     *
     * For example:
     *
     * ```js
     * const generator = new Generator({
     *   mapUrl: import.meta.url,
     *   inputMap: {
     *     "imports": {
     *       "react": "https://cdn.skypack.dev/react"
     *     }
     *   },
     *   defaultProvider: 'jspm',
     *   providers: {
     *     '@orgscope': 'nodemodules'
     *   },
     *   customProviders: {},
     *   env: ['production', 'browser'],
     *   cache: false,
     * });
     * ```
     */
constructor({baseUrl:e,mapUrl:t,rootUrl:s,inputMap:r,env:i=["browser","development","module"],defaultProvider:n="jspm",customProviders:a,providers:o={},resolutions:c={},cache:h=true,stdlib:p="@jspm/core",ignore:f=[],ipfsAPI:u}={}){this.finishInstall=null;this.installCnt=0;let d;d="offline"===h?{cache:"force-cache"}:h?{}:{cache:"no-store"};u&&(d.ipfsAPI=u);const{log:g,logStream:m}=createLogger();const w=new Resolver(g,d,true);if(a)for(const e of Object.keys(a))w.addCustomProvider(e,a[e]);this.logStream=m;if(t&&!e){t="string"===typeof t?new URL(t,l):t;try{e=new URL("./",t);}catch{e=new URL(t+"/");}}else e&&!t?t=e:t||e||(e=t=l);this.baseUrl="string"===typeof e?new URL(e,l):e;if(!this.baseUrl.pathname.endsWith("/")){this.baseUrl=new URL(this.baseUrl.href);this.baseUrl.pathname+="/";}this.mapUrl="string"===typeof t?new URL(t,this.baseUrl):t;this.rootUrl="string"===typeof s?new URL(s,this.baseUrl):s||null;if(!this.mapUrl.pathname.endsWith("/"))try{this.mapUrl=new URL("./",this.mapUrl);}catch{this.mapUrl=new URL(this.mapUrl.href+"/");}this.traceMap=new TraceMap(this.mapUrl,{baseUrl:this.baseUrl,stdlib:p,env:i,defaultProvider:n,providers:o,inputMap:r,ignore:f,resolutions:c},g,w);}
/**
     * Trace a module and install all dependencies necessary into the map
     * to support its execution including static and dynamic module imports.
     *
     * @param specifier Import specifier to trace
     * @param parentUrl Parent URL to trace this specifier from
     */async traceInstall(e,t){"string"===typeof t&&(t=new URL(t));let s=false;0===this.installCnt++&&(this.finishInstall=await this.traceMap.startInstall());try{await this.traceMap.trace(e,t||this.baseUrl);}catch(e){s=true;throw e}finally{0===--this.installCnt&&await this.finishInstall(true);if(!s)return {staticDeps:[...this.traceMap.staticList],dynamicDeps:[...this.traceMap.dynamicList]}}}
/**
     * Install a package target into the import map, including all its dependency resolutions via tracing.
     * @param install Package to install
     *
     * For example:
     *
     * ```js
     * // Install a new package into the import map
     * await generator.install('react-dom');
     *
     * // Install a package version and subpath into the import map (installs lit/decorators.js)
     * await generator.install('lit@2/decorators.js');
     *
     * // Install a package version to a custom alias
     * await generator.install({ alias: 'react16', target: 'react@16' });
     *
     * // Install a specific subpath of a package
     * await generator.install({ target: 'lit@2', subpath: './html.js' });
     *
     * // Install an export from a locally located package folder into the map
     * // The package.json is used to determine the exports and dependencies.
     * await generator.install({ alias: 'mypkg', target: './packages/local-pkg', subpath: './feature' });
     * ```
     *
     */async install(e){this.traceMap.clearLists();if(Array.isArray(e))return await Promise.all(e.map((e=>this.install(e)))).then((()=>({staticDeps:[...this.traceMap.staticList],dynamicDeps:[...this.traceMap.dynamicList]})));if(1!==arguments.length)throw new Error("Install takes a single target string or object.");if("string"!==typeof e&&void 0!==e.subpaths){e.subpaths.every((e=>{if("string"!==typeof e||"."!==e&&!e.startsWith("./"))throw new Error(`Install subpath "${e}" must be equal to "." or start with "./".`)}));return await Promise.all(e.subpaths.map((t=>this.install({target:e.target,alias:e.alias,subpath:t})))).then((()=>({staticDeps:[...this.traceMap.staticList],dynamicDeps:[...this.traceMap.dynamicList]})))}let t=false;0===this.installCnt++&&(this.finishInstall=await this.traceMap.startInstall());try{const{alias:s,target:r,subpath:i}=await installToTarget.call(this,e);await this.traceMap.add(s,r);await this.traceMap.trace(s+i.slice(1),this.mapUrl);}catch(e){t=true;throw e}finally{0===--this.installCnt&&await this.finishInstall(true);if(!t)return {staticDeps:[...this.traceMap.staticList],dynamicDeps:[...this.traceMap.dynamicList]}}}
/**
     * Resolve a specifier using the import map.
     *
     * @param specifier Module to resolve
     * @param parentUrl ParentURL of module to resolve
     * @returns Resolved URL string
     */resolve(e,t=this.baseUrl){"string"===typeof t&&(t=new URL(t,this.baseUrl));const s=this.traceMap.map.resolve(e,t);if(null===s)throw new JspmError(`Unable to resolve "${e}" from ${t.href}`,"MODULE_NOT_FOUND");return s}get importMap(){return this.traceMap.map}
/**
     *
     * @param url
     * @returns
     */getAnalysis(e){"string"!==typeof e&&(e=e.href);const t=this.traceMap.tracedUrls[e];if(!t)throw new Error(`The URL ${e} has not been traced by this generator instance.`);return {format:t.format,staticDeps:t.deps,dynamicDeps:t.dynamicDeps,cjsLazyDeps:t.cjsLazyDeps||[]}}getMap(){const e=this.traceMap.map.clone();e.flatten(this.rootUrl?this.rootUrl:this.baseUrl);this.rootUrl&&e.rebase(this.rootUrl.href,true);e.sort();return e.toJSON()}}async function fetch(e,t={}){return fetch$1(e,t)}
/**
 * Get the lookup resolution information for a specific install.
 *
 * @param install The install object
 * @param lookupOptions Provider and cache defaults for lookup
 * @returns The resolved install and exact package { install, resolved }
 */async function lookup(e,{provider:t,cache:s}={}){const r=new Generator$1({cache:!s,defaultProvider:t});const{target:i,subpath:n,alias:a}=await installToTarget.call(r,e);if(i instanceof URL)throw new Error("URL lookups not supported");const o=await r.traceMap.resolver.resolveLatestTarget(i,true,r.traceMap.installer.defaultProvider);return {install:{target:{registry:i.registry,name:i.name,range:i.ranges.map((e=>e.toString())).join(" || ")},subpath:n,alias:a},resolved:o}}
/**
 * Get the package.json configuration for a specific URL or package.
 *
 * @param pkg Package to lookup configuration for
 * @param lookupOptions Optional provider and cache defaults for lookup
 * @returns Package JSON configuration
 *
 * Example:
 * ```js
 * import { getPackageConfig } from '@jspm/generator';
 *
 * // Supports a resolved package
 * {
 *   const packageJson = await getPackageConfig({ registry: 'npm', name: 'lit-element', version: '2.5.1' });
 * }
 *
 * // Or alternatively provide any URL
 * {
 *   const packageJson = await getPackageConfig('https://ga.jspm.io/npm:lit-element@2.5.1/lit-element.js');
 * }
 * ```
 */async function getPackageConfig(e,{provider:t,cache:s}={}){const r=new Generator$1({cache:!s,defaultProvider:t});e="object"===typeof e&&"name"in e?r.traceMap.resolver.pkgToUrl(e,r.traceMap.installer.defaultProvider):"string"===typeof e?new URL(e).href:e.href;return r.traceMap.resolver.getPackageConfig(e)}
/**
 * Get the package base URL for the given module URL.
 *
 * @param url module URL
 * @param lookupOptions Optional provider and cache defaults for lookup
 * @returns Base package URL
 *
 * Modules can be remote CDN URLs or local file:/// URLs.
 *
 * All modules in JSPM are resolved as within a package boundary, which is the
 * parent path of the package containing a package.json file.
 *
 * For JSPM CDN this will always be the base of the package as defined by the
 * JSPM CDN provider. For non-provider-defined origins it is always determined
 * by trying to fetch the package.json in each parent path until the root is reached
 * or one is found. On file:/// URLs this exactly matches the Node.js resolution
 * algorithm boundary lookup.
 *
 * This package.json file controls the package name, imports resolution, dependency
 * resolutions and other package information.
 *
 * getPackageBase will return the folder containing the package.json,
 * with a trailing '/'.
 *
 * This URL will either be the root URL of the origin, or it will be a
 * path "pkgBase" such that fetch(`${pkgBase}package.json`) is an existing
 * package.json file.
 *
 * For example:
 *
 * ```js
 *   import { getPackageBase } from '@jspm/generator';
 *   const pkgUrl = await getPackageBase('https://ga.jspm.io/npm:lit-element@2.5.1/lit-element.js');
 *   // Returns: https://ga.jspm.io/npm:lit-element@2.5.1/
 * ```
 */async function getPackageBase(e,{provider:t,cache:s}={}){const r=new Generator$1({cache:!s,defaultProvider:t});return r.traceMap.resolver.getPackageBase("string"===typeof e?e:e.href)}async function installToTarget(e){"string"===typeof e&&(e={target:e});if("string"!==typeof e.target)throw new Error('All installs require a "target" string.');if(void 0!==e.subpath&&("string"!==typeof e.subpath||"."!==e.subpath&&!e.subpath.startsWith("./")))throw new Error(`Install subpath "${e.subpath}" must be a string equal to "." or starting with "./".${"string"===typeof e.subpath?`\nTry setting the subpath to "./${e.subpath}"`:""}`);const{alias:t,target:s,subpath:r}=await toPackageTarget(this.traceMap.resolver,e.target,this.baseUrl.href);return {alias:e.alias||t,target:s,subpath:e.subpath||r}}

console.log(Generator);

export { Generator$1 as G, getPackageBase as a, clearCache as c, e$1 as e, fetch as f, getPackageConfig as g, lookup as l, oe$1 as o, v$1 as v };
